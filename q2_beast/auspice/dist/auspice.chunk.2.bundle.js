(window.webpackJsonp=window.webpackJsonp||[]).push([[2],Array(526).concat([function(t,e,n){"use strict";n.d(e,"p",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"j",(function(){return c})),n.d(e,"c",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"k",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"o",(function(){return m})),n.d(e,"l",(function(){return g})),n.d(e,"m",(function(){return v})),n.d(e,"n",(function(){return y})),n.d(e,"e",(function(){return _}));var i=n(2),o="Lato, Helvetica Neue, Helvetica, sans-serif",r="Lato, Helvetica Neue, Helvetica, sans-serif",a="Lato, Helvetica Neue, Helvetica, sans-serif",s="#333",l="#888",u="#BBB",c="#F2F2F2",h="#89B77F",p="#E39B39",d={backgroundColor:"#FFF",fontFamily:a,width:i.l-13,borderSpacing:0,fontSize:14,paddingLeft:"10px",border:"1px solid #ccc",height:36,appearance:"none",borderRadius:"4px",color:s,fontWeight:400,marginBottom:"3px"},f={border:"0px",backgroundColor:"inherit",marginLeft:0,marginTop:5,marginRight:10,marginBottom:5,borderRadius:2,cursor:"pointer",padding:2,fontFamily:a,color:s,fontWeight:400,textTransform:"uppercase",fontSize:14,verticalAlign:"top",outline:0},m={borderTop:"1px solid #BBB",borderLeft:"1px solid #CCC",borderRight:"1px solid #CCC",borderBottom:"1px solid #CCC",borderRadius:"0px 0px 3px 3px",paddingTop:3,paddingBottom:3,paddingLeft:6,paddingRight:6,backgroundColor:"#fff",fontWeight:400,color:s,fontFamily:a,fontSize:12,textTransform:"uppercase"},g={borderTop:"1px solid #BBB",borderLeft:"1px solid #CCC",borderRight:"1px solid #CCC",borderBottom:"1px solid #CCC",borderRadius:"0px 0px 3px 3px",paddingTop:3,paddingBottom:3,paddingLeft:6,paddingRight:6,backgroundColor:"#fff"},v={border:"none",backgroundColor:"inherit",padding:0,margin:0,cursor:"pointer",fontFamily:a,color:s,fontWeight:400,textTransform:"uppercase",fontSize:12},y={border:"none",backgroundColor:"inherit",padding:0,margin:0,cursor:"pointer",fontFamily:a,color:"#5097BA",fontWeight:400,textTransform:"uppercase",fontSize:12},_={branchInfoHeading:{fontSize:15,fontWeight:400,verticalAlign:"middle",padding:"5px"},buttonLink:{float:"right",fontFamily:a,fontSize:14,fontWeight:400,textDecoration:"none",pointerEvents:"auto",background:"none",color:"white",cursor:"pointer",textTransform:"uppercase",borderRadius:2,border:"1px solid #CCC",verticalAlign:"middle"},tooltip:{position:"relative",padding:5,color:"white",fontFamily:a,fontSize:14,lineHeight:1,fontWeight:300},modalContainer:{position:"absolute",width:"100%",height:"100%",pointerEvents:"all",top:0,left:0,zIndex:2e3,backgroundColor:"rgba(80, 80, 80, .20)",display:"flex",justifyContent:"center",alignItems:"center",wordWrap:"break-word",wordBreak:"break-word"},panel:{position:"relative",paddingLeft:30,padding:"5% 5%",borderRadius:5,backgroundColor:"rgba(55,55,55,0.9)",color:"white",fontFamily:a,fontSize:18,lineHeight:1,fontWeight:300,maxWidth:"80%",overflowY:"auto"},modalHeading:{fontSize:24,fontWeight:400},modalSubheading:{fontSize:20,fontWeight:400,marginTop:"20px",marginBottom:"20px"},tooltipHeading:{fontSize:18,fontWeight:400,marginBottom:"10px"},comment:{fontStyle:"italic",fontWeight:200,fontSize:14,marginTop:"10px"},topRightMessage:{fontStyle:"italic",fontWeight:200,fontSize:14,textAlign:"right",marginTop:"-20px"},list:{paddingLeft:15,listStyleType:"disc"},item:{paddingTop:4,paddingBottom:4,minWidth:120},break:{marginBottom:"10px"}}},,function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";n.d(e,"b",(function(){return st})),n.d(e,"a",(function(){return v}));var i=n(750),o=n(753),r=n(602),a=function(t,e,n){var i=new r.a;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i},s=Object(o.a)("start","end","cancel","interrupt"),l=[],u=function(t,e,n,i,o,u){var c=t.__transition;if(c){if(n in c)return}else t.__transition={};!function(t,e,n){var i,o=t.__transition;function s(r){var c,h,p,d;if(1!==n.state)return u();for(c in o)if((d=o[c]).name===n.name){if(3===d.state)return a(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete o[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete o[c])}if(a((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(r))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(p=n.tween.length),c=0,h=-1;c<p;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function l(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=5,1),r=-1,a=i.length;++r<a;)i[r].call(t,o);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var i in n.state=6,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=Object(r.c)((function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:o,on:s,tween:l,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})};function c(t,e){var n=p(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function h(t,e){var n=p(t,e);if(n.state>3)throw new Error("too late; already running");return n}function p(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var d,f,m,g,v=function(t,e){var n,i,o,r=t.__transition,a=!0;if(r){for(o in e=null==e?null:e+"",r)(n=r[o]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]):a=!1;a&&delete t.__transition}},y=n(99),_=180/Math.PI,b={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},w=function(t,e,n,i,o,r){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*_,skewX:Math.atan(l)*_,scaleX:a,scaleY:s}};function x(t,e,n,i){function o(t){return t.length?t.pop()+" ":""}return function(r,a){var s=[],l=[];return r=t(r),a=t(a),function(t,i,o,r,a,s){if(t!==o||i!==r){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:Object(y.a)(t,o)},{i:l-2,x:Object(y.a)(i,r)})}else(o||r)&&a.push("translate("+o+e+r+n)}(r.translateX,r.translateY,a.translateX,a.translateY,s,l),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(o(n)+"rotate(",null,i)-2,x:Object(y.a)(t,e)})):e&&n.push(o(n)+"rotate("+e+i)}(r.rotate,a.rotate,s,l),function(t,e,n,r){t!==e?r.push({i:n.push(o(n)+"skewX(",null,i)-2,x:Object(y.a)(t,e)}):e&&n.push(o(n)+"skewX("+e+i)}(r.skewX,a.skewX,s,l),function(t,e,n,i,r,a){if(t!==n||e!==i){var s=r.push(o(r)+"scale(",null,",",null,")");a.push({i:s-4,x:Object(y.a)(t,n)},{i:s-2,x:Object(y.a)(e,i)})}else 1===n&&1===i||r.push(o(r)+"scale("+n+","+i+")")}(r.scaleX,r.scaleY,a.scaleX,a.scaleY,s,l),r=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var M=x((function(t){return"none"===t?b:(d||(d=document.createElement("DIV"),f=document.documentElement,m=document.defaultView),d.style.transform=t,t=m.getComputedStyle(f.appendChild(d),null).getPropertyValue("transform"),f.removeChild(d),t=t.slice(7,-1).split(","),w(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),E=x((function(t){return null==t?b:(g||(g=document.createElementNS("http://www.w3.org/2000/svg","g")),g.setAttribute("transform",t),(t=g.transform.baseVal.consolidate())?(t=t.matrix,w(t.a,t.b,t.c,t.d,t.e,t.f)):b)}),", ",")",")"),L=n(566);function T(t,e){var n,i;return function(){var o=h(this,t),r=o.tween;if(r!==n)for(var a=0,s=(i=n=r).length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}o.tween=i}}function k(t,e,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var r=h(this,t),a=r.tween;if(a!==i){o=(i=a).slice();for(var s={name:e,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===e){o[l]=s;break}l===u&&o.push(s)}r.tween=o}}function S(t,e,n){var i=t._id;return t.each((function(){var t=h(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return p(t,i).value[e]}}var C=n(18),j=n(103),O=n(215),A=function(t,e){var n;return("number"==typeof e?y.a:e instanceof C.e?j.a:(n=Object(C.e)(e))?(e=n,j.a):O.a)(t,e)};function D(t){return function(){this.removeAttribute(t)}}function P(t){return function(){this.removeAttributeNS(t.space,t.local)}}function N(t,e,n){var i,o,r=n+"";return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function I(t,e,n){var i,o,r=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function z(t,e,n){var i,o,r;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===i&&s===o?r:(o=s,r=e(i=a,l));this.removeAttribute(t)}}function R(t,e,n){var i,o,r;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===i&&s===o?r:(o=s,r=e(i=a,l));this.removeAttributeNS(t.space,t.local)}}function B(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function F(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function V(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&F(t,o)),n}return o._value=e,o}function W(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&B(t,o)),n}return o._value=e,o}function Z(t,e){return function(){c(this,t).delay=+e.apply(this,arguments)}}function H(t,e){return e=+e,function(){c(this,t).delay=e}}function U(t,e){return function(){h(this,t).duration=+e.apply(this,arguments)}}function Y(t,e){return e=+e,function(){h(this,t).duration=e}}function G(t,e){if("function"!=typeof e)throw new Error;return function(){h(this,t).ease=e}}var q=n(603);function K(t,e,n){var i,o,r=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?c:h;return function(){var a=r(this,t),s=a.on;s!==i&&(o=(i=s).copy()).on(e,n),a.on=o}}var Q=n(568),X=n(604),$=i.b.prototype.constructor,J=n(605);function tt(t){return function(){this.style.removeProperty(t)}}function et(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function nt(t,e,n){var i,o;function r(){var r=e.apply(this,arguments);return r!==o&&(i=(o=r)&&et(t,r,n)),i}return r._value=e,r}function it(t){return function(e){this.textContent=t.call(this,e)}}function ot(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&it(i)),e}return i._value=t,i}var rt=0;function at(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function st(t){return Object(i.b)().transition(t)}function lt(){return++rt}var ut=i.b.prototype;at.prototype=st.prototype={constructor:at,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(Q.a)(t));for(var i=this._groups,o=i.length,r=new Array(o),a=0;a<o;++a)for(var s,l,c=i[a],h=c.length,d=r[a]=new Array(h),f=0;f<h;++f)(s=c[f])&&(l=t.call(s,s.__data__,f,c))&&("__data__"in s&&(l.__data__=s.__data__),d[f]=l,u(d[f],e,n,f,d,p(s,n)));return new at(r,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(X.a)(t));for(var i=this._groups,o=i.length,r=[],a=[],s=0;s<o;++s)for(var l,c=i[s],h=c.length,d=0;d<h;++d)if(l=c[d]){for(var f,m=t.call(l,l.__data__,d,c),g=p(l,n),v=0,y=m.length;v<y;++v)(f=m[v])&&u(f,e,n,v,m,g);r.push(m),a.push(l)}return new at(r,a,e,n)},filter:function(t){"function"!=typeof t&&(t=Object(q.a)(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,a=e[o],s=a.length,l=i[o]=[],u=0;u<s;++u)(r=a[u])&&t.call(r,r.__data__,u,a)&&l.push(r);return new at(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),a=new Array(i),s=0;s<r;++s)for(var l,u=e[s],c=n[s],h=u.length,p=a[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(p[d]=l);for(;s<i;++s)a[s]=e[s];return new at(a,this._parents,this._name,this._id)},selection:function(){return new $(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=lt(),i=this._groups,o=i.length,r=0;r<o;++r)for(var a,s=i[r],l=s.length,c=0;c<l;++c)if(a=s[c]){var h=p(a,e);u(a,t,n,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new at(i,this._parents,t,n)},call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:function(t,e){var n=this._id;return arguments.length<2?p(this.node(),n).on.on(t):this.each(K(n,t,e))},attr:function(t,e){var n=Object(L.a)(t),i="transform"===n?E:A;return this.attrTween(t,"function"==typeof e?(n.local?R:z)(n,i,S(this,"attr."+t,e)):null==e?(n.local?P:D)(n):(n.local?I:N)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Object(L.a)(t);return this.tween(n,(i.local?V:W)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?M:A;return null==e?this.styleTween(t,function(t,e){var n,i,o;return function(){var r=Object(J.b)(this,t),a=(this.style.removeProperty(t),Object(J.b)(this,t));return r===a?null:r===n&&a===i?o:o=e(n=r,i=a)}}(t,i)).on("end.style."+t,tt(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,o,r;return function(){var a=Object(J.b)(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=Object(J.b)(this,t)),a===l?null:a===i&&l===o?r:(o=l,r=e(i=a,s))}}(t,i,S(this,"style."+t,e))).each(function(t,e){var n,i,o,r,a="style."+e,s="end."+a;return function(){var l=h(this,t),u=l.on,c=null==l.value[a]?r||(r=tt(e)):void 0;u===n&&o===c||(i=(n=u).copy()).on(s,o=c),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,o,r=n+"";return function(){var a=Object(J.b)(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,nt(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(S(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,ot(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,o=p(this.node(),n).tween,r=0,a=o.length;r<a;++r)if((i=o[r]).name===t)return i.value;return null}return this.each((null==e?T:k)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Z:H)(e,t)):p(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?U:Y)(e,t)):p(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(G(e,t)):p(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,o=n.size();return new Promise((function(r,a){var s={value:a},l={value:function(){0==--o&&r()}};n.each((function(){var n=h(this,i),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}))}))}};var ct={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ht(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ct.time=Object(r.b)(),ct;return n}i.b.prototype.interrupt=function(t){return this.each((function(){v(this,t)}))},i.b.prototype.transition=function(t){var e,n;t instanceof at?(e=t._id,t=t._name):(e=lt(),(n=ct).time=Object(r.b)(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s,l=i[a],c=l.length,h=0;h<c;++h)(s=l[h])&&u(s,t,e,h,l,n||ht(s,e));return new at(i,this._parents,t,e)}},function(t,e,n){var i=n(630),o=n(633);t.exports=function(t,e){var n=o(t,e);return i(n)?n:void 0}},function(t,e,n){"use strict";var i=n(16),o=n.n(i),r=n(59),a=n.n(r),s=n(60),l=n.n(s),u=n(82),c=n.n(u),h=n(83),p=n.n(h),d=n(53),f=n.n(d),m=n(3),g=n.n(m),v=n(526);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var w=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(b()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return a()(this,i),n.apply(this,arguments)}return l()(i,[{key:"getStyles",value:function(){return{base:{backgroundColor:"#FFFFFF",display:"inline-block",marginLeft:14,marginRight:0,marginTop:0,marginBottom:10,paddingLeft:6,paddingRight:6,paddingBottom:6,overflow:"hidden",position:"relative"},title:{fontFamily:v.d,color:v.a,fontSize:16,marginLeft:0,marginTop:0,marginBottom:8,fontWeight:500,backgroundColor:"#FFFFFF",borderTop:"thin solid #BBB",minHeight:"15px"}}}},{key:"getStylesInfoCard",value:function(){return{base:{backgroundColor:"#FFFFFF",display:"inline-block",marginLeft:14,marginRight:0,marginTop:0,marginBottom:10,paddingLeft:6,paddingRight:6,paddingBottom:6,overflow:"hidden",position:"relative"},title:{fontFamily:v.d,color:"#fff",fontSize:16,marginLeft:0,marginTop:0,marginBottom:8,fontWeight:500,backgroundColor:"#FFFFFF"}}}},{key:"render",value:function(){var t=this.props.infocard?this.getStylesInfoCard():this.getStyles();return g.a.createElement("div",{id:"".concat(this.props.title,"Card"),style:_({},t.base,{},this.props.style)},g.a.createElement("div",{id:"CardTitle",style:_({},t.title,{},this.props.titleStyles)},this.props.title),g.a.createElement("div",{id:"CardContentContainer",style:{display:"flex",justifyContent:this.props.center?"center":"flex-start"}},this.props.children))}}]),i}(g.a.Component);e.a=w},function(t,e){t.exports=function(t){return t}},function(t,e,n){var i=n(574),o=n(554);t.exports=function(t){return null!=t&&o(t.length)&&!i(t)}},,function(t,e,n){var i=n(618),o=n(679),r=n(532),a=n(528),s=n(689);t.exports=function(t){return"function"==typeof t?t:null==t?r:"object"==typeof t?a(t)?o(t[0],t[1]):i(t):s(t)}},function(t,e,n){var i=n(620),o=n(621),r=n(622),a=n(623),s=n(624);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(538);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var i=n(530)(Object,"create");t.exports=i},function(t,e,n){var i=n(642);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var i=n(663),o=n(670),r=n(533);t.exports=function(t){return r(t)?i(t):o(t)}},function(t,e,n){var i=n(221);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},,,,,function(t,e,n){var i;!function(o,r,a){if(o){for(var s,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)l[111+p]="f"+p;for(p=0;p<=9;++p)l[p+96]=p.toString();y.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},y.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},y.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function t(e,n){return null!==e&&e!==r&&(e===n||t(e.parentNode,n))}(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},y.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},y.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);s=null},y.init=function(){var t=y(r);for(var e in t)"_"!==e.charAt(0)&&(y[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},y.init(),o.Mousetrap=y,t.exports&&(t.exports=y),void 0===(i=function(){return y}.call(e,n,e,t))||(t.exports=i)}function d(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function f(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:u[t.which]?u[t.which]:String.fromCharCode(t.which).toLowerCase()}function m(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function g(t,e,n){return n||(n=function(){if(!s)for(var t in s={},l)t>95&&t<112||l.hasOwnProperty(t)&&(s[l[t]]=t);return s}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function v(t,e){var n,i,o,r=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),o=0;o<n.length;++o)i=n[o],h[i]&&(i=h[i]),e&&"keypress"!=e&&c[i]&&(i=c[i],r.push("shift")),m(i)&&r.push(i);return{key:i,modifiers:r,action:e=g(i,r,e)}}function y(t){var e=this;if(t=t||r,!(e instanceof y))return new y(t);e.target=t,e._callbacks={},e._directMap={};var n,i={},o=!1,a=!1,s=!1;function l(t){t=t||{};var e,n=!1;for(e in i)t[e]?n=!0:i[e]=0;n||(s=!1)}function u(t,n,o,r,a,s){var l,u,c,h,p=[],d=o.type;if(!e._callbacks[t])return[];for("keyup"==d&&m(t)&&(n=[t]),l=0;l<e._callbacks[t].length;++l)if(u=e._callbacks[t][l],(r||!u.seq||i[u.seq]==u.level)&&d==u.action&&("keypress"==d&&!o.metaKey&&!o.ctrlKey||(c=n,h=u.modifiers,c.sort().join(",")===h.sort().join(",")))){var f=!r&&u.combo==a,g=r&&u.seq==r&&u.level==s;(f||g)&&e._callbacks[t].splice(l,1),p.push(u)}return p}function c(t,n,i,o){e.stopCallback(n,n.target||n.srcElement,i,o)||!1===t(n,i)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function h(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=f(t);n&&("keyup"!=t.type||o!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):o=!1)}function p(t,e,r,a){function u(e){return function(){s=e,++i[t],clearTimeout(n),n=setTimeout(l,1e3)}}function h(e){c(r,e,t),"keyup"!==a&&(o=f(e)),setTimeout(l,10)}i[t]=0;for(var p=0;p<e.length;++p){var d=p+1===e.length?h:u(a||v(e[p+1]).action);g(e[p],d,a,t,p)}}function g(t,n,i,o,r){e._directMap[t+":"+i]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?p(t,s,n,i):(a=v(t,i),e._callbacks[a.key]=e._callbacks[a.key]||[],u(a.key,a.modifiers,{type:a.action},o,t,r),e._callbacks[a.key][o?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:o,level:r,combo:t}))}e._handleKey=function(t,e,n){var i,o=u(t,e,n),r={},h=0,p=!1;for(i=0;i<o.length;++i)o[i].seq&&(h=Math.max(h,o[i].level));for(i=0;i<o.length;++i)if(o[i].seq){if(o[i].level!=h)continue;p=!0,r[o[i].seq]=1,c(o[i].callback,n,o[i].combo,o[i].seq)}else p||c(o[i].callback,n,o[i].combo);var d="keypress"==n.type&&a;n.type!=s||m(t)||d||l(r),a=p&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var i=0;i<t.length;++i)g(t[i],e,n)},d(t,"keypress",h),d(t,"keydown",h),d(t,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return c}));var i={},o=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(i={mouseenter:"mouseover",mouseleave:"mouseout"}));function r(t,e,n){return t=a(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function a(t,e,n){return function(i){var r=o;o=i;try{t.call(this,this.__data__,e,n)}finally{o=r}}}function s(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function l(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function u(t,e,n){var o=i.hasOwnProperty(t.type)?r:a;return function(i,r,a){var s,l=this.__on,u=o(e,r,a);if(l)for(var c=0,h=l.length;c<h;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function c(t,e,n,i){var r=o;t.sourceEvent=o,o=t;try{return e.apply(n,i)}finally{o=r}}e.b=function(t,e,n){var i,o,r=s(t+""),a=r.length;if(!(arguments.length<2)){for(c=e?u:l,null==n&&(n=!1),i=0;i<a;++i)this.each(c(r[i],e,n));return this}var c=this.node().__on;if(c)for(var h,p=0,d=c.length;p<d;++p)for(i=0,h=c[p];i<a;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(51),o=n(158),r=(n(220),n(126)),a=n(101),s=n(0),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,n){var l=n(),u=l.controls,c=l.tree,h=l.treeToo,p=l.metadata,d=l.frequencies;if(null===c.nodes||!p.loaded)return null;var f=t||u.colorBy,m=Object(o.a)(f,u,c,h,p),g=Object(i.b)(c,m),v=h.loaded?Object(i.b)(h,m):void 0,y=Object(i.c)(f),_=y!==u.mutType&&y;return _&&e(Object(r.a)(_)),e({type:s.E,colorBy:f,colorScale:m,nodeColors:g,nodeColorsToo:v,version:m.version}),d.loaded&&Object(a.b)(e,n),null}}},function(t,e,n){var i=n(221);t.exports=function(t,e,n){for(var o=-1,r=t.length;++o<r;){var a=t[o],s=e(a);if(null!=s&&(void 0===l?s==s&&!i(s):n(s,l)))var l=s,u=a}return u}},function(t,e,n){var i=n(530)(n(163),"Map");t.exports=i},function(t,e,n){var i=n(634),o=n(641),r=n(643),a=n(644),s=n(645);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var i=n(528),o=n(221),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(a.test(t)||!r.test(t)||null!=e&&t in Object(e))}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},,,,,,,,function(t,e,n){(function(e){!function(e){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:g,table:g,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function i(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||x.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=p(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=p(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=p(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=p(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=p(n._paragraph).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.blockquote=p(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=v({},n),n.gfm=v({},n.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=v({},n.normal,{html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:g,paragraph:p(n.normal._paragraph).replace("hr",n.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",n.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),i.rules=n,i.lex=function(t,e){return new i(e).lex(t)},i.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},i.prototype.token=function(t,e){var i,o,r,a,s,l,u,h,p,d,f,m,g,v,b,w;for(t=t.replace(/^ +$/gm,"");t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t)){var x=this.tokens[this.tokens.length-1];t=t.substring(r[0].length),x&&"paragraph"===x.type?x.text+="\n"+r[0].trimRight():(r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?r:_(r,"\n")}))}else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(t))&&(l={type:"table",header:y(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(t=t.substring(r[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=y(l.cells[f],l.header.length);this.tokens.push(l)}else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),u={type:"list_start",ordered:v=(a=r[2]).length>1,start:v?+a:"",loose:!1},this.tokens.push(u),h=[],i=!1,g=(r=r[0].match(this.rules.item)).length,f=0;f<g;f++)d=(l=r[f]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),f!==g-1&&(s=n.bullet.exec(r[f+1])[0],(a.length>1?1===s.length:s.length>1||this.options.smartLists&&s!==a)&&(t=r.slice(f+1).join("\n")+t,f=g-1)),o=i||/\n\n(?!\s*$)/.test(l),f!==g-1&&(i="\n"===l.charAt(l.length-1),o||(o=i)),o&&(u.loose=!0),w=void 0,(b=/^\[[ xX]\] /.test(l))&&(w=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:b,checked:w,loose:o},h.push(p),this.tokens.push(p),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(u.loose)for(g=h.length,f=0;f<g;f++)h[f].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):c(r[0]):r[0]});else if(e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),m=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[m]||(this.tokens.links[m]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(t))&&(l={type:"table",header:y(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(t=t.substring(r[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=y(l.cells[f].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2].charAt(0)?1:2,text:r[1]});else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var o={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:g,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:g,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function r(t,e){if(this.options=e||x.defaults,this.links=t,this.rules=o.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=o.pedantic:this.options.gfm&&(this.options.breaks?this.rules=o.breaks:this.rules=o.gfm)}function a(t){this.options=t||x.defaults}function s(){}function l(t){this.tokens=[],this.token=null,this.options=t||x.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new u}function u(){this.seen={}}function c(t,e){if(e){if(c.escapeTest.test(t))return t.replace(c.escapeReplace,(function(t){return c.replacements[t]}))}else if(c.escapeTestNoEncode.test(t))return t.replace(c.escapeReplaceNoEncode,(function(t){return c.replacements[t]}));return t}function h(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}function p(t,e){return t=t.source||t,e=e||"",{replace:function(e,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,n),this},getRegex:function(){return new RegExp(t,e)}}}function d(t,e,n){if(t){try{var i=decodeURIComponent(h(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!m.test(n)&&(n=function(t,e){f[" "+t]||(/^[^:]+:\/*[^/]*$/.test(t)?f[" "+t]=t+"/":f[" "+t]=_(t,"/",!0));return t=f[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}o._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",o.em=p(o.em).replace(/punctuation/g,o._punctuation).getRegex(),o._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,o._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,o._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,o.autolink=p(o.autolink).replace("scheme",o._scheme).replace("email",o._email).getRegex(),o._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,o.tag=p(o.tag).replace("comment",n._comment).replace("attribute",o._attribute).getRegex(),o._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,o._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,o._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,o.link=p(o.link).replace("label",o._label).replace("href",o._href).replace("title",o._title).getRegex(),o.reflink=p(o.reflink).replace("label",o._label).getRegex(),o.normal=v({},o),o.pedantic=v({},o.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",o._label).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",o._label).getRegex()}),o.gfm=v({},o.normal,{escape:p(o.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),o.gfm.url=p(o.gfm.url,"i").replace("email",o.gfm._extended_email).getRegex(),o.breaks=v({},o.gfm,{br:p(o.br).replace("{2,}","*").getRegex(),text:p(o.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),r.rules=o,r.output=function(t,e,n){return new r(e,n).output(t)},r.prototype.output=function(t){for(var e,n,i,o,a,s,l="";t;)if(a=this.rules.escape.exec(t))t=t.substring(a[0].length),l+=c(a[1]);else if(a=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(a[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(a[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.inRawBlock=!1),t=t.substring(a[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):c(a[0]):a[0];else if(a=this.rules.link.exec(t)){var u=b(a[2],"()");if(u>-1){var h=4+a[1].length+u;a[2]=a[2].substring(0,u),a[0]=a[0].substring(0,h).trim(),a[3]=""}t=t.substring(a[0].length),this.inLink=!0,i=a[2],this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i))?(i=e[1],o=e[3]):o="":o=a[3]?a[3].slice(1,-1):"",i=i.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(a,{href:r.escapes(i),title:r.escapes(o)}),this.inLink=!1}else if((a=this.rules.reflink.exec(t))||(a=this.rules.nolink.exec(t))){if(t=t.substring(a[0].length),e=(a[2]||a[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){l+=a[0].charAt(0),t=a[0].substring(1)+t;continue}this.inLink=!0,l+=this.outputLink(a,e),this.inLink=!1}else if(a=this.rules.strong.exec(t))t=t.substring(a[0].length),l+=this.renderer.strong(this.output(a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.em.exec(t))t=t.substring(a[0].length),l+=this.renderer.em(this.output(a[6]||a[5]||a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.code.exec(t))t=t.substring(a[0].length),l+=this.renderer.codespan(c(a[2].trim(),!0));else if(a=this.rules.br.exec(t))t=t.substring(a[0].length),l+=this.renderer.br();else if(a=this.rules.del.exec(t))t=t.substring(a[0].length),l+=this.renderer.del(this.output(a[1]));else if(a=this.rules.autolink.exec(t))t=t.substring(a[0].length),i="@"===a[2]?"mailto:"+(n=c(this.mangle(a[1]))):n=c(a[1]),l+=this.renderer.link(i,null,n);else if(this.inLink||!(a=this.rules.url.exec(t))){if(a=this.rules.text.exec(t))t=t.substring(a[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):c(a[0]):a[0]):l+=this.renderer.text(c(this.smartypants(a[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===a[2])i="mailto:"+(n=c(a[0]));else{do{s=a[0],a[0]=this.rules._backpedal.exec(a[0])[0]}while(s!==a[0]);n=c(a[0]),i="www."===a[1]?"http://"+n:n}t=t.substring(a[0].length),l+=this.renderer.link(i,null,n)}return l},r.escapes=function(t){return t?t.replace(r.rules._escapes,"$1"):t},r.prototype.outputLink=function(t,e){var n=e.href,i=e.title?c(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,i,this.output(t[1])):this.renderer.image(n,i,c(t[1]))},r.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},r.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",i=t.length,o=0;o<i;o++)e=t.charCodeAt(o),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},a.prototype.code=function(t,e,n){var i=(e||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(t,i);null!=o&&o!==t&&(n=!0,t=o)}return i?'<pre><code class="'+this.options.langPrefix+c(i,!0)+'">'+(n?t:c(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:c(t,!0))+"</code></pre>"},a.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},a.prototype.html=function(t){return t},a.prototype.heading=function(t,e,n,i){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+i.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(t,e,n){var i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+i+">\n"},a.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},a.prototype.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},a.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},a.prototype.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},a.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},a.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},a.prototype.strong=function(t){return"<strong>"+t+"</strong>"},a.prototype.em=function(t){return"<em>"+t+"</em>"},a.prototype.codespan=function(t){return"<code>"+t+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(t){return"<del>"+t+"</del>"},a.prototype.link=function(t,e,n){if(null===(t=d(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<a href="'+c(t)+'"';return e&&(i+=' title="'+e+'"'),i+=">"+n+"</a>"},a.prototype.image=function(t,e,n){if(null===(t=d(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},a.prototype.text=function(t){return t},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(t){return t},s.prototype.link=s.prototype.image=function(t,e,n){return""+n},s.prototype.br=function(){return""},l.parse=function(t,e){return new l(e).parse(t)},l.prototype.parse=function(t){this.inline=new r(t.links,this.options),this.inlineText=new r(t.links,v({},this.options,{renderer:new s})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},l.prototype.next=function(){return this.token=this.tokens.pop(),this.token},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,h(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,i,o="",r="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(o+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",i=0;i<e.length;i++)n+=this.renderer.tablecell(this.inline.output(e[i]),{header:!1,align:this.token.align[i]});r+=this.renderer.tablerow(n)}return this.renderer.table(o,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var a=this.token.ordered,s=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,a,s);case"list_item_start":r="";var l=this.token.loose,u=this.token.checked,c=this.token.task;for(this.token.task&&(r+=this.renderer.checkbox(u));"list_item_end"!==this.next().type;)r+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(r,c,u);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var p='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(p);console.log(p)}},u.prototype.slug=function(t){var e=t.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){var n=e;do{this.seen[n]++,e=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e},c.escapeTest=/[&<>"']/,c.escapeReplace=/[&<>"']/g,c.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,c.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var f={},m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function g(){}function v(t){for(var e,n,i=1;i<arguments.length;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function y(t,e){var n=t.replace(/\|/g,(function(t,e,n){for(var i=!1,o=e;--o>=0&&"\\"===n[o];)i=!i;return i?"|":" |"})).split(/ \|/),i=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function _(t,e,n){if(0===t.length)return"";for(var i=0;i<t.length;){var o=t.charAt(t.length-i-1);if(o!==e||n){if(o===e||!n)break;i++}else i++}return t.substr(0,t.length-i)}function b(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=0,i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&--n<0)return i;return-1}function w(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function x(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null),w(e=v({},x.defaults,e||{}));var o,r,a=e.highlight,s=0;try{o=i.lex(t,e)}catch(t){return n(t)}r=o.length;var u=function(t){if(t)return e.highlight=a,n(t);var i;try{i=l.parse(o,e)}catch(e){t=e}return e.highlight=a,t?n(t):n(null,i)};if(!a||a.length<3)return u();if(delete e.highlight,!r)return u();for(;s<o.length;s++)!function(t){"code"!==t.type?--r||u():a(t.text,t.lang,(function(e,n){return e?u(e):null==n||n===t.text?--r||u():(t.text=n,t.escaped=!0,void(--r||u()))}))}(o[s])}else try{return e&&(e=v({},x.defaults,e)),w(e),l.parse(i.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||x.defaults).silent)return"<p>An error occurred:</p><pre>"+c(t.message+"",!0)+"</pre>";throw t}}g.exec=g,x.options=x.setOptions=function(t){return v(x.defaults,t),x},x.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new a,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},x.defaults=x.getDefaults(),x.Parser=l,x.parser=l.parse,x.Renderer=a,x.TextRenderer=s,x.Lexer=i,x.lexer=i.lex,x.InlineLexer=r,x.inlineLexer=r.output,x.Slugger=u,x.parse=x,t.exports=x}(this||"undefined"!=typeof window&&window)}).call(this,n(54))},function(t,e,n){t.exports=function(){"use strict";var t=Object.hasOwnProperty,e=Object.setPrototypeOf,n=Object.isFrozen,i=Object.keys,o=Object.freeze,r=Object.seal,a="undefined"!=typeof Reflect&&Reflect,s=a.apply,l=a.construct;s||(s=function(t,e,n){return t.apply(e,n)}),o||(o=function(t){return t}),r||(r=function(t){return t}),l||(l=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e))))});var u=M(Array.prototype.forEach),c=M(Array.prototype.indexOf),h=M(Array.prototype.join),p=M(Array.prototype.pop),d=M(Array.prototype.push),f=M(Array.prototype.slice),m=M(String.prototype.toLowerCase),g=M(String.prototype.match),v=M(String.prototype.replace),y=M(String.prototype.indexOf),_=M(String.prototype.trim),b=M(RegExp.prototype.test),w=E(RegExp),x=E(TypeError);function M(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return s(t,e,i)}}function E(t){return function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return l(t,n)}}function L(t,i){e&&e(t,null);for(var o=i.length;o--;){var r=i[o];if("string"==typeof r){var a=m(r);a!==r&&(n(i)||(i[o]=a),r=a)}t[r]=!0}return t}function T(e){var n={},i=void 0;for(i in e)s(t,e,[i])&&(n[i]=e[i]);return n}var k=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),C=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),j=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),O=o(["#text"]),A=o(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","minlength","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),D=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),N=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),I=r(/\{\{[\s\S]*|[\s\S]*\}\}/gm),z=r(/<%[\s\S]*|[\s\S]*%>/gm),R=r(/^data-[\-\w.\u00B7-\uFFFF]/),B=r(/^aria-[\-\w]+$/),F=r(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),V=r(/^(?:\w+script|data):/i),W=r(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function H(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var U=function(){return"undefined"==typeof window?null:window},Y=function(t,e){if("object"!==(void 0===t?"undefined":Z(t))||"function"!=typeof t.createPolicy)return null;var n=null;e.currentScript&&e.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=e.currentScript.getAttribute("data-tt-policy-suffix"));var i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U(),n=function(e){return t(e)};if(n.version="2.0.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,a=!1,s=!1,l=e.document,M=e.DocumentFragment,E=e.HTMLTemplateElement,G=e.Node,q=e.NodeFilter,K=e.NamedNodeMap,Q=void 0===K?e.NamedNodeMap||e.MozNamedAttrMap:K,X=e.Text,$=e.Comment,J=e.DOMParser,tt=e.trustedTypes;if("function"==typeof E){var et=l.createElement("template");et.content&&et.content.ownerDocument&&(l=et.content.ownerDocument)}var nt=Y(tt,r),it=nt?nt.createHTML(""):"",ot=l,rt=ot.implementation,at=ot.createNodeIterator,st=ot.getElementsByTagName,lt=ot.createDocumentFragment,ut=r.importNode,ct={};n.isSupported=rt&&void 0!==rt.createHTMLDocument&&9!==l.documentMode;var ht=I,pt=z,dt=R,ft=B,mt=V,gt=W,vt=F,yt=null,_t=L({},[].concat(H(k),H(S),H(C),H(j),H(O))),bt=null,wt=L({},[].concat(H(A),H(D),H(P),H(N))),xt=null,Mt=null,Et=!0,Lt=!0,Tt=!1,kt=!1,St=!1,Ct=!1,jt=!1,Ot=!1,At=!1,Dt=!1,Pt=!1,Nt=!1,It=!0,zt=!0,Rt=!1,Bt={},Ft=L({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Vt=L({},["audio","video","img","source","image"]),Wt=null,Zt=L({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ht=null,Ut=l.createElement("form"),Yt=function(t){Ht&&Ht===t||(t&&"object"===(void 0===t?"undefined":Z(t))||(t={}),yt="ALLOWED_TAGS"in t?L({},t.ALLOWED_TAGS):_t,bt="ALLOWED_ATTR"in t?L({},t.ALLOWED_ATTR):wt,Wt="ADD_URI_SAFE_ATTR"in t?L(T(Zt),t.ADD_URI_SAFE_ATTR):Zt,xt="FORBID_TAGS"in t?L({},t.FORBID_TAGS):{},Mt="FORBID_ATTR"in t?L({},t.FORBID_ATTR):{},Bt="USE_PROFILES"in t&&t.USE_PROFILES,Et=!1!==t.ALLOW_ARIA_ATTR,Lt=!1!==t.ALLOW_DATA_ATTR,Tt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,kt=t.SAFE_FOR_JQUERY||!1,St=t.SAFE_FOR_TEMPLATES||!1,Ct=t.WHOLE_DOCUMENT||!1,At=t.RETURN_DOM||!1,Dt=t.RETURN_DOM_FRAGMENT||!1,Pt=t.RETURN_DOM_IMPORT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,Ot=t.FORCE_BODY||!1,It=!1!==t.SANITIZE_DOM,zt=!1!==t.KEEP_CONTENT,Rt=t.IN_PLACE||!1,vt=t.ALLOWED_URI_REGEXP||vt,St&&(Lt=!1),Dt&&(At=!0),Bt&&(yt=L({},[].concat(H(O))),bt=[],!0===Bt.html&&(L(yt,k),L(bt,A)),!0===Bt.svg&&(L(yt,S),L(bt,D),L(bt,N)),!0===Bt.svgFilters&&(L(yt,C),L(bt,D),L(bt,N)),!0===Bt.mathMl&&(L(yt,j),L(bt,P),L(bt,N))),t.ADD_TAGS&&(yt===_t&&(yt=T(yt)),L(yt,t.ADD_TAGS)),t.ADD_ATTR&&(bt===wt&&(bt=T(bt)),L(bt,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&L(Wt,t.ADD_URI_SAFE_ATTR),zt&&(yt["#text"]=!0),Ct&&L(yt,["html","head","body"]),yt.table&&(L(yt,["tbody"]),delete xt.tbody),o&&o(t),Ht=t)},Gt=function(t){d(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=it}},qt=function(t,e){try{d(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){d(n.removed,{attribute:null,from:e})}e.removeAttribute(t)},Kt=function(t){var e=void 0,n=void 0;if(Ot)t="<remove></remove>"+t;else{var i=g(t,/^[\s]+/);n=i&&i[0]}var o=nt?nt.createHTML(t):t;if(a)try{e=(new J).parseFromString(o,"text/html")}catch(t){}if(s&&L(xt,["title"]),!e||!e.documentElement){var r=(e=rt.createHTMLDocument("")).body;r.parentNode.removeChild(r.parentNode.firstElementChild),r.outerHTML=o}return t&&n&&e.body.insertBefore(l.createTextNode(n),e.body.childNodes[0]||null),st.call(e,Ct?"html":"body")[0]};n.isSupported&&(function(){try{Kt('<svg><p><textarea><img src="</textarea><img src=x abc=1//">').querySelector("svg img")&&(a=!0)}catch(t){}}(),function(){try{var t=Kt("<x/><title>&lt;/title&gt;&lt;img&gt;");b(/<\/title/,t.querySelector("title").innerHTML)&&(s=!0)}catch(t){}}());var Qt=function(t){return at.call(t.ownerDocument||t,t,q.SHOW_ELEMENT|q.SHOW_COMMENT|q.SHOW_TEXT,(function(){return q.FILTER_ACCEPT}),!1)},Xt=function(t){return!(t instanceof X||t instanceof $||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof Q&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute&&"string"==typeof t.namespaceURI)},$t=function(t){return"object"===(void 0===G?"undefined":Z(G))?t instanceof G:t&&"object"===(void 0===t?"undefined":Z(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Jt=function(t,e,i){ct[t]&&u(ct[t],(function(t){t.call(n,e,i,Ht)}))},te=function(t){var e=void 0;if(Jt("beforeSanitizeElements",t,null),Xt(t))return Gt(t),!0;var i=m(t.nodeName);if(Jt("uponSanitizeElement",t,{tagName:i,allowedTags:yt}),("svg"===i||"math"===i)&&0!==t.querySelectorAll("p, br").length)return Gt(t),!0;if(!yt[i]||xt[i]){if(zt&&!Ft[i]&&"function"==typeof t.insertAdjacentHTML)try{var o=t.innerHTML;t.insertAdjacentHTML("AfterEnd",nt?nt.createHTML(o):o)}catch(t){}return Gt(t),!0}return"noscript"===i&&b(/<\/noscript/i,t.innerHTML)||"noembed"===i&&b(/<\/noembed/i,t.innerHTML)?(Gt(t),!0):(!kt||t.firstElementChild||t.content&&t.content.firstElementChild||!b(/</g,t.textContent)||(d(n.removed,{element:t.cloneNode()}),t.innerHTML?t.innerHTML=v(t.innerHTML,/</g,"&lt;"):t.innerHTML=v(t.textContent,/</g,"&lt;")),St&&3===t.nodeType&&(e=t.textContent,e=v(e,ht," "),e=v(e,pt," "),t.textContent!==e&&(d(n.removed,{element:t.cloneNode()}),t.textContent=e)),Jt("afterSanitizeElements",t,null),!1)},ee=function(t,e,n){if(It&&("id"===e||"name"===e)&&(n in l||n in Ut))return!1;if(Lt&&b(dt,e));else if(Et&&b(ft,e));else{if(!bt[e]||Mt[e])return!1;if(Wt[e]);else if(b(vt,v(n,gt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==y(n,"data:")||!Vt[t])if(Tt&&!b(mt,v(n,gt,"")));else if(n)return!1}return!0},ne=function(t){var e=void 0,o=void 0,r=void 0,a=void 0,s=void 0;Jt("beforeSanitizeAttributes",t,null);var l=t.attributes;if(l){var u={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bt};for(s=l.length;s--;){var d=e=l[s],g=d.name,y=d.namespaceURI;if(o=_(e.value),r=m(g),u.attrName=r,u.attrValue=o,u.keepAttr=!0,u.forceKeepAttr=void 0,Jt("uponSanitizeAttribute",t,u),o=u.attrValue,!u.forceKeepAttr){if("name"===r&&"IMG"===t.nodeName&&l.id)a=l.id,l=f(l,[]),qt("id",t),qt(g,t),c(l,a)>s&&t.setAttribute("id",a.value);else{if("INPUT"===t.nodeName&&"type"===r&&"file"===o&&u.keepAttr&&(bt[r]||!Mt[r]))continue;"id"===g&&t.setAttribute(g,""),qt(g,t)}if(u.keepAttr)if(kt&&b(/\/>/i,o))qt(g,t);else if(b(/svg|math/i,t.namespaceURI)&&b(w("</("+h(i(Ft),"|")+")","i"),o))qt(g,t);else{St&&(o=v(o,ht," "),o=v(o,pt," "));var x=t.nodeName.toLowerCase();if(ee(x,r,o))try{y?t.setAttributeNS(y,g,o):t.setAttribute(g,o),p(n.removed)}catch(t){}}}}Jt("afterSanitizeAttributes",t,null)}},ie=function t(e){var n=void 0,i=Qt(e);for(Jt("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)Jt("uponSanitizeShadowNode",n,null),te(n)||(n.content instanceof M&&t(n.content),ne(n));Jt("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t,i){var o=void 0,a=void 0,s=void 0,l=void 0,u=void 0;if(t||(t="\x3c!--\x3e"),"string"!=typeof t&&!$t(t)){if("function"!=typeof t.toString)throw x("toString is not a function");if("string"!=typeof(t=t.toString()))throw x("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Z(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof t)return e.toStaticHTML(t);if($t(t))return e.toStaticHTML(t.outerHTML)}return t}if(jt||Yt(i),n.removed=[],"string"==typeof t&&(Rt=!1),Rt);else if(t instanceof G)1===(a=(o=Kt("\x3c!--\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?o=a:o.appendChild(a);else{if(!At&&!St&&!Ct&&Nt&&-1===t.indexOf("<"))return nt?nt.createHTML(t):t;if(!(o=Kt(t)))return At?null:it}o&&Ot&&Gt(o.firstChild);for(var c=Qt(Rt?t:o);s=c.nextNode();)3===s.nodeType&&s===l||te(s)||(s.content instanceof M&&ie(s.content),ne(s),l=s);if(l=null,Rt)return t;if(At){if(Dt)for(u=lt.call(o.ownerDocument);o.firstChild;)u.appendChild(o.firstChild);else u=o;return Pt&&(u=ut.call(r,u,!0)),u}var h=Ct?o.outerHTML:o.innerHTML;return St&&(h=v(h,ht," "),h=v(h,pt," ")),nt&&Nt?nt.createHTML(h):h},n.setConfig=function(t){Yt(t),jt=!0},n.clearConfig=function(){Ht=null,jt=!1},n.isValidAttribute=function(t,e,n){Ht||Yt({});var i=m(t),o=m(e);return ee(i,o,n)},n.addHook=function(t,e){"function"==typeof e&&(ct[t]=ct[t]||[],d(ct[t],e))},n.removeHook=function(t){ct[t]&&p(ct[t])},n.removeHooks=function(t){ct[t]&&(ct[t]=[])},n.removeAllHooks=function(){ct={}},n}()}()},function(t,e,n){"use strict";var i=n(567);e.a=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.a.hasOwnProperty(e)?{space:i.a[e],local:t}:t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));var i="http://www.w3.org/1999/xhtml";e.a={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(t,e,n){"use strict";function i(){}e.a=function(t){return null==t?i:function(){return this.querySelector(t)}}},function(t,e,n){"use strict";e.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){var i=n(550),o=n(615),r=n(532);t.exports=function(t){return t&&t.length?i(t,r,o):void 0}},function(t,e){t.exports=function(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}},function(t,e,n){var i=n(536),o=n(625),r=n(626),a=n(627),s=n(628),l=n(629);function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=o,u.prototype.delete=r,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,t.exports=u},function(t,e,n){var i=n(222),o=n(125);t.exports=function(t){if(!o(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var i=n(646),o=n(223);t.exports=function t(e,n,r,a,s){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:i(e,n,r,a,t,s))}},function(t,e,n){var i=n(647),o=n(650),r=n(651);t.exports=function(t,e,n,a,s,l){var u=1&n,c=t.length,h=e.length;if(c!=h&&!(u&&h>c))return!1;var p=l.get(t);if(p&&l.get(e))return p==e;var d=-1,f=!0,m=2&n?new i:void 0;for(l.set(t,e),l.set(e,t);++d<c;){var g=t[d],v=e[d];if(a)var y=u?a(v,g,d,e,t,l):a(g,v,d,t,e,l);if(void 0!==y){if(y)continue;f=!1;break}if(m){if(!o(e,(function(t,e){if(!r(m,e)&&(g===t||s(g,t,n,a,l)))return m.push(e)}))){f=!1;break}}else if(g!==v&&!s(g,v,n,a,l)){f=!1;break}}return l.delete(t),l.delete(e),f}},function(t,e,n){var i=n(665),o=n(223),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e,n){(function(t){var i=n(163),o=n(666),r=e&&!e.nodeType&&e,a=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===r?i.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;t.exports=l}).call(this,n(225)(t))},function(t,e,n){var i=n(667),o=n(668),r=n(669),a=r&&r.isTypedArray,s=a?o(a):i;t.exports=s},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(125);t.exports=function(t){return t==t&&!i(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var i=n(585),o=n(542);t.exports=function(t,e){for(var n=0,r=(e=i(e,t)).length;null!=t&&n<r;)t=t[o(e[n++])];return n&&n==r?t:void 0}},function(t,e,n){var i=n(528),o=n(555),r=n(681),a=n(684);t.exports=function(t,e){return i(t)?t:o(t,e)?[t]:r(a(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var i=n(588);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var i=n(228);t.exports=function(t){return t?(t=i(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){"use strict";function i(t){return t[0]}function o(t){return t[1]}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}))},function(t,e,n){"use strict";function i(t){this._context=t}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},e.a=function(t){return new i(t)}},function(t,e,n){var i=n(538),o=n(533),r=n(553),a=n(125);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?o(n)&&r(e,n.length):"string"==s&&e in n)&&i(n[e],t)}},,function(t,e,n){var i=n(594),o=n(538),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];r.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e,n){var i=n(595);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var i=n(530),o=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},,,,,,function(t,e){t.exports={version:"2.12.0"}},function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return v}));var i,o,r=0,a=0,s=0,l=0,u=0,c=0,h="object"==typeof performance&&performance.now?performance:Date,p="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d(){return u||(p(f),u=h.now()+c)}function f(){u=0}function m(){this._call=this._time=this._next=null}function g(t,e,n){var i=new m;return i.restart(t,e,n),i}function v(){d(),++r;for(var t,e=i;e;)(t=u-e._time)>=0&&e._call.call(null,t),e=e._next;--r}function y(){u=(l=h.now())+c,r=a=0;try{v()}finally{r=0,function(){var t,e,n=i,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:i=e);o=t,b(r)}(),u=0}}function _(){var t=h.now(),e=t-l;e>1e3&&(c-=e,l=t)}function b(t){r||(a&&(a=clearTimeout(a)),t-u>24?(t<1/0&&(a=setTimeout(y,t-h.now()-c)),s&&(s=clearInterval(s))):(s||(l=h.now(),s=setInterval(_,1e3)),r=1,p(y)))}m.prototype=g.prototype={constructor:m,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?d():+n)+(null==e?0:+e),this._next||o===this||(o?o._next=this:i=this,o=this),this._call=t,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}}},function(t,e,n){"use strict";e.a=function(t){return function(){return this.matches(t)}}},function(t,e,n){"use strict";function i(){return[]}e.a=function(t){return null==t?i:function(){return this.querySelectorAll(t)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s}));var i=n(569);function o(t){return function(){this.style.removeProperty(t)}}function r(t,e,n){return function(){this.style.setProperty(t,e,n)}}function a(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function s(t,e){return t.style.getPropertyValue(e)||Object(i.a)(t).getComputedStyle(t,null).getPropertyValue(e)}e.a=function(t,e,n){return arguments.length>1?this.each((null==e?o:"function"==typeof e?a:r)(t,e,null==n?"":n)):s(this.node(),t)}},,,,,function(t,e,n){t.exports=n.p+"f66966ba89ed36ecbe0e4e0688cb1ef9.png"},function(t,e,n){t.exports=n.p+"4dc6198ec0d867620d300be40d112a10.jpg"},function(t,e,n){
/* @preserve
 * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e=Object.freeze;function n(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t}Object.freeze=function(t){return t};var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function a(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function s(t,e,n){var i,o,r,a;return a=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}}function l(t,e,n){var i=e[1],o=e[0],r=i-o;return t===i&&n?t:((t-o)%r+r)%r+o}function u(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function p(t){return h(t).split(/\s+/)}function d(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var M=window.requestAnimationFrame||b("RequestAnimationFrame")||x,E=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function T(t,e,n){if(!n||M!==x)return M.call(window,o(t,e));t.call(e)}function k(t){t&&E.call(window,t)}var S=(Object.freeze||Object)({freeze:e,extend:n,create:i,bind:o,lastId:r,stamp:a,throttle:s,wrapNum:l,falseFn:u,formatNum:c,trim:h,splitWords:p,setOptions:d,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:M,cancelFn:E,requestAnimFrame:T,cancelAnimFrame:k});function C(){}C.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,r=i(o);for(var a in r.constructor=e,e.prototype=r,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=n(i(r.options),t.options)),n(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},C.include=function(t){return n(this.prototype,t),this},C.mergeOptions=function(t){return n(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var j={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var o=0,r=(t=p(t)).length;o<r;o++)this._on(t[o],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var o=0,r=(t=p(t)).length;o<r;o++)this._off(t[o],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},r=i,a=0,s=r.length;a<s;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(o)},_off:function(t,e,n){var i,o,r;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===e)return a.fn=u,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}else{for(o=0,r=i.length;o<r;o++)i[o].fn=u;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,s=r.length;a<s;a++){var l=r[a];l.fn.call(l.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var r=o((function(){this.off(t,e,n).off(t,r,n)}),this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};j.addEventListener=j.on,j.removeEventListener=j.clearAllEventListeners=j.off,j.addOneTimeEventListener=j.once,j.fireEvent=j.fire,j.hasEventListeners=j.listens;var O=C.extend(j);function A(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var D=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function P(t,e,n){return t instanceof A?t:v(t)?new A(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new A(t.x,t.y):new A(t,e,n)}function N(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function I(t,e){return!t||t instanceof N?t:new N(t,e)}function z(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function R(t,e){return t instanceof z?t:new z(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof B?t:v(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(t){return this.clone()._add(P(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(P(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new A(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new A(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(t){var e=(t=P(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=P(t)).x===this.x&&t.y===this.y},contains:function(t){return t=P(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},N.prototype={extend:function(t){return t=P(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new A(this.min.x,this.max.y)},getTopRight:function(){return new A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof A?P(t):I(t))instanceof N?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=I(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a},overlaps:function(t){t=I(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,a=o.y>e.y&&i.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},z.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof z))return t?this.extend(F(t)||R(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new z(new B(e.lat-i,e.lng-o),new B(n.lat+i,n.lng+o))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?F(t):R(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof z?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=R(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a},overlaps:function(t){t=R(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,a=o.lng>e.lng&&i.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=R(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return Z.distance(this,F(t))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return R([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var V,W={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new N(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast();return new z(new B(r.lat-i,r.lng-o),new B(a.lat-i,a.lng-o))}},Z=n({},W,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=r*r+Math.cos(i)*Math.cos(o)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),H={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new A(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(V=6378137*Math.PI,new N([-V,-V],[V,V]))};function U(t,e,n,i){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function Y(t,e,n,i){return new U(t,e,n,i)}U.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new A((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var G=n({},Z,{code:"EPSG:3857",projection:H,transformation:function(){var t=.5/(Math.PI*H.R);return Y(t,.5,-t,.5)}()}),q=n({},G,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var n,i,o,r,a,s,l="";for(n=0,o=t.length;n<o;n++){for(i=0,r=(a=t[n]).length;i<r;i++)l+=(i?"L":"M")+(s=a[i]).x+" "+s.y;l+=e?St?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,$="ActiveXObject"in window,J=$&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=jt("webkit"),nt=jt("android"),it=jt("android 2")||jt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=nt&&jt("Google")&&ot<537&&!("AudioNode"in window),at=!!window.opera,st=jt("chrome"),lt=jt("gecko")&&!et&&!at&&!$,ut=!st&&jt("safari"),ct=jt("phantom"),ht="OTransition"in X,pt=0===navigator.platform.indexOf("Win"),dt=$&&"transition"in X,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,mt="MozPerspective"in X,gt=!window.L_DISABLE_3D&&(dt||ft||mt)&&!ht&&!ct,vt="undefined"!=typeof orientation||jt("mobile"),yt=vt&&et,_t=vt&&ft,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(et||!window.PointerEvent&&!bt),xt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Mt=vt&&at,Et=vt&&lt,Lt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(t){}return t},kt=!!document.createElement("canvas").getContext,St=!(!document.createElementNS||!K("svg").createSVGRect),Ct=!St&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function jt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ot=(Object.freeze||Object)({ie:$,ielt9:J,edge:tt,webkit:et,android:nt,android23:it,androidStock:rt,opera:at,chrome:st,gecko:lt,safari:ut,phantom:ct,opera12:ht,win:pt,ie3d:dt,webkit3d:ft,gecko3d:mt,any3d:gt,mobile:vt,mobileWebkit:yt,mobileWebkit3d:_t,msPointer:bt,pointer:wt,touch:xt,mobileOpera:Mt,mobileGecko:Et,retina:Lt,passiveEvents:Tt,canvas:kt,svg:St,vml:Ct}),At=bt?"MSPointerDown":"pointerdown",Dt=bt?"MSPointerMove":"pointermove",Pt=bt?"MSPointerUp":"pointerup",Nt=bt?"MSPointerCancel":"pointercancel",It=["INPUT","SELECT","OPTION"],zt={},Rt=!1,Bt=0;function Ft(t,e,n,i){return"touchstart"===e?function(t,e,n){var i=o((function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(It.indexOf(t.target.tagName)<0))return;ze(t)}Ht(t,e)}));t["_leaflet_touchstart"+n]=i,t.addEventListener(At,i,!1),Rt||(document.documentElement.addEventListener(At,Vt,!0),document.documentElement.addEventListener(Dt,Wt,!0),document.documentElement.addEventListener(Pt,Zt,!0),document.documentElement.addEventListener(Nt,Zt,!0),Rt=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Ht(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Dt,i,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var i=function(t){Ht(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Pt,i,!1),t.addEventListener(Nt,i,!1)}(t,n,i),this}function Vt(t){zt[t.pointerId]=t,Bt++}function Wt(t){zt[t.pointerId]&&(zt[t.pointerId]=t)}function Zt(t){delete zt[t.pointerId],Bt--}function Ht(t,e){for(var n in t.touches=[],zt)t.touches.push(zt[n]);t.changedTouches=[t],e(t)}var Ut=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Yt=bt?"MSPointerUp":wt?"pointerup":"touchend",Gt="_leaflet_";function qt(t,e,n){var i,o,r=!1;function a(t){var e;if(wt){if(!tt||"mouse"===t.pointerType)return;e=Bt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(i||n);o=t.touches?t.touches[0]:t,r=a>0&&a<=250,i=n}}function s(t){if(r&&!o.cancelBubble){if(wt){if(!tt||"mouse"===t.pointerType)return;var n,a,s={};for(a in o)n=o[a],s[a]=n&&n.bind?n.bind(o):n;o=s}o.type="dblclick",o.button=0,e(o),i=null}}return t[Gt+Ut+n]=a,t[Gt+Yt+n]=s,t[Gt+"dblclick"+n]=e,t.addEventListener(Ut,a,!!Tt&&{passive:!1}),t.addEventListener(Yt,s,!!Tt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Kt(t,e){var n=t[Gt+Ut+e],i=t[Gt+Yt+e],o=t[Gt+"dblclick"+e];return t.removeEventListener(Ut,n,!!Tt&&{passive:!1}),t.removeEventListener(Yt,i,!!Tt&&{passive:!1}),tt||t.removeEventListener("dblclick",o,!1),this}var Qt,Xt,$t,Jt,te,ee=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ie="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function oe(t){return"string"==typeof t?document.getElementById(t):t}function re(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ae(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function le(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ue(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=me(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function pe(t,e){if(void 0!==t.classList)for(var n=p(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!he(t,e)){var r=me(t);fe(t,(r?r+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):fe(t,h((" "+me(t)+" ").replace(" "+e+" "," ")))}function fe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function me(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ge(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ye(t,e,n){var i=e||new A(0,0);t.style[ee]=(dt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function _e(t,e){t._leaflet_pos=e,gt?ye(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function be(t){return t._leaflet_pos||new A(0,0)}if("onselectstart"in document)Qt=function(){Ce(window,"selectstart",ze)},Xt=function(){Oe(window,"selectstart",ze)};else{var we=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qt=function(){if(we){var t=document.documentElement.style;$t=t[we],t[we]="none"}},Xt=function(){we&&(document.documentElement.style[we]=$t,$t=void 0)}}function xe(){Ce(window,"dragstart",ze)}function Me(){Oe(window,"dragstart",ze)}function Ee(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Le(),Jt=t,te=t.style.outline,t.style.outline="none",Ce(window,"keydown",Le))}function Le(){Jt&&(Jt.style.outline=te,Jt=void 0,te=void 0,Oe(window,"keydown",Le))}function Te(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function ke(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Se=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:ie,get:oe,getStyle:re,create:ae,remove:se,empty:le,toFront:ue,toBack:ce,hasClass:he,addClass:pe,removeClass:de,setClass:fe,getClass:me,setOpacity:ge,testProp:ve,setTransform:ye,setPosition:_e,getPosition:be,disableTextSelection:Qt,enableTextSelection:Xt,disableImageDrag:xe,enableImageDrag:Me,preventOutline:Ee,restoreOutline:Le,getSizedParentNode:Te,getScale:ke});function Ce(t,e,n,i){if("object"==typeof e)for(var o in e)Ae(t,o,e[o],n);else for(var r=0,a=(e=p(e)).length;r<a;r++)Ae(t,e[r],n,i);return this}var je="_leaflet_events";function Oe(t,e,n,i){if("object"==typeof e)for(var o in e)De(t,o,e[o],n);else if(e)for(var r=0,a=(e=p(e)).length;r<a;r++)De(t,e[r],n,i);else{for(var s in t[je])De(t,s,t[je][s]);delete t[je]}return this}function Ae(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):"");if(t[je]&&t[je][o])return this;var r=function(e){return n.call(i||t,e||window.event)},s=r;wt&&0===e.indexOf("touch")?Ft(t,e,r,o):!xt||"dblclick"!==e||!qt||wt&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!!Tt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,Ye(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1)):("click"===e&&nt&&(r=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=We&&n-We;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?Re(t):(We=n,e(t))}(t,s)}),t.addEventListener(e,r,!1)):"attachEvent"in t&&t.attachEvent("on"+e,r):qt(t,r,o),t[je]=t[je]||{},t[je][o]=r}function De(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):""),r=t[je]&&t[je][o];if(!r)return this;wt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(At,i,!1):"touchmove"===e?t.removeEventListener(Dt,i,!1):"touchend"===e&&(t.removeEventListener(Pt,i,!1),t.removeEventListener(Nt,i,!1))}(t,e,o):!xt||"dblclick"!==e||!Kt||wt&&st?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!!Tt&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r):Kt(t,o),t[je][o]=null}function Pe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ue(t),this}function Ne(t){return Ae(t,"mousewheel",Pe),this}function Ie(t){return Ce(t,"mousedown touchstart dblclick",Pe),Ae(t,"click",He),this}function ze(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Re(t){return ze(t),Pe(t),this}function Be(t,e){if(!e)return new A(t.clientX,t.clientY);var n=ke(e),i=n.boundingClientRect;return new A((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Fe=pt&&st?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function Ve(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Fe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var We,Ze={};function He(t){Ze[t.type]=!0}function Ue(t){var e=Ze[t.type];return Ze[t.type]=!1,e}function Ye(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Ge=(Object.freeze||Object)({on:Ce,off:Oe,stopPropagation:Pe,disableScrollPropagation:Ne,disableClickPropagation:Ie,preventDefault:ze,stop:Re,getMousePosition:Be,getWheelDelta:Ve,fakeStop:He,skipped:Ue,isExternalTarget:Ye,addListener:Ce,removeListener:Oe}),qe=O.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=be(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),_e(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ke=O.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ne&&gt&&!Mt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(gt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof A?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),a=this.containerPointToLatLng(o.add(r));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():R(t);var n=P(e.paddingTopLeft||e.padding||[0,0]),i=P(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o);return{center:this.unproject(a.add(s).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=R(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=P(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){pe(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!gt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),o=this.project(t),r=this.getSize(),a=this._zoom;t=F(t),e=void 0===e?a:e;var s=Math.max(r.x,r.y),l=s*this.getZoomScale(a,e),u=o.distanceTo(i)||1;function c(t){var e=(l*l-s*s+2.0164*(t?-1:1)*2.0164*u*u)/(2*(t?l:s)*2.0164*u),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var d=c(0);function f(t){return s*(p(d)*(h(e=d+1.42*t)/p(e))-h(d))/2.0164;var e}var m=Date.now(),g=(c(1)-d)/1.42,v=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var r=(Date.now()-m)/v,l=function(t){return 1-Math.pow(1-t,1.5)}(r)*g;r<=1?(this._flyToFrame=T(n,this),this._move(this.unproject(i.add(o.subtract(i).multiplyBy(f(l)/u)),a),this.getScaleZoom(s/function(t){return s*(p(d)/p(d+1.42*t))}(l),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=R(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,R(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=P((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=P(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),r=this.project(o),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),u=I([s.min.add(n),s.max.subtract(i)]);if(!u.contains(a)){this._enforcingBounds=!0;var c=r.subtract(a),h=P(a.x+c.x,a.y+c.y);(a.x<u.min.x||a.x>u.max.x)&&(h.x=r.x-c.x,c.x>0?h.x+=l.x-n.x:h.x-=l.x-i.x),(a.y<u.min.y||a.y>u.max.y)&&(h.y=r.y-c.y,c.y>0?h.y+=l.y-n.y:h.y-=l.y-i.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=e.divideBy(2).round(),a=i.divideBy(2).round(),s=r.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),i=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var o=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(o,i.maxZoom):o)}var r={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(r[a]=t.coords[a]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ae("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new z(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=R(t),n=P(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),u=I(this.project(s,i),this.project(a,i)).getSize(),c=gt?this.options.zoomSnap:1,h=l.x/u.x,p=l.y/u.y,d=e?Math.max(h,p):Math.min(h,p);return i=this.getScaleZoom(d,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(o,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(P(t),e)},layerPointToLatLng:function(t){var e=P(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(R(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return P(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return P(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(P(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return Be(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=oe(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ce(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt,pe(t,"leaflet-container"+(xt?" leaflet-touch":"")+(Lt?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=re(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(t.markerPane,"leaflet-zoom-hide"),pe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){_e(this._mapPane,new A(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){_e(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Oe:Ce;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),gt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=T((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,s=!1;r;){if((n=this._targets[a(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(o&&!Ye(r,t))break;if(i.push(n),o)break}if(r===this._container)break;r=r.parentNode}return i.length||s||o||!Ye(r,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ue(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ee(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var r=i[0];"contextmenu"===e&&r.listens(e,!0)&&ze(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=r.getLatLng&&(!r._radius||r._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?r.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(e,a,!0),a.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return be(this._mapPane)||new A(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return I([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new N(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new N(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=I(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),r=i.max.subtract(t.max);return new A(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=gt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=ee,n=this._proxy.style[e];ye(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ye(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(T((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),T((function(){this._moveEnd(!0)}),this))}}),Qe=C.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return pe(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(se(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Xe=function(t){return new Qe(t)};Ke.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ae("div",e+"control-container",this._container);function i(i,o){var r=e+i+" "+e+o;t[i+o]=ae("div",r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $e=Qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Qe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ie(e),Ne(e);var i=this._section=ae("section",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Ce(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ae("a",t+"-toggle",e);o.href="#",o.title="Layers",xt?(Ce(o,"click",Re),Ce(o,"click",this.expand,this)):Ce(o,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ae("div",t+"-base",i),this._separator=ae("div",t+"-separator",i),this._overlaysList=ae("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(o((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;le(this._baseLayersList),le(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ce(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("div");return n.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],o=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])||this._map.addLayer(i[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Je=Qe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ae("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var r=ae("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),Ie(r),Ce(r,"click",Re),Ce(r,"click",o,this),Ce(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&pe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&pe(this._zoomInButton,e)}});Ke.mergeOptions({zoomControl:!0}),Ke.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Je,this.addControl(this.zoomControl))}));var tn=Qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ae("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ae("div",e,n)),t.imperial&&(this._iScale=ae("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),en=Qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),Ie(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ke.mergeOptions({attributionControl:!0}),Ke.addInitHook((function(){this.options.attributionControl&&(new en).addTo(this)})),Qe.Layers=$e,Qe.Zoom=Je,Qe.Scale=tn,Qe.Attribution=en,Xe.layers=function(t,e,n){return new $e(t,e,n)},Xe.zoom=function(t){return new Je(t)},Xe.scale=function(t){return new tn(t)},Xe.attribution=function(t){return new en(t)};var nn=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var on,rn={Events:j},an=xt?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ln={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},un=O.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){d(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ce(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(un._dragging===this&&this.finishDrag(),Oe(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(un._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(un._dragging=this,this._preventOutline&&Ee(this._element),xe(),Qt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Te(this._element);this._startPoint=new A(e.clientX,e.clientY),this._parentScale=ke(n),Ce(document,ln[t.type],this._onMove,this),Ce(document,sn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new A(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,ze(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=be(this._element).subtract(n),pe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,k(this._animRequest),this._lastEvent=t,this._animRequest=T(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),_e(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ln)Oe(document,ln[t],this._onMove,this),Oe(document,sn[t],this._onUp,this);Me(),Xt(),this._moved&&this._moving&&(k(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,un._dragging=!1}});function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,o,r){var a,s,l,u=0;for(s=o+1;s<=r-1;s++)(l=mn(e[s],e[o],e[r],!0))>u&&(a=s,u=l);u>i&&(n[a]=1,t(e,n,i,o,a),t(e,n,i,a,r))}(t,i,e,0,n-1);var o,r=[];for(o=0;o<n;o++)i[o]&&r.push(t[o]);return r}(t=function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)a=t[i],s=t[o],l=void 0,u=void 0,l=s.x-a.x,u=s.y-a.y,l*l+u*u>e&&(n.push(t[i]),o=i);var a,s,l,u;return o<r-1&&n.push(t[r-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(mn(t,e,n,!0))}function pn(t,e,n,i,o){var r,a,s,l=i?on:fn(t,n),u=fn(e,n);for(on=u;;){if(!(l|u))return[t,e];if(l&u)return!1;s=fn(a=dn(t,e,r=l||u,n,o),n),r===l?(t=a,l=s):(e=a,u=s)}}function dn(t,e,n,i,o){var r,a,s=e.x-t.x,l=e.y-t.y,u=i.min,c=i.max;return 8&n?(r=t.x+s*(c.y-t.y)/l,a=c.y):4&n?(r=t.x+s*(u.y-t.y)/l,a=u.y):2&n?(r=c.x,a=t.y+l*(c.x-t.x)/s):1&n&&(r=u.x,a=t.y+l*(u.x-t.x)/s),new A(r,a,o)}function fn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function mn(t,e,n,i){var o,r=e.x,a=e.y,s=n.x-r,l=n.y-a,u=s*s+l*l;return u>0&&((o=((t.x-r)*s+(t.y-a)*l)/u)>1?(r=n.x,a=n.y):o>0&&(r+=s*o,a+=l*o)),s=t.x-r,l=t.y-a,i?s*s+l*l:new A(r,a)}function gn(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(t)}var yn=(Object.freeze||Object)({simplify:cn,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return mn(t,e,n)},clipSegment:pn,_getEdgeIntersection:dn,_getBitCode:fn,_sqClosestPointOnSegment:mn,isFlat:gn,_flat:vn});function _n(t,e,n){var i,o,r,a,s,l,u,c,h,p=[1,4,2,8];for(o=0,u=t.length;o<u;o++)t[o]._code=fn(t[o],e);for(a=0;a<4;a++){for(c=p[a],i=[],o=0,r=(u=t.length)-1;o<u;r=o++)s=t[o],l=t[r],s._code&c?l._code&c||((h=dn(l,s,c,e,n))._code=fn(h,e),i.push(h)):(l._code&c&&((h=dn(l,s,c,e,n))._code=fn(h,e),i.push(h)),i.push(s));t=i}return t}var bn=(Object.freeze||Object)({clipPolygon:_n}),wn={project:function(t){return new A(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new N([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=r*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),r/2);return i=-n*Math.log(Math.max(s,1e-10)),new A(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),s+=u=Math.PI/2-2*Math.atan(a*e)-s;return new B(s*n,t.x*n/i)}},Mn=(Object.freeze||Object)({LonLat:wn,Mercator:xn,SphericalMercator:H}),En=n({},Z,{code:"EPSG:3395",projection:xn,transformation:function(){var t=.5/(Math.PI*xn.R);return Y(t,.5,-t,.5)}()}),Ln=n({},Z,{code:"EPSG:4326",projection:wn,transformation:Y(1/180,1,-1/180,.5)}),Tn=n({},W,{projection:wn,transformation:Y(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});W.Earth=Z,W.EPSG3395=En,W.EPSG3857=G,W.EPSG900913=q,W.EPSG4326=Ln,W.Simple=Tn;var kn=O.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ke.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Sn=kn.extend({initialize:function(t,e){var n,i;if(d(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Cn=Sn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Sn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Sn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new z;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),jn=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=P(i),r=P("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Lt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),On=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return On.imagePath||(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+jn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=re(t,"background-image")||re(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),An=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new un(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=be(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),l=I(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));if(!l.contains(r)){var u=P((Math.max(l.max.x,r.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),_e(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=T(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=be(e._icon),o=e._map.layerPointToLatLng(i);n&&_e(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Dn=kn.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),pe(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(pe(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&_e(this._icon,t),this._shadow&&_e(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),An)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new An(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Pn=kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Nn=Pn.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Pn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new N(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),In=Nn.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),d(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Pn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===Z.distance){var o=Math.PI/180,r=this._mRadius/Z.R/o,a=n.project([e+r,t]),s=n.project([e-r,t]),l=a.add(s).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(u*o))/(Math.cos(e*o)*Math.cos(u*o)))/o;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,t-c]).x,this._radiusY=l.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),zn=Pn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,r=mn,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){var h=r(t,e=l[u-1],n=l[u],!0);h<i&&(i=h,o=r(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<l-1;t++)if(o=s[t],r=s[t+1],(i+=n=o.distanceTo(r))>e)return a=(i-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-o.x),r.y-a*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new z,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=gn(t),i=0,o=t.length;i<o;i++)n?(e[i]=F(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new A(t,t);this._pxBounds=new N([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,o,r=t[0]instanceof B,a=t.length;if(r){for(o=[],i=0;i<a;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,o,r,a,s,l=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(n=0,r=(s=this._rings[e]).length;n<r-1;n++)(a=pn(s[n],s[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===s[n+1]&&n!==r-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(i=0,o=(a=(s=this._parts[n]).length)-1;i<a;o=i++)if((e||0!==i)&&hn(t,s[o],s[i])<=l)return!0;return!1}});zn._flat=vn;var Rn=zn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(r=a=s=0,t=0,e=c-1;t<c;e=t++)n=u[t],i=u[e],o=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*o,s+=(n.y+i.y)*o,r+=3*o;return l=0===r?u[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=zn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){zn.prototype._setLatLngs.call(this,t),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new A(e,e);if(t=new N(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,o=0,r=this._rings.length;o<r;o++)(i=_n(this._rings[o],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,o,r,a,s,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(r=0,a=(l=(e=this._parts[o]).length)-1;r<l;a=r++)n=e[r],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||zn.prototype._containsPoint.call(this,t,!0)}}),Bn=Cn.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=v(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=Fn(t,r);return a?(a.feature=Gn(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Fn(t,e){var n,i,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Wn;if(!s&&!a)return null;switch(a.type){case"Point":return Vn(u,t,n=c(s),e);case"MultiPoint":for(o=0,r=s.length;o<r;o++)n=c(s[o]),l.push(Vn(u,t,n,e));return new Cn(l);case"LineString":case"MultiLineString":return i=Zn(s,"LineString"===a.type?0:1,c),new zn(i,e);case"Polygon":case"MultiPolygon":return i=Zn(s,"Polygon"===a.type?1:2,c),new Rn(i,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var h=Fn({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Cn(l);default:throw new Error("Invalid GeoJSON object.")}}function Vn(t,e,n,i){return t?t(e,n):new Dn(n,i&&i.markersInheritOptions&&i)}function Wn(t){return new B(t[1],t[0],t[2])}function Zn(t,e,n){for(var i,o=[],r=0,a=t.length;r<a;r++)i=e?Zn(t[r],e-1,n):(n||Wn)(t[r]),o.push(i);return o}function Hn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Un(t,e,n,i){for(var o=[],r=0,a=t.length;r<a;r++)o.push(e?Un(t[r],e-1,n,i):Hn(t[r],i));return!e&&n&&o.push(o[0]),o}function Yn(t,e){return t.feature?n({},t.feature,{geometry:e}):Gn(e)}function Gn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var qn={toGeoJSON:function(t){return Yn(this,{type:"Point",coordinates:Hn(this.getLatLng(),t)})}};function Kn(t,e){return new Bn(t,e)}Dn.include(qn),In.include(qn),Nn.include(qn),zn.include({toGeoJSON:function(t){var e=!gn(this._latlngs);return Yn(this,{type:(e?"Multi":"")+"LineString",coordinates:Un(this._latlngs,e?1:0,!1,t)})}}),Rn.include({toGeoJSON:function(t){var e=!gn(this._latlngs),n=e&&!gn(this._latlngs[0]),i=Un(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Yn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Sn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Yn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(n)i.push(o.geometry);else{var r=Gn(o);"FeatureCollection"===r.type?i.push.apply(i,r.features):i.push(r)}}})),n?Yn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Qn=Kn,Xn=kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=R(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ue(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=R(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");pe(e,"leaflet-image-layer"),this._zoomAnimated&&pe(e,"leaflet-zoom-animated"),this.options.className&&pe(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ye(this._image,n,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();_e(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),$n=Xn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(pe(e,"leaflet-image-layer"),this._zoomAnimated&&pe(e,"leaflet-zoom-animated"),this.options.className&&pe(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=o(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],r=0;r<n.length;r++)i.push(n[r].src);this._url=n.length>0?i:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=ae("source");s.src=this._url[a],e.appendChild(s)}}}}),Jn=Xn.extend({_initImage:function(){var t=this._image=this._url;pe(t,"leaflet-image-layer"),this._zoomAnimated&&pe(t,"leaflet-zoom-animated"),this.options.className&&pe(t,this.options.className),t.onselectstart=u,t.onmousemove=u}}),ti=kn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ge(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(o(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ue(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof kn||(n=e,e=t),e instanceof Cn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=P(this.options.offset),n=this._getAnchor();this._zoomAnimated?_e(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),ei=ti.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){ti.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pn||this._source.on("preclick",Pe))},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pn||this._source.off("preclick",Pe))},getEvents:function(){var t=ti.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",n),Ie(n),Ne(this._contentNode),Ce(n,"contextmenu",Pe),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ae("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Ce(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight;o&&i>o?(e.height=o+"px",pe(t,"leaflet-popup-scrolled")):de(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();_e(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(re(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new A(this._containerLeft,-n-this._containerBottom);o._add(be(this._container));var r=t.layerPointToContainerPoint(o),a=P(this.options.autoPanPadding),s=P(this.options.autoPanPaddingTopLeft||a),l=P(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,h=0;r.x+i+l.x>u.x&&(c=r.x+i-u.x+l.x),r.x-c-s.x<0&&(c=r.x-s.x),r.y+n+l.y>u.y&&(h=r.y+n-u.y+l.y),r.y-h-s.y<0&&(h=r.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),Re(t)},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ke.mergeOptions({closePopupOnClick:!0}),Ke.include({openPopup:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),kn.include({bindPopup:function(t,e){return t instanceof ei?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new ei(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Re(t),e instanceof Pn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ni=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){ti.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=ti.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=P(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(P(-a/2+l.x,-s+l.y+u.y,!0)):"bottom"===r?t=t.subtract(P(a/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(P(a/2+l.x,s/2-u.y+l.y,!0)):"right"===r||"auto"===r&&o.x<i.x?(r="right",t=t.add(P(l.x+u.x,u.y-s/2+l.y,!0))):(r="left",t=t.subtract(P(a+u.x-l.x,s/2-u.y-l.y,!0))),de(n,"leaflet-tooltip-right"),de(n,"leaflet-tooltip-left"),de(n,"leaflet-tooltip-top"),de(n,"leaflet-tooltip-bottom"),pe(n,"leaflet-tooltip-"+r),_e(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ge(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ke.include({openTooltip:function(t,e,n){return t instanceof ni||(t=new ni(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),kn.include({bindTooltip:function(t,e){return t instanceof ni?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new ni(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),xt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(pe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ii=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(le(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=P(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});jn.Default=On;var oi=kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof A?t:new A(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){ge(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);ge(o.el,r),r<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(se(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new A(+o,+r);s.z=+a;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>i&&this._retainParent(o,r,a,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new A(o,r);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();gt?ye(t.el,o,i):_e(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new N(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new N(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new A(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=o.min.y;h<=o.max.y;h++)for(var p=o.min.x;p<=o.max.x;p++){var d=new A(p,h);if(d.z=this._tileZoom,this._isValidTile(d)){var f=this._tiles[this._tileCoordsToKey(d)];f?f.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(p=0;p<a.length;p++)this._addTile(a[p],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return R(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n);return[e.unproject(i,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new z(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new A(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,J&&this.options.opacity<1&&ge(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&T(o(this._tileReady,this,t,null,r)),_e(r,n),this._tiles[i]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(ge(n.el,0),k(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(pe(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new A(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ri=oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Lt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ce(n,"load",o(this._tileOnLoad,this,e,n)),Ce(n,"error",o(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Lt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){J?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,e.complete||(e.src=_,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return rt||e.el.setAttribute("src",_),oi.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==_))return oi.prototype._tileReady.call(this,t,e,n)}});function ai(t,e){return new ri(t,e)}var si=ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);var r=(e=d(this,e)).detectRetina&&Lt?2:1,a=this.getTileSize();i.width=a.x*r,i.height=a.y*r,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ri.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=I(n.project(e[0]),n.project(e[1])),o=i.min,r=i.max,a=(this._wmsVersion>=1.3&&this._crs===Ln?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),s=ri.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});ri.WMS=si,ai.wms=function(t,e){return new si(t,e)};var li=kn.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=be(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e).subtract(r),s=o.multiplyBy(-n).add(i).add(o).subtract(a);gt?ye(this._container,s,n):_e(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new N(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ui=li.extend({getEvents:function(){var t=li.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){li.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ce(t,"mousemove",this._onMouseMove,this),Ce(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,se(this._container),Oe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){li.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Lt?2:1;_e(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Lt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){li.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),n=0;n<s;n++){for(i=0,o=a[n].length;i<o;i++)r=a[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(He(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(pe(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ci(t){return kt?new ui(t):null}var hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),pi={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(li.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hi("shape");pe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=hi("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=hi("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ue(t._container)},_bringToBack:function(t){ce(t._container)}},di=Ct?hi:K,fi=li.extend({getEvents:function(){var t=li.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=di("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=di("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Oe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){li.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),_e(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=di("path");t.options.className&&pe(e,t.options.className),t.options.interactive&&pe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ue(t._path)},_bringToBack:function(t){ce(t._path)}});function mi(t){return St||Ct?new fi(t):null}Ct&&fi.include(pi),Ke.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ci(t)||mi(t)}});var gi=Rn.extend({initialize:function(t,e){Rn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=R(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});fi.create=di,fi.pointsToPath=Q,Bn.geometryToLayer=Fn,Bn.coordsToLatLng=Wn,Bn.coordsToLatLngs=Zn,Bn.latLngToCoords=Hn,Bn.latLngsToCoords=Un,Bn.getFeature=Yn,Bn.asFeature=Gn,Ke.mergeOptions({boxZoom:!0});var vi=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Qt(),xe(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ce(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new N(this._point,this._startPoint),n=e.getSize();_e(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(se(this._box),de(this._container,"leaflet-crosshair")),Xt(),Me(),Oe(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ke.addInitHook("addHandler","boxZoom",vi),Ke.mergeOptions({doubleClickZoom:!0});var yi=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Ke.addInitHook("addHandler","doubleClickZoom",yi),Ke.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _i=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new un(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=R(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,a=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=o.multiplyBy(a/r),l=s.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),h=u/(n.inertiaDeceleration*a),p=c.multiplyBy(-h/2).round();p.x||p.y?(p=e._limitOffset(p,e.options.maxBounds),T((function(){e.panBy(p,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ke.addInitHook("addHandler","dragging",_i),Ke.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bi=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ce(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Oe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=P(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Re(t)}}});Ke.addInitHook("addHandler","keyboard",bi),Ke.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wi=nn.extend({addHooks:function(){Ce(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Oe(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ve(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),i),Re(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ke.addInitHook("addHandler","scrollWheelZoom",wi),Ke.mergeOptions({tap:!0,tapTolerance:15});var xi=nn.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(ze(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new A(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&pe(n,"leaflet-active"),this._holdTimeout=setTimeout(o((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ce(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Oe(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new A(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});xt&&!wt&&Ke.addInitHook("addHandler","tap",xi),Ke.mergeOptions({touchZoom:xt&&!it,bounceAtZoomLimits:!0});var Mi=nn.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend",this._onTouchEnd,this),ze(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var s=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=T(s,this,!0),ze(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),Oe(document,"touchmove",this._onTouchMove),Oe(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ke.addInitHook("addHandler","touchZoom",Mi),Ke.BoxZoom=vi,Ke.DoubleClickZoom=yi,Ke.Drag=_i,Ke.Keyboard=bi,Ke.ScrollWheelZoom=wi,Ke.Tap=xi,Ke.TouchZoom=Mi,Object.freeze=e,t.version="1.6.0",t.Control=Qe,t.control=Xe,t.Browser=Ot,t.Evented=O,t.Mixin=rn,t.Util=S,t.Class=C,t.Handler=nn,t.extend=n,t.bind=o,t.stamp=a,t.setOptions=d,t.DomEvent=Ge,t.DomUtil=Se,t.PosAnimation=qe,t.Draggable=un,t.LineUtil=yn,t.PolyUtil=bn,t.Point=A,t.point=P,t.Bounds=N,t.bounds=I,t.Transformation=U,t.transformation=Y,t.Projection=Mn,t.LatLng=B,t.latLng=F,t.LatLngBounds=z,t.latLngBounds=R,t.CRS=W,t.GeoJSON=Bn,t.geoJSON=Kn,t.geoJson=Qn,t.Layer=kn,t.LayerGroup=Sn,t.layerGroup=function(t,e){return new Sn(t,e)},t.FeatureGroup=Cn,t.featureGroup=function(t){return new Cn(t)},t.ImageOverlay=Xn,t.imageOverlay=function(t,e,n){return new Xn(t,e,n)},t.VideoOverlay=$n,t.videoOverlay=function(t,e,n){return new $n(t,e,n)},t.SVGOverlay=Jn,t.svgOverlay=function(t,e,n){return new Jn(t,e,n)},t.DivOverlay=ti,t.Popup=ei,t.popup=function(t,e){return new ei(t,e)},t.Tooltip=ni,t.tooltip=function(t,e){return new ni(t,e)},t.Icon=jn,t.icon=function(t){return new jn(t)},t.DivIcon=ii,t.divIcon=function(t){return new ii(t)},t.Marker=Dn,t.marker=function(t,e){return new Dn(t,e)},t.TileLayer=ri,t.tileLayer=ai,t.GridLayer=oi,t.gridLayer=function(t){return new oi(t)},t.SVG=fi,t.svg=mi,t.Renderer=li,t.Canvas=ui,t.canvas=ci,t.Path=Pn,t.CircleMarker=Nn,t.circleMarker=function(t,e){return new Nn(t,e)},t.Circle=In,t.circle=function(t,e,n){return new In(t,e,n)},t.Polyline=zn,t.polyline=function(t,e){return new zn(t,e)},t.Polygon=Rn,t.polygon=function(t,e){return new Rn(t,e)},t.Rectangle=gi,t.rectangle=function(t,e){return new gi(t,e)},t.Map=Ke,t.map=function(t,e){return new Ke(t,e)};var Ei=window.L;t.noConflict=function(){return window.L=Ei,this},window.L=t}(e)},function(t,e,n){!function(t){"use strict";var e={ar:{touch:"استخدم إصبعين لتحريك الخريطة",scroll:"‏استخدم ctrl + scroll لتصغير/تكبير الخريطة",scrollMac:"يمكنك استخدام ⌘ + التمرير لتكبير/تصغير الخريطة"},bg:{touch:"Използвайте два пръста, за да преместите картата",scroll:"Задръжте бутона Ctrl натиснат, докато превъртате, за да промените мащаба на картата",scrollMac:"Задръжте бутона ⌘ натиснат, докато превъртате, за да промените мащаба на картата"},bn:{touch:"মানচিত্রটিকে সরাতে দুটি আঙ্গুল ব্যবহার করুন",scroll:"ম্যাপ জুম করতে ctrl + scroll ব্যবহার করুন",scrollMac:"ম্যাপে জুম করতে ⌘ বোতাম টিপে স্ক্রল করুন"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla ⌘ mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K posunutí mapy použijte dva prsty",scroll:"Velikost zobrazení mapy změňte podržením klávesy Ctrl a posouváním kolečka myši",scrollMac:"Velikost zobrazení mapy změníte podržením klávesy ⌘ a posunutím kolečka myši / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud på kortet",scrollMac:"Brug ⌘ + rullefunktionen til at zoome ind og ud på kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"⌘"},el:{touch:"Χρησιμοποιήστε δύο δάχτυλα για μετακίνηση στον χάρτη",scroll:"Χρησιμοποιήστε το πλήκτρο Ctrl και κύλιση, για να μεγεθύνετε τον χάρτη",scrollMac:"Χρησιμοποιήστε το πλήκτρο ⌘ + κύλιση για εστίαση στον χάρτη"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantén pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantén pulsada la tecla ⌘ mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta ⌘ eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"برای حرکت دادن نقشه از دو انگشت استفاده کنید.",scroll:"‏برای بزرگ‌نمایی نقشه از ctrl + scroll استفاده کنید",scrollMac:"برای بزرگ‌نمایی نقشه، از ⌘ + پیمایش استفاده کنید."},fi:{touch:"Siirrä karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittämällä.",scrollMac:"Zoomaa karttaa pitämällä painike ⌘ painettuna ja vierittämällä."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux doigts pour déplacer la carte",scroll:"Vous pouvez zoomer sur la carte à l'aide de CTRL+Molette de défilement",scrollMac:"Vous pouvez zoomer sur la carte à l'aide de ⌘+Molette de défilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme ⌘ e desprázate para ampliar o mapa"},gu:{touch:"નકશો ખસેડવા બે આંગળીઓનો ઉપયોગ કરો",scroll:"નકશાને ઝૂમ કરવા માટે ctrl + સ્ક્રોલનો ઉપયોગ કરો",scrollMac:"નકશાને ઝૂમ કરવા ⌘ + સ્ક્રોલનો ઉપયોગ કરો"},hi:{touch:"मैप एक जगह से दूसरी जगह ले जाने के लिए दो उंगलियों का इस्तेमाल करें",scroll:"मैप को ज़ूम करने के लिए ctrl + स्क्रोल का उपयोग करें",scrollMac:"मैप को ज़ूम करने के लिए ⌘ + स्क्रोल का उपयोग करें"},hr:{touch:"Pomičite kartu pomoću dva prsta",scroll:"Upotrijebite Ctrl i klizač miša da biste zumirali kartu",scrollMac:"Upotrijebite gumb ⌘ dok se pomičete za zumiranje karte"},hu:{touch:"Két ujjal mozgassa a térképet",scroll:"A térkép a ctrl + görgetés használatával nagyítható",scrollMac:"A térkép a ⌘ + görgetés használatával nagyítható"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan ⌘ + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza ⌘ + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"הזז את המפה באמצעות שתי אצבעות",scroll:"‏אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ctrl וגלילה",scrollMac:"אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ⌘ וגלילה"},ja:{touch:"地図を移動させるには指 2 本で操作します",scroll:"地図をズームするには、Ctrl キーを押しながらスクロールしてください",scrollMac:"地図をズームするには、⌘ キーを押しながらスクロールしてください"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},ko:{touch:"지도를 움직이려면 두 손가락을 사용하세요.",scroll:"지도를 확대/축소하려면 Ctrl을 누른 채 스크롤하세요.",scrollMac:"지도를 확대하려면 ⌘ + 스크롤 사용"},lt:{touch:"Perkelkite žemėlapį dviem pirštais",scroll:"Slinkite nuspaudę klavišą „Ctrl“, kad pakeistumėte žemėlapio mastelį",scrollMac:"Paspauskite klavišą ⌘ ir slinkite, kad priartintumėte žemėlapį"},lv:{touch:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem",scroll:"Kartes tālummaiņai izmantojiet ctrl + ritināšanu",scrollMac:"Lai veiktu kartes tālummaiņu, izmantojiet ⌘ + ritināšanu"},ml:{touch:"മാപ്പ് നീക്കാൻ രണ്ട് വിരലുകൾ ഉപയോഗിക്കുക",scroll:"കൺട്രോൾ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക",scrollMac:"⌘ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക"},mr:{touch:"नकाशा हलविण्यासाठी दोन बोटे वापरा",scroll:"नकाशा झूम करण्यासाठी ctrl + scroll वापरा",scrollMac:"नकाशावर झूम करण्यासाठी ⌘ + स्क्रोल वापरा"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik ⌘ + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for å flytte kartet",scroll:"Hold ctrl-tasten inne og rull for å zoome på kartet",scrollMac:"Hold inne ⌘-tasten og rull for å zoome på kartet"},pl:{touch:"Przesuń mapę dwoma palcami",scroll:"Naciśnij CTRL i przewiń, by przybliżyć mapę",scrollMac:"Naciśnij ⌘ i przewiń, by przybliżyć mapę"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize ⌘ + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosiți două degete pentru a deplasa harta",scroll:"Apăsați tasta ctrl și derulați simultan pentru a mări harta",scrollMac:"Folosiți ⌘ și derulați pentru a mări/micșora harta"},ru:{touch:"Чтобы переместить карту, проведите по ней двумя пальцами",scroll:"Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.",scrollMac:"Чтобы изменить масштаб, нажмите ⌘ + прокрутка"},sk:{touch:"Mapu môžete posunúť dvoma prstami",scroll:"Ak chcete priblížiť mapu, stlačte kláves ctrl a posúvajte",scrollMac:"Ak chcete priblížiť mapu, stlačte kláves ⌘ a posúvajte kolieskom myši"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid povečate tako, da držite tipko Ctrl in vrtite kolesce na miški",scrollMac:"Uporabite ⌘ + funkcijo pomika, da povečate ali pomanjšate zemljevid"},sr:{touch:"Мапу померајте помоћу два прста",scroll:"Притисните ctrl тастер док померате да бисте зумирали мапу",scrollMac:"Притисните тастер ⌘ док померате да бисте зумирали мапу"},sv:{touch:"Använd två fingrar för att flytta kartan",scroll:"Använd ctrl + rulla för att zooma kartan",scrollMac:"Använd ⌘ + rulla för att zooma på kartan"},ta:{touch:"மேப்பை நகர்த்த இரண்டு விரல்களைப் பயன்படுத்தவும்",scroll:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ctrl பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்",scrollMac:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ⌘ பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்"},te:{touch:"మ్యాప్‌ని తరలించడం కోసం రెండు వేళ్లను ఉపయోగించండి",scroll:"మ్యాప్‌ని జూమ్ చేయడానికి ctrl బటన్‌ను నొక్కి ఉంచి, స్క్రోల్ చేయండి",scrollMac:"మ్యాప్ జూమ్ చేయాలంటే ⌘ + స్క్రోల్ ఉపయోగించండి"},th:{touch:"ใช้ 2 นิ้วเพื่อเลื่อนแผนที่",scroll:"กด Ctrl ค้างไว้ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่",scrollMac:"กด ⌘ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek için iki parmağınızı kullanın",scroll:"Haritayı yakınlaştırmak için ctrl + kaydırma kombinasyonunu kullanın",scrollMac:"Haritayı yakınlaştırmak için ⌘ tuşuna basıp ekranı kaydırın"},uk:{touch:"Переміщуйте карту двома пальцями",scroll:"Щоб змінювати масштаб карти, прокручуйте коліщатко миші, утримуючи клавішу Ctrl",scrollMac:"Щоб змінити масштаб карти, використовуйте ⌘ + прокручування"},vi:{touch:"Sử dụng hai ngón tay để di chuyển bản đồ",scroll:"Sử dụng ctrl + cuộn để thu phóng bản đồ",scrollMac:"Sử dụng ⌘ + cuộn để thu phóng bản đồ"},"zh-CN":{touch:"使用双指移动地图",scroll:"按住 Ctrl 并滚动鼠标滚轮才可缩放地图",scrollMac:"按住 ⌘ 并滚动鼠标滚轮才可缩放地图"},"zh-TW":{touch:"同時以兩指移動地圖",scroll:"按住 ctrl 鍵加上捲動滑鼠可以縮放地圖",scrollMac:"按 ⌘ 加上滾動捲軸可以縮放地圖"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var n=!1,i=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?n=!0:"moveend"==t.type&&(n=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var t;if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)t=this._map.options.gestureHandlingOptions.text;else{var n=this._getUserLanguage();n||(n="en"),e[n]&&(t=e[n]),t||-1===n.indexOf("-")||(n=n.split("-")[0],t=e[n]),t||(t=e[n="en"])}var i=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(i=!0);var o=t.scroll;i&&(o=t.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",t.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",o)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],n=!1,i=0;i<e.length;i++)L.DomUtil.hasClass(t.target,e[i])&&(n=!0);n?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout((function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")}),this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){n||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",i),t.GestureHandling=i,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){var i=n(550),o=n(570),r=n(532);t.exports=function(t){return t&&t.length?i(t,r,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){!function(e){"use strict";var n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var n=e(t).toLowerCase();return(i="application/font-woff",{woff:i,woff2:i,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var i},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),i=n.length,o=new Uint8Array(i),r=0;r<i;r++)o[r]=n.charCodeAt(r);e(new Blob([o],{type:"image/png"}))}))}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),i=n.createElement("base");n.head.appendChild(i);var o=n.createElement("a");return n.body.appendChild(o),i.href=e,o.href=t,o.href},getAndEncode:function(t){s.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise((function(e){var n,i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4!==i.readyState)return;if(200!==i.status)return void(n?e(n):r("cannot fetch resource: "+t+", status: "+i.status));var o=new FileReader;o.onloadend=function(){var t=o.result.split(/,/)[1];e(t)},o.readAsDataURL(i.response)},i.ontimeout=function(){n?e(n):r("timeout of 30000ms occured while fetching resource: "+t)},i.responseType="blob",i.timeout=3e4,i.open("GET",t,!0),i.send(),s.impl.options.imagePlaceholder){var o=s.impl.options.imagePlaceholder.split(/,/);o&&o[1]&&(n=o[1])}function r(t){console.error(t),e("")}}))},uid:(t=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}),delay:function(t){return function(e){return new Promise((function(n){setTimeout((function(){n(e)}),t)}))}},asArray:function(t){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=n,i.src=t}))},width:function(t){var e=n(t,"border-left-width"),i=n(t,"border-right-width");return t.scrollWidth+e+i},height:function(t){var e=n(t,"border-top-width"),i=n(t,"border-bottom-width");return t.scrollHeight+e+i}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function n(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),i=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,r){return function(){return!e(t)}()?Promise.resolve(t):Promise.resolve(t).then(i).then((function(e){var i=Promise.resolve(t);return e.forEach((function(t){i=i.then((function(e){return o(e,t,n,r)}))})),i}))},shouldProcess:e,impl:{readUrls:i,inline:o}};function e(e){return-1!==e.search(t)}function i(e){for(var i,o=[];null!==(i=t.exec(e));)o.push(i[1]);return o.filter((function(t){return!n.isDataUrl(t)}))}function o(t,e,i,o){return Promise.resolve(e).then((function(t){return i?n.resolveUrl(t,i):t})).then(o||n.getAndEncode).then((function(t){return n.dataAsUrl(t,n.mimeType(e))})).then((function(i){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+i+"$3")}))}}(),o=function(){return{resolveAll:function(){return t(document).then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then((function(t){var e=[];return t.forEach((function(t){try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return i.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return i.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),r=function(){return{inlineAll:function e(o){return o instanceof Element?function(t){var e=t.style.getPropertyValue("background");return e?i.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}(o).then((function(){return o instanceof HTMLImageElement?t(o).inline():Promise.all(n.asArray(o.childNodes).map((function(t){return e(t)})))})):Promise.resolve(o)},impl:{newImage:t}};function t(t){return{inline:function(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then((function(e){return n.dataAsUrl(e,n.mimeType(t.src))})).then((function(e){return new Promise((function(n,i){t.onload=n,t.onerror=i,t.src=e}))}))}}}}(),a={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:l,toPng:function(t,e){return u(t,e||{}).then((function(t){return t.toDataURL()}))},toJpeg:function(t,e){return u(t,e=e||{}).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return u(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return u(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data}))},impl:{fontFaces:o,images:r,util:n,inliner:i,options:{}}};function l(t,e){return function(t){void 0===t.imagePlaceholder?s.impl.options.imagePlaceholder=a.imagePlaceholder:s.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?s.impl.options.cacheBust=a.cacheBust:s.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then((function(t){return function t(e,i,o){return o||!i||i(e)?Promise.resolve(e).then((function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(t){return r(e,t,i)})).then((function(t){return function(t,e){return e instanceof Element?Promise.resolve().then(i).then(o).then(r).then(a).then((function(){return e})):e;function i(){var i,o;i=window.getComputedStyle(t),o=e.style,i.cssText?o.cssText=i.cssText:function(t,e){n.asArray(t).forEach((function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))}))}(i,o)}function o(){[":before",":after"].forEach((function(i){!function(i){var o=window.getComputedStyle(t,i),r=o.getPropertyValue("content");if(""===r||"none"===r)return;var a=n.uid();e.className=e.className+" "+a;var s=document.createElement("style");s.appendChild(function(t,e,i){var o="."+t+":"+e,r=i.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(i):function(t){return n.asArray(t).map((function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")})).join("; ")+";"}(i);return document.createTextNode(o+"{"+r+"}")}(a,i,o)),e.appendChild(s)}(i)}))}function r(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function a(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})))}}(e,t)})):Promise.resolve();function r(e,i,o){var r=e.childNodes;return 0===r.length?Promise.resolve(i):a(i,n.asArray(r),o).then((function(){return i}));function a(e,n,i){var o=Promise.resolve();return n.forEach((function(n){o=o.then((function(){return t(n,i)})).then((function(t){t&&e.appendChild(t)}))})),o}}}(t,e.filter,!0)})).then(c).then(h).then((function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach((function(n){t.style[n]=e.style[n]}));return t})).then((function(i){return function(t,e,i){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(n.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+i+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}(i,e.width||n.width(t),e.height||n.height(t))}))}function u(t,e){return l(t,e).then(n.makeImage).then(n.delay(100)).then((function(i){var o=function(t){var i=document.createElement("canvas");if(i.width=e.width||n.width(t),i.height=e.height||n.height(t),e.bgcolor){var o=i.getContext("2d");o.fillStyle=e.bgcolor,o.fillRect(0,0,i.width,i.height)}return i}(t);return o.getContext("2d").drawImage(i,0,0),o}))}function c(t){return o.resolveAll().then((function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t}))}function h(t){return r.inlineAll(t).then((function(){return t}))}t.exports=s}()},function(t,e,n){var i=n(572),o=n(535),r=n(587),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:r(n);return l<0&&(l=a(s+l,0)),i(t,o(e,3),l)}},function(t,e,n){var i=n(619),o=n(678),r=n(583);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?r(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},function(t,e,n){var i=n(573),o=n(576);t.exports=function(t,e,n,r){var a=n.length,s=a,l=!r;if(null==t)return!s;for(t=Object(t);a--;){var u=n[a];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<s;){var c=(u=n[a])[0],h=t[c],p=u[1];if(l&&u[2]){if(void 0===h&&!(c in t))return!1}else{var d=new i;if(r)var f=r(h,p,c,t,e,d);if(!(void 0===f?o(p,h,3,r,d):f))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var i=n(537),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var i=n(537);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var i=n(537);t.exports=function(t){return i(this.__data__,t)>-1}},function(t,e,n){var i=n(537);t.exports=function(t,e){var n=this.__data__,o=i(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var i=n(536);t.exports=function(){this.__data__=new i,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var i=n(536),o=n(551),r=n(552);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new r(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var i=n(574),o=n(631),r=n(125),a=n(575),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,p=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!r(t)||o(t))&&(i(t)?p:s).test(a(t))}},function(t,e,n){var i,o=n(632),r=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!r&&r in t}},function(t,e,n){var i=n(163)["__core-js_shared__"];t.exports=i},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var i=n(635),o=n(536),r=n(551);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(r||o),string:new i}}},function(t,e,n){var i=n(636),o=n(637),r=n(638),a=n(639),s=n(640);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var i=n(539);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var i=n(539),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var i=n(539),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var i=n(539);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var i=n(540);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var i=n(540);t.exports=function(t){return i(this,t).get(t)}},function(t,e,n){var i=n(540);t.exports=function(t){return i(this,t).has(t)}},function(t,e,n){var i=n(540);t.exports=function(t,e){var n=i(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var i=n(573),o=n(577),r=n(652),a=n(656),s=n(673),l=n(528),u=n(579),c=n(580),h="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,f,m){var g=l(t),v=l(e),y=g?"[object Array]":s(t),_=v?"[object Array]":s(e),b=(y="[object Arguments]"==y?h:y)==h,w=(_="[object Arguments]"==_?h:_)==h,x=y==_;if(x&&u(t)){if(!u(e))return!1;g=!0,b=!1}if(x&&!b)return m||(m=new i),g||c(t)?o(t,e,n,d,f,m):r(t,e,y,n,d,f,m);if(!(1&n)){var M=b&&p.call(t,"__wrapped__"),E=w&&p.call(e,"__wrapped__");if(M||E){var L=M?t.value():t,T=E?e.value():e;return m||(m=new i),f(L,T,n,d,m)}}return!!x&&(m||(m=new i),a(t,e,n,d,f,m))}},function(t,e,n){var i=n(552),o=n(648),r=n(649);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=r,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var i=n(164),o=n(653),r=n(538),a=n(577),s=n(654),l=n(655),u=i?i.prototype:void 0,c=u?u.valueOf:void 0;t.exports=function(t,e,n,i,u,h,p){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=s;case"[object Set]":var f=1&i;if(d||(d=l),t.size!=e.size&&!f)return!1;var m=p.get(t);if(m)return m==e;i|=2,p.set(t,e);var g=a(d(t),d(e),i,u,h,p);return p.delete(t),g;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e,n){var i=n(163).Uint8Array;t.exports=i},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var i=n(657),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,r,a,s){var l=1&n,u=i(t),c=u.length;if(c!=i(e).length&&!l)return!1;for(var h=c;h--;){var p=u[h];if(!(l?p in e:o.call(e,p)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var f=!0;s.set(t,e),s.set(e,t);for(var m=l;++h<c;){var g=t[p=u[h]],v=e[p];if(r)var y=l?r(v,g,p,e,t,s):r(g,v,p,t,e,s);if(!(void 0===y?g===v||a(g,v,n,r,s):y)){f=!1;break}m||(m="constructor"==p)}if(f&&!m){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(f=!1)}return s.delete(t),s.delete(e),f}},function(t,e,n){var i=n(658),o=n(660),r=n(541);t.exports=function(t){return i(t,r,o)}},function(t,e,n){var i=n(659),o=n(528);t.exports=function(t,e,n){var r=e(t);return o(t)?r:i(r,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}},function(t,e,n){var i=n(661),o=n(662),r=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),i(a(t),(function(e){return r.call(t,e)})))}:o;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var a=t[n];e(a,n,t)&&(r[o++]=a)}return r}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var i=n(664),o=n(578),r=n(528),a=n(579),s=n(553),l=n(580),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=r(t),c=!n&&o(t),h=!n&&!c&&a(t),p=!n&&!c&&!h&&l(t),d=n||c||h||p,f=d?i(t.length,String):[],m=f.length;for(var g in t)!e&&!u.call(t,g)||d&&("length"==g||h&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(222),o=n(223);t.exports=function(t){return o(t)&&"[object Arguments]"==i(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(222),o=n(554),r=n(223),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return r(t)&&o(t.length)&&!!a[i(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var i=n(227),o=e&&!e.nodeType&&e,r=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=r&&r.exports===o&&i.process,s=function(){try{var t=r&&r.require&&r.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(225)(t))},function(t,e,n){var i=n(581),o=n(671),r=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))r.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var i=n(672)(Object.keys,Object);t.exports=i},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(674),o=n(551),r=n(675),a=n(676),s=n(677),l=n(222),u=n(575),c=u(i),h=u(o),p=u(r),d=u(a),f=u(s),m=l;(i&&"[object DataView]"!=m(new i(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||r&&"[object Promise]"!=m(r.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case c:return"[object DataView]";case h:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case f:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,n){var i=n(530)(n(163),"DataView");t.exports=i},function(t,e,n){var i=n(530)(n(163),"Promise");t.exports=i},function(t,e,n){var i=n(530)(n(163),"Set");t.exports=i},function(t,e,n){var i=n(530)(n(163),"WeakMap");t.exports=i},function(t,e,n){var i=n(582),o=n(541);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,i(a)]}return e}},function(t,e,n){var i=n(576),o=n(680),r=n(686),a=n(555),s=n(582),l=n(583),u=n(542);t.exports=function(t,e){return a(t)&&s(e)?l(u(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?r(n,t):i(e,a,3)}}},function(t,e,n){var i=n(584);t.exports=function(t,e,n){var o=null==t?void 0:i(t,e);return void 0===o?n:o}},function(t,e,n){var i=n(682),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,i,o){e.push(i?o.replace(r,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var i=n(683);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var i=n(552);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var a=t.apply(this,i);return n.cache=r.set(o,a)||r,a};return n.cache=new(o.Cache||i),n}o.Cache=i,t.exports=o},function(t,e,n){var i=n(685);t.exports=function(t){return null==t?"":i(t)}},function(t,e,n){var i=n(164),o=n(586),r=n(528),a=n(221),s=i?i.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(r(e))return o(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){var i=n(687),o=n(688);t.exports=function(t,e){return null!=t&&o(t,e,i)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var i=n(585),o=n(578),r=n(528),a=n(553),s=n(554),l=n(542);t.exports=function(t,e,n){for(var u=-1,c=(e=i(e,t)).length,h=!1;++u<c;){var p=l(e[u]);if(!(h=null!=t&&n(t,p)))break;t=t[p]}return h||++u!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(p,c)&&(r(t)||o(t))}},function(t,e,n){var i=n(690),o=n(691),r=n(555),a=n(542);t.exports=function(t){return r(t)?i(a(t)):o(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var i=n(584);t.exports=function(t){return function(e){return i(e,t)}}},function(t,e,n){var i=n(572),o=n(535),r=n(587),a=Math.max,s=Math.min;t.exports=function(t,e,n){var l=null==t?0:t.length;if(!l)return-1;var u=l-1;return void 0!==n&&(u=r(n),u=n<0?a(l+u,0):s(u,l-1)),i(t,o(e,3),u,!0)}},function(t,e,n){"use strict";var i=n(755),o=n(556),r=n(590),a=n(589);e.a=function(){var t=a.a,e=a.b,n=Object(o.a)(!0),s=null,l=r.a,u=null;function c(o){var r,a,c,h=o.length,p=!1;for(null==s&&(u=l(c=Object(i.a)())),r=0;r<=h;++r)!(r<h&&n(a=o[r],r,o))===p&&((p=!p)?u.lineStart():u.lineEnd()),p&&u.point(+t(a,r,o),+e(a,r,o));if(c)return u=null,c+""||null}return c.x=function(e){return arguments.length?(t="function"==typeof e?e:Object(o.a)(+e),c):t},c.y=function(t){return arguments.length?(e="function"==typeof t?t:Object(o.a)(+t),c):e},c.defined=function(t){return arguments.length?(n="function"==typeof t?t:Object(o.a)(!!t),c):n},c.curve=function(t){return arguments.length?(l=t,null!=s&&(u=l(s)),c):l},c.context=function(t){return arguments.length?(null==t?s=u=null:u=l(s=t),c):s},c}},function(t,e,n){var i=n(586),o=n(535),r=n(695),a=n(528);t.exports=function(t,e){return(a(t)?i:r)(t,o(e,3))}},function(t,e,n){var i=n(696),o=n(533);t.exports=function(t,e){var n=-1,r=o(t)?Array(t.length):[];return i(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}},function(t,e,n){var i=n(697),o=n(700)(i);t.exports=o},function(t,e,n){var i=n(698),o=n(541);t.exports=function(t,e){return t&&i(t,e,o)}},function(t,e,n){var i=n(699)();t.exports=i},function(t,e){t.exports=function(t){return function(e,n,i){for(var o=-1,r=Object(e),a=i(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===n(r[l],l,r))break}return e}}},function(t,e,n){var i=n(533);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!i(n))return t(n,o);for(var r=n.length,a=e?r:-1,s=Object(n);(e?a--:++a<r)&&!1!==o(s[a],a,s););return n}}},function(t,e,n){var i=n(550),o=n(535),r=n(570);t.exports=function(t,e){return t&&t.length?i(t,o(e,2),r):void 0}},function(t,e,n){var i=n(703)();t.exports=i},function(t,e,n){var i=n(704),o=n(591),r=n(588);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&o(e,n,a)&&(n=a=void 0),e=r(e),void 0===n?(n=e,e=0):n=r(n),a=void 0===a?e<n?1:-1:r(a),i(e,n,a,t)}}},function(t,e){var n=Math.ceil,i=Math.max;t.exports=function(t,e,o,r){for(var a=-1,s=i(n((e-t)/(o||1)),0),l=Array(s);s--;)l[r?s:++a]=t,t+=o;return l}},function(t,e,n){var i=n(706);t.exports=function(t,e,n){var o=i(t,e,(e-t)/(n-1));return o.length==n?o:o.concat(e)}},function(t,e){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,r=/^0o[0-7]+$/i,a=/^(?:0|[1-9]\d*)$/,s=parseInt;var l=Object.prototype.toString,u=Math.ceil,c=Math.max;var h,p=(h="length",function(t){return null==t?void 0:t[h]});function d(t){var e=f(t)?l.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==l.call(t)}(t))return NaN;if(f(t)){var e=d(t.valueOf)?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var a=o.test(t);return a||r.test(t)?s(t.slice(2),a?2:8):i.test(t)?NaN:+t}(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}var g,v=function(t,e,n){return n&&"number"!=typeof n&&function(t,e,n){if(!f(n))return!1;var i=typeof e;return!!("number"==i?function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(p(t))&&!d(t)}(n)&&function(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||a.test(t))&&t>-1&&t%1==0&&t<e}(e,n.length):"string"==i&&e in n)&&function(t,e){return t===e||t!=t&&e!=e}(n[e],t)}(t,e,n)&&(e=n=void 0),t=m(t),void 0===e?(e=t,t=0):e=m(e),function(t,e,n,i){for(var o=-1,r=c(u((e-t)/(n||1)),0),a=Array(r);r--;)a[i?r:++o]=t,t+=n;return a}(t,e,n=void 0===n?t<e?1:-1:m(n),g)};t.exports=v},function(t,e){t.exports=function(t){if(!Array.isArray(t))throw new Error("Array expected");if(!t.length)return[];for(var e,n,i,o,r,a=[],s=t.length,l=[],u=[],c=1,h=s;h--;)u[h]=0,l[h]=t[h].length,c*=l[h];for(e=0;e<c;e++){for(i=[],r=!0,o=0;o<s;o++)n=u[o],i.push(t[o][n]),r&&(n=(n+1)%l[o],u[o]=n,r=0==n);a.push(i)}return a}},function(t,e,n){if(void 0===e)var i={};else i=t.exports={};!function(t,e){var n=new Array(50);function i(t,e){return null!=n[t]&&null!=n[t][e]}function o(t,e){return n[t][e]}function r(t,e,i){n.length<t?(n.length=t,n[t]=new Array(e+5)):void 0===n[t]&&(n[t]=new Array(e)),n[t].length<e&&(n[t]=new Array(e+5)),n[t][e]=i}t.get=function(t,e){if(0===e)return 1;if(0===t||e>t)return 0;if(e>t-e&&(e=t-e),i(t,e))return o(t,e);for(var n=1,a=t,s=1;s<=e;s++)i(a,s)?(t--,n=o(a,s)):(n*=t--,r(a,s,n/=s));return n},t.get_no_memo=function(t,e){if(0===e)return 1;if(0===t||e>t)return 0;e>t-e&&(e=t-e);for(var n=1,i=1;i<=e;i++)n*=t--,n/=i;return n}}(i)},function(t,e,n){var i=n(710);"string"==typeof i&&(i=[[t.i,i,""]]);n(40)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(39)(!1)).push([t.i,"/* Following class taken from https://docs.mapbox.com/help/how-mapbox-works/attribution/#other-mapping-frameworks */\n.mapbox-wordmark {\n\tposition: absolute;\n\tdisplay: block;\n\tmargin: 5px;\n\theight: 20px;\n\twidth: 65px;\n\tbottom: 0;\n\ttext-indent: -9999%;\n\tz-index: 99999;\n\toverflow: hidden;\n\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgODAuNDcgMjAuMDIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDgwLjQ3IDIwLjAyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe29wYWNpdHk6MC42O2ZpbGw6I0ZGRkZGRjtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30uc3Qxe29wYWNpdHk6MC42O2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTc5LjI5LDEzLjYxYzAsMC4xMS0wLjA5LDAuMi0wLjIsMC4yaC0xLjUzYy0wLjEyLDAtMC4yMy0wLjA2LTAuMjktMC4xNmwtMS4zNy0yLjI4bC0xLjM3LDIuMjhjLTAuMDYsMC4xLTAuMTcsMC4xNi0wLjI5LDAuMTZoLTEuNTNjLTAuMDQsMC0wLjA4LTAuMDEtMC4xMS0wLjAzYy0wLjA5LTAuMDYtMC4xMi0wLjE4LTAuMDYtMC4yN2MwLDAsMCwwLDAsMGwyLjMxLTMuNWwtMi4yOC0zLjQ3Yy0wLjAyLTAuMDMtMC4wMy0wLjA3LTAuMDMtMC4xMWMwLTAuMTEsMC4wOS0wLjIsMC4yLTAuMmgxLjUzYzAuMTIsMCwwLjIzLDAuMDYsMC4yOSwwLjE2bDEuMzQsMi4yNWwxLjMzLTIuMjRjMC4wNi0wLjEsMC4xNy0wLjE2LDAuMjktMC4xNmgxLjUzYzAuMDQsMCwwLjA4LDAuMDEsMC4xMSwwLjAzYzAuMDksMC4wNiwwLjEyLDAuMTgsMC4wNiwwLjI3YzAsMCwwLDAsMCwwTDc2Ljk2LDEwbDIuMzEsMy41Qzc5LjI4LDEzLjUzLDc5LjI5LDEzLjU3LDc5LjI5LDEzLjYxeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02My4wOSw5LjE2Yy0wLjM3LTEuNzktMS44Ny0zLjEyLTMuNjYtMy4xMmMtMC45OCwwLTEuOTMsMC40LTIuNiwxLjEyVjMuMzdjMC0wLjEyLTAuMS0wLjIyLTAuMjItMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjIsMC4xLTAuMjIsMC4yMnYxMC4yMWMwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMnYtMC43YzAuNjgsMC43MSwxLjYyLDEuMTIsMi42LDEuMTJjMS43OSwwLDMuMjktMS4zNCwzLjY2LTMuMTNDNjMuMjEsMTAuMyw2My4yMSw5LjcyLDYzLjA5LDkuMTZMNjMuMDksOS4xNnogTTU5LjEyLDEyLjQxYy0xLjI2LDAtMi4yOC0xLjA2LTIuMy0yLjM2VjkuOTljMC4wMi0xLjMxLDEuMDQtMi4zNiwyLjMtMi4zNnMyLjMsMS4wNywyLjMsMi4zOVM2MC4zOSwxMi40MSw1OS4xMiwxMi40MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjguMjYsNi4wNGMtMS44OS0wLjAxLTMuNTQsMS4yOS0zLjk2LDMuMTNjLTAuMTIsMC41Ni0wLjEyLDEuMTMsMCwxLjY5YzAuNDIsMS44NSwyLjA3LDMuMTYsMy45NywzLjE0YzIuMjQsMCw0LjA2LTEuNzgsNC4wNi0zLjk5UzcwLjUxLDYuMDQsNjguMjYsNi4wNHogTTY4LjI0LDEyLjQyYy0xLjI3LDAtMi4zLTEuMDctMi4zLTIuMzlzMS4wMy0yLjQsMi4zLTIuNHMyLjMsMS4wNywyLjMsMi4zOVM2OS41MSwxMi40MSw2OC4yNCwxMi40Mkw2OC4yNCwxMi40MnoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNTkuMTIsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNjAuMzksNy42Myw1OS4xMiw3LjYzeiBNNTkuMTIsMTEuMjNjLTAuNiwwLTEuMDktMC41My0xLjExLTEuMTlWMTBjMC4wMS0wLjY2LDAuNTEtMS4xOSwxLjExLTEuMTlzMS4xMSwwLjU0LDEuMTEsMS4yMVM1OS43NCwxMS4yMyw1OS4xMiwxMS4yM3oiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNjguMjQsNy42M2MtMS4yNywwLTIuMywxLjA3LTIuMywyLjM5czEuMDMsMi4zOSwyLjMsMi4zOXMyLjMtMS4wNywyLjMtMi4zOVM2OS41MSw3LjYzLDY4LjI0LDcuNjN6IE02OC4yNCwxMS4yM2MtMC42MSwwLTEuMTEtMC41NC0xLjExLTEuMjFzMC41LTEuMiwxLjExLTEuMnMxLjExLDAuNTQsMS4xMSwxLjIxUzY4Ljg1LDExLjIzLDY4LjI0LDExLjIzeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00My41Niw2LjI0aC0xLjMzYy0wLjEyLDAtMC4yMiwwLjEtMC4yMiwwLjIydjAuN2MtMC42OC0wLjcxLTEuNjItMS4xMi0yLjYtMS4xMmMtMi4wNywwLTMuNzUsMS43OC0zLjc1LDMuOTlzMS42OSwzLjk5LDMuNzUsMy45OWMwLjk5LDAsMS45My0wLjQxLDIuNi0xLjEzdjAuN2MwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMlY2LjQ0YzAtMC4xMS0wLjA5LTAuMjEtMC4yMS0wLjIxQzQzLjU3LDYuMjQsNDMuNTcsNi4yNCw0My41Niw2LjI0eiBNNDIuMDIsMTAuMDVjLTAuMDEsMS4zMS0xLjA0LDIuMzYtMi4zLDIuMzZzLTIuMy0xLjA3LTIuMy0yLjM5czEuMDMtMi40LDIuMjktMi40YzEuMjcsMCwyLjI4LDEuMDYsMi4zLDIuMzZMNDIuMDIsMTAuMDV6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTM5LjcyLDcuNjNjLTEuMjcsMC0yLjMsMS4wNy0yLjMsMi4zOXMxLjAzLDIuMzksMi4zLDIuMzlzMi4yOC0xLjA2LDIuMy0yLjM2VjkuOTlDNDIsOC42OCw0MC45OCw3LjYzLDM5LjcyLDcuNjN6IE0zOC42MiwxMC4wMmMwLTAuNjcsMC41LTEuMjEsMS4xMS0xLjIxYzAuNjEsMCwxLjA5LDAuNTMsMS4xMSwxLjE5djAuMDRjLTAuMDEsMC42NS0wLjUsMS4xOC0xLjExLDEuMThTMzguNjIsMTAuNjgsMzguNjIsMTAuMDJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTQ5LjkxLDYuMDRjLTAuOTgsMC0xLjkzLDAuNC0yLjYsMS4xMlY2LjQ1YzAtMC4xMi0wLjEtMC4yMi0wLjIyLTAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLDAuMS0wLjIyLDAuMjJ2MTAuMjFjMCwwLjEyLDAuMSwwLjIyLDAuMjIsMC4yMmgxLjMzYzAuMTIsMCwwLjIyLTAuMSwwLjIyLTAuMjJ2LTMuNzhjMC42OCwwLjcxLDEuNjIsMS4xMiwyLjYxLDEuMTJjMi4wNywwLDMuNzUtMS43OCwzLjc1LTMuOTlTNTEuOTgsNi4wNCw0OS45MSw2LjA0eiBNNDkuNiwxMi40MmMtMS4yNiwwLTIuMjgtMS4wNi0yLjMtMi4zNlY5Ljk5YzAuMDItMS4zMSwxLjA0LTIuMzcsMi4yOS0yLjM3YzEuMjYsMCwyLjMsMS4wNywyLjMsMi4zOVM1MC44NiwxMi40MSw0OS42LDEyLjQyTDQ5LjYsMTIuNDJ6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTQ5LjYsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNTAuODYsNy42Myw0OS42LDcuNjN6IE00OS42LDExLjIzYy0wLjYsMC0xLjA5LTAuNTMtMS4xMS0xLjE5VjEwQzQ4LjUsOS4zNCw0OSw4LjgxLDQ5LjYsOC44MWMwLjYsMCwxLjExLDAuNTUsMS4xMSwxLjIxUzUwLjIxLDExLjIzLDQ5LjYsMTEuMjN6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTM0LjM2LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzRjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWOS4yNGMwLTAuOTMtMC43LTEuNjMtMS41NC0xLjYzYy0wLjc2LDAtMS4zOSwwLjY3LTEuNTEsMS41NGwwLjAxLDQuNDRjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuODEsMC0xLjQ3LDAuNzUtMS41MiwxLjcxdjQuMjdjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ0YzAuMDEtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMSwwLjEsMC4yMiwwLjIxdjAuNjNjMC40OC0wLjY1LDEuMjQtMS4wNCwyLjA2LTEuMDVoMC4wM2MxLjA0LDAsMS45OSwwLjU3LDIuNDgsMS40OGMwLjQzLTAuOSwxLjMzLTEuNDgsMi4zMi0xLjQ5YzEuNTQsMCwyLjc5LDEuMTksMi43NiwyLjY1TDM0LjM2LDEzLjU5eiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik04MC4zMiwxMi45N2wtMC4wNy0wLjEyTDc4LjM4LDEwbDEuODUtMi44MWMwLjQyLTAuNjQsMC4yNS0xLjQ5LTAuMzktMS45MmMtMC4wMS0wLjAxLTAuMDItMC4wMS0wLjAzLTAuMDJjLTAuMjItMC4xNC0wLjQ4LTAuMjEtMC43NC0wLjIxaC0xLjUzYy0wLjUzLDAtMS4wMywwLjI4LTEuMywwLjc0bC0wLjMyLDAuNTNsLTAuMzItMC41M2MtMC4yOC0wLjQ2LTAuNzctMC43NC0xLjMxLTAuNzRoLTEuNTNjLTAuNTcsMC0xLjA4LDAuMzUtMS4yOSwwLjg4Yy0yLjA5LTEuNTgtNS4wMy0xLjQtNi45MSwwLjQzYy0wLjMzLDAuMzItMC42MiwwLjY5LTAuODUsMS4wOWMtMC44NS0xLjU1LTIuNDUtMi42LTQuMjgtMi42Yy0wLjQ4LDAtMC45NiwwLjA3LTEuNDEsMC4yMlYzLjM3YzAtMC43OC0wLjYzLTEuNDEtMS40LTEuNDFoLTEuMzNjLTAuNzcsMC0xLjQsMC42My0xLjQsMS40djMuNTdjLTAuOS0xLjMtMi4zOC0yLjA4LTMuOTctMi4wOWMtMC43LDAtMS4zOSwwLjE1LTIuMDIsMC40NWMtMC4yMy0wLjE2LTAuNTEtMC4yNS0wLjgtMC4yNWgtMS4zM2MtMC40MywwLTAuODMsMC4yLTEuMSwwLjUzYy0wLjAyLTAuMDMtMC4wNC0wLjA1LTAuMDctMC4wOGMtMC4yNy0wLjI5LTAuNjUtMC40NS0xLjA0LTAuNDVoLTEuMzJjLTAuMjksMC0wLjU3LDAuMDktMC44LDAuMjVDNDAuOCw1LDQwLjEyLDQuODUsMzkuNDIsNC44NWMtMS43NCwwLTMuMjcsMC45NS00LjE2LDIuMzhjLTAuMTktMC40NC0wLjQ2LTAuODUtMC43OS0xLjE5Yy0wLjc2LTAuNzctMS44LTEuMTktMi44OC0xLjE5aC0wLjAxYy0wLjg1LDAuMDEtMS42NywwLjMxLTIuMzQsMC44NGMtMC43LTAuNTQtMS41Ni0wLjg0LTIuNDUtMC44NGgtMC4wM2MtMC4yOCwwLTAuNTUsMC4wMy0wLjgyLDAuMWMtMC4yNywwLjA2LTAuNTMsMC4xNS0wLjc4LDAuMjdjLTAuMi0wLjExLTAuNDMtMC4xNy0wLjY3LTAuMTdoLTEuMzNjLTAuNzgsMC0xLjQsMC42My0xLjQsMS40djcuMTRjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zM2MwLjc4LDAsMS40MS0wLjYzLDEuNDEtMS40MWMwLDAsMCwwLDAsMFY5LjM1YzAuMDMtMC4zNCwwLjIyLTAuNTYsMC4zNC0wLjU2YzAuMTcsMCwwLjM2LDAuMTcsMC4zNiwwLjQ1djQuMzVjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zNGMwLjc4LDAsMS40LTAuNjMsMS40LTEuNGwtMC4wMS00LjM1YzAuMDYtMC4zLDAuMjQtMC40NSwwLjMzLTAuNDVjMC4xNywwLDAuMzYsMC4xNywwLjM2LDAuNDV2NC4zNWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjM0YzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0wLjM2YzAuOTEsMS4yMywyLjM0LDEuOTYsMy44NywxLjk2YzAuNywwLDEuMzktMC4xNSwyLjAyLTAuNDVjMC4yMywwLjE2LDAuNTEsMC4yNSwwLjgsMC4yNWgxLjMyYzAuMjksMCwwLjU3LTAuMDksMC44LTAuMjV2MS45MWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjMzYzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0xLjY5YzAuNDYsMC4xNCwwLjk0LDAuMjIsMS40MiwwLjIxYzEuNjIsMCwzLjA3LTAuODMsMy45Ny0yLjF2MC41YzAsMC43OCwwLjYzLDEuNCwxLjQsMS40aDEuMzNjMC4yOSwwLDAuNTctMC4wOSwwLjgtMC4yNWMwLjYzLDAuMywxLjMyLDAuNDUsMi4wMiwwLjQ1YzEuODMsMCwzLjQzLTEuMDUsNC4yOC0yLjZjMS40NywyLjUyLDQuNzEsMy4zNiw3LjIyLDEuODljMC4xNy0wLjEsMC4zNC0wLjIxLDAuNS0wLjM0YzAuMjEsMC41MiwwLjcyLDAuODcsMS4yOSwwLjg2aDEuNTNjMC41MywwLDEuMDMtMC4yOCwxLjMtMC43NGwwLjM1LTAuNThsMC4zNSwwLjU4YzAuMjgsMC40NiwwLjc3LDAuNzQsMS4zMSwwLjc0aDEuNTJjMC43NywwLDEuMzktMC42MywxLjM4LTEuMzlDODAuNDcsMTMuMzgsODAuNDIsMTMuMTcsODAuMzIsMTIuOTdMODAuMzIsMTIuOTd6IE0zNC4xNSwxMy44MWgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuNzYsMC0xLjM5LDAuNjctMS41MSwxLjU0bDAuMDEsNC40NGMwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjM0Yy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjkuMjRjMC0wLjkzLTAuNy0xLjYzLTEuNTQtMS42M2MtMC44MSwwLTEuNDcsMC43NS0xLjUyLDEuNzF2NC4yN2MwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjMzYy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjYuNDRjMC4wMS0wLjEyLDAuMS0wLjIxLDAuMjItMC4yMWgxLjMzYzAuMTIsMCwwLjIxLDAuMSwwLjIyLDAuMjF2MC42M2MwLjQ4LTAuNjUsMS4yNC0xLjA0LDIuMDYtMS4wNWgwLjAzYzEuMDQsMCwxLjk5LDAuNTcsMi40OCwxLjQ4YzAuNDMtMC45LDEuMzMtMS40OCwyLjMyLTEuNDljMS41NCwwLDIuNzksMS4xOSwyLjc2LDIuNjVsMC4wMSw0LjkxQzM0LjM3LDEzLjcsMzQuMjcsMTMuOCwzNC4xNSwxMy44MUMzNC4xNSwxMy44MSwzNC4xNSwxMy44MSwzNC4xNSwxMy44MXogTTQzLjc4LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJ2LTAuNzFDNDEuMzQsMTMuNiw0MC40LDE0LDM5LjQyLDE0Yy0yLjA3LDAtMy43NS0xLjc4LTMuNzUtMy45OXMxLjY5LTMuOTksMy43NS0zLjk5YzAuOTgsMCwxLjkyLDAuNDEsMi42LDEuMTJ2LTAuN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMS0wLjAxLDAuMjEsMC4wOCwwLjIyLDAuMmMwLDAuMDEsMCwwLjAxLDAsMC4wMlYxMy41OXogTTQ5LjkxLDE0Yy0wLjk4LDAtMS45Mi0wLjQxLTIuNi0xLjEydjMuNzhjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ1YzAtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMiwwLjEsMC4yMiwwLjIydjAuN2MwLjY4LTAuNzIsMS42Mi0xLjEyLDIuNi0xLjEyYzIuMDcsMCwzLjc1LDEuNzcsMy43NSwzLjk4UzUxLjk4LDE0LDQ5LjkxLDE0eiBNNjMuMDksMTAuODdDNjIuNzIsMTIuNjUsNjEuMjIsMTQsNTkuNDMsMTRjLTAuOTgsMC0xLjkyLTAuNDEtMi42LTEuMTJ2MC43YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWMy4zN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMiwwLDAuMjIsMC4xLDAuMjIsMC4yMnYzLjc4YzAuNjgtMC43MSwxLjYyLTEuMTIsMi42LTEuMTFjMS43OSwwLDMuMjksMS4zMywzLjY2LDMuMTJDNjMuMjEsOS43Myw2My4yMSwxMC4zMSw2My4wOSwxMC44N0w2My4wOSwxMC44N0w2My4wOSwxMC44N3ogTTY4LjI2LDE0LjAxYy0xLjksMC4wMS0zLjU1LTEuMjktMy45Ny0zLjE0Yy0wLjEyLTAuNTYtMC4xMi0xLjEzLDAtMS42OWMwLjQyLTEuODUsMi4wNy0zLjE1LDMuOTctMy4xNGMyLjI1LDAsNC4wNiwxLjc4LDQuMDYsMy45OVM3MC41LDE0LjAxLDY4LjI2LDE0LjAxTDY4LjI2LDE0LjAxeiBNNzkuMDksMTMuODFoLTEuNTNjLTAuMTIsMC0wLjIzLTAuMDYtMC4yOS0wLjE2bC0xLjM3LTIuMjhsLTEuMzcsMi4yOGMtMC4wNiwwLjEtMC4xNywwLjE2LTAuMjksMC4xNmgtMS41M2MtMC4wNCwwLTAuMDgtMC4wMS0wLjExLTAuMDNjLTAuMDktMC4wNi0wLjEyLTAuMTgtMC4wNi0wLjI3YzAsMCwwLDAsMCwwbDIuMzEtMy41bC0yLjI4LTMuNDdjLTAuMDItMC4wMy0wLjAzLTAuMDctMC4wMy0wLjExYzAtMC4xMSwwLjA5LTAuMiwwLjItMC4yaDEuNTNjMC4xMiwwLDAuMjMsMC4wNiwwLjI5LDAuMTZsMS4zNCwyLjI1bDEuMzQtMi4yNWMwLjA2LTAuMSwwLjE3LTAuMTYsMC4yOS0wLjE2aDEuNTNjMC4wNCwwLDAuMDgsMC4wMSwwLjExLDAuMDNjMC4wOSwwLjA2LDAuMTIsMC4xOCwwLjA2LDAuMjdjMCwwLDAsMCwwLDBMNzYuOTYsMTBsMi4zMSwzLjVjMC4wMiwwLjAzLDAuMDMsMC4wNywwLjAzLDAuMTFDNzkuMjksMTMuNzIsNzkuMiwxMy44MSw3OS4wOSwxMy44MUM3OS4wOSwxMy44MSw3OS4wOSwxMy44MSw3OS4wOSwxMy44MUw3OS4wOSwxMy44MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAsMS4yMWMtNC44NywwLTguODEsMy45NS04LjgxLDguODFzMy45NSw4LjgxLDguODEsOC44MXM4LjgxLTMuOTUsOC44MS04LjgxQzE4LjgxLDUuMTUsMTQuODcsMS4yMSwxMCwxLjIxeiBNMTQuMTgsMTIuMTljLTEuODQsMS44NC00LjU1LDIuMi02LjM4LDIuMmMtMC42NywwLTEuMzQtMC4wNS0yLTAuMTVjMCwwLTAuOTctNS4zNywyLjA0LTguMzljMC43OS0wLjc5LDEuODYtMS4yMiwyLjk4LTEuMjJjMS4yMSwwLDIuMzcsMC40OSwzLjIzLDEuMzVDMTUuOCw3LjczLDE1Ljg1LDEwLjUsMTQuMTgsMTIuMTl6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTEwLDAuMDJjLTUuNTIsMC0xMCw0LjQ4LTEwLDEwczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMEMxOS45OSw0LjUsMTUuNTIsMC4wMiwxMCwwLjAyeiBNMTAsMTguODNjLTQuODcsMC04LjgxLTMuOTUtOC44MS04LjgxUzUuMTMsMS4yLDEwLDEuMnM4LjgxLDMuOTUsOC44MSw4LjgxQzE4LjgxLDE0Ljg5LDE0Ljg3LDE4LjgzLDEwLDE4LjgzeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNC4wNCw1Ljk4Yy0xLjc1LTEuNzUtNC41My0xLjgxLTYuMi0wLjE0QzQuODMsOC44Niw1LjgsMTQuMjMsNS44LDE0LjIzczUuMzcsMC45Nyw4LjM5LTIuMDRDMTUuODUsMTAuNSwxNS44LDcuNzMsMTQuMDQsNS45OHogTTExLjg4LDkuODdsLTAuODcsMS43OGwtMC44Ni0xLjc4TDguMzgsOS4wMWwxLjc3LTAuODZsMC44Ni0xLjc4bDAuODcsMS43OGwxLjc3LDAuODZMMTEuODgsOS44N3oiLz48cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjEzLjY1LDkuMDEgMTEuODgsOS44NyAxMS4wMSwxMS42NSAxMC4xNSw5Ljg3IDguMzgsOS4wMSAxMC4xNSw4LjE1IDExLjAxLDYuMzcgMTEuODgsOC4xNSAiLz48L2c+PC9zdmc+);\n\tbackground-repeat: no-repeat;\n\tbackground-position: 0 0;\n  background-size: 65px 20px;\n  cursor: pointer;\n}",""])},function(t,e,n){var i,o,r;
/* @license
Papa Parse
v4.6.3
https://github.com/mholt/PapaParse
License: MIT
*/Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,e,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},i=!n.document&&!!n.postMessage,o=i&&/(\?|&)papaworker(=|&|$)/.test(n.location.search),r=!1,a={},s=0,l={parse:function(e,i){var o=(i=i||{}).dynamicTyping||!1;if(M(o)&&(i.dynamicTypingFunction=o,o={}),i.dynamicTyping=o,i.transform=!!M(i.transform)&&i.transform,i.worker&&l.WORKERS_SUPPORTED){var u=function(){if(!l.WORKERS_SUPPORTED)return!1;if(!r&&null===l.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=l.SCRIPT_PATH||t;e+=(-1!==e.indexOf("?")?"&":"?")+"papaworker";var i=new n.Worker(e);return i.onmessage=y,i.id=s++,a[i.id]=i}();return u.userStep=i.step,u.userChunk=i.chunk,u.userComplete=i.complete,u.userError=i.error,i.step=M(i.step),i.chunk=M(i.chunk),i.complete=M(i.complete),i.error=M(i.error),delete i.worker,void u.postMessage({input:e,config:i,workerId:u.id})}var c=null;return l.NODE_STREAM_INPUT,"string"==typeof e?c=i.download?new h(i):new d(i):!0===e.readable&&M(e.read)&&M(e.on)?c=new f(i):(n.File&&e instanceof File||e instanceof Object)&&(c=new p(i)),c.stream(e)},unparse:function(t,e){var n=!1,i=!0,o=",",r="\r\n",a='"',s=!1;"object"==typeof e&&("string"!=typeof e.delimiter||l.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(o=e.delimiter),("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(s=e.skipEmptyLines),"string"==typeof e.newline&&(r=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(i=e.header));var u=new RegExp(g(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return h(null,t,s);if("object"==typeof t[0])return h(c(t[0]),t,s)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:c(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),h(t.fields||[],t.data||[],s);throw"exception: Unable to serialize unrecognized input";function c(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function h(t,e,n){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var s=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(s&&i){for(var u=0;u<t.length;u++)0<u&&(a+=o),a+=p(t[u],u);0<e.length&&(a+=r)}for(var c=0;c<e.length;c++){var h=s?t.length:e[c].length,d=!1,f=s?0===Object.keys(e[c]).length:0===e[c].length;if(n&&!s&&(d="greedy"===n?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===n&&s){for(var m=[],g=0;g<h;g++){var v=l?t[g]:g;m.push(e[c][v])}d=""===m.join("").trim()}if(!d){for(var y=0;y<h;y++){0<y&&!f&&(a+=o);var _=s&&l?t[y]:y;a+=p(e[c][_],y)}c<e.length-1&&(!n||0<h&&!f)&&(a+=r)}}return a}function p(t,e){return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(t=t.toString().replace(u,a+a),"boolean"==typeof n&&n||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(t,l.BAD_DELIMITERS)||-1<t.indexOf(o)||" "===t.charAt(0)||" "===t.charAt(t.length-1)?a+t+a:t)}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\ufeff",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!i&&!!n.Worker,l.SCRIPT_PATH=null,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=v,l.ParserHandle=m,l.NetworkStreamer=h,l.FileStreamer=p,l.StringStreamer=d,l.ReadableStreamStreamer=f,n.jQuery){var u=n.jQuery;u.fn.parse=function(t){var e=t.config||{},i=[];return this.each((function(t){if("INPUT"!==u(this).prop("tagName").toUpperCase()||"file"!==u(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)i.push({file:this.files[o],inputElem:this,instanceConfig:u.extend({},e)})})),o(),this;function o(){if(0!==i.length){var e,n,o,a=i[0];if(M(t.before)){var s=t.before(a.file,a.inputElem);if("object"==typeof s){if("abort"===s.action)return e=a.file,n=a.inputElem,o=s.reason,void(M(t.error)&&t.error({name:"AbortError"},e,n,o));if("skip"===s.action)return void r();"object"==typeof s.config&&(a.instanceConfig=u.extend(a.instanceConfig,s.config))}else if("skip"===s)return void r()}var c=a.instanceConfig.complete;a.instanceConfig.complete=function(t){M(c)&&c(t,a.file,a.inputElem),r()},l.parse(a.file,a.instanceConfig)}else M(t.complete)&&t.complete()}function r(){i.splice(0,1),o()}}}function c(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=w(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new m(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1;var r=this._partialLine+t;this._partialLine="";var a=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=a.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),a&&a.data&&(this._rowCount+=a.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)n.postMessage({results:a,workerId:l.WORKER_ID,finished:u});else if(M(this._config.chunk)&&!e){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return;a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!u||!M(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||a&&a.meta.paused||this._nextChunk(),a}},this._sendError=function(t){M(this._config.error)?this._config.error(t):o&&this._config.error&&n.postMessage({workerId:l.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),c.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=x(this._chunkLoaded,this),e.onerror=x(this._chunkError,this)),e.open("GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var n in t)e.setRequestHeader(n,t[n])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+o),e.setRequestHeader("If-None-Match","webkit-no-cache")}try{e.send()}catch(t){this._chunkError(t.message)}i&&0===e.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function p(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),c.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=x(this._chunkLoaded,this),e.onerror=x(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,o)}var r=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function d(t){var e;c.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,n=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(n)}}}function f(t){c.call(this,t=t||{});var e=[],n=!0,i=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=x((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=x((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=x((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=x((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function m(t){var e,n,i,o=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,r=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,a=this,s=0,u=0,c=!1,h=!1,p=[],d={data:[],errors:[],meta:{}};if(M(t.step)){var f=t.step;t.step=function(e){if(d=e,_())y();else{if(y(),0===d.data.length)return;s+=e.data.length,t.preview&&s>t.preview?n.abort():f(d,a)}}}function m(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function y(){if(d&&i&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines)for(var e=0;e<d.data.length;e++)m(d.data[e])&&d.data.splice(e--,1);return _()&&function(){if(d){for(var e=0;_()&&e<d.data.length;e++)for(var n=0;n<d.data[e].length;n++){var i=d.data[e][n];t.trimHeaders&&(i=i.trim()),p.push(i)}d.data.splice(0,1)}}(),function(){if(!d||!t.header&&!t.dynamicTyping&&!t.transform)return d;for(var e=0;e<d.data.length;e++){var n,i=t.header?{}:[];for(n=0;n<d.data[e].length;n++){var o=n,r=d.data[e][n];t.header&&(o=n>=p.length?"__parsed_extra":p[n]),t.transform&&(r=t.transform(r,o)),r=b(o,r),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(r)):i[o]=r}d.data[e]=i,t.header&&(n>p.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+n,u+e):n<p.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+n,u+e))}return t.header&&d.meta&&(d.meta.fields=p),u+=d.data.length,d}()}function _(){return t.header&&0===p.length}function b(e,n){return i=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[i]&&(t.dynamicTyping[i]=t.dynamicTypingFunction(i)),!0===(t.dynamicTyping[i]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(o.test(n)?parseFloat(n):r.test(n)?new Date(n):""===n?null:n):n;var i}function x(t,e,n,i){d.errors.push({type:t,code:e,message:n,row:i})}this.parse=function(o,r,a){var s=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var n=new RegExp(g(e)+"([^]*?)"+g(e),"gm"),i=(t=t.replace(n,"")).split("\r"),o=t.split("\n"),r=1<o.length&&o[0].length<i[0].length;if(1===i.length||r)return"\n";for(var a=0,s=0;s<i.length;s++)"\n"===i[s][0]&&a++;return a>=i.length/2?"\r\n":"\r"}(o,s)),i=!1,t.delimiter)M(t.delimiter)&&(t.delimiter=t.delimiter(o),d.meta.delimiter=t.delimiter);else{var u=function(e,n,i,o){for(var r,a,s,u=[",","\t","|",";",l.RECORD_SEP,l.UNIT_SEP],c=0;c<u.length;c++){var h=u[c],p=0,d=0,f=0;s=void 0;for(var g=new v({comments:o,delimiter:h,newline:n,preview:10}).parse(e),y=0;y<g.data.length;y++)if(i&&m(g.data[y]))f++;else{var _=g.data[y].length;d+=_,void 0!==s?1<_&&(p+=Math.abs(_-s),s=_):s=0}0<g.data.length&&(d/=g.data.length-f),(void 0===a||a<p)&&1.99<d&&(a=p,r=h)}return{successful:!!(t.delimiter=r),bestDelimiter:r}}(o,t.newline,t.skipEmptyLines,t.comments);u.successful?t.delimiter=u.bestDelimiter:(i=!0,t.delimiter=l.DefaultDelimiter),d.meta.delimiter=t.delimiter}var h=w(t);return t.preview&&t.header&&h.preview++,e=o,n=new v(h),d=n.parse(e,r,a),y(),c?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,n.abort(),e=e.substr(n.getCharIndex())},this.resume=function(){c=!1,a.streamer.parseChunk(e,!0)},this.aborted=function(){return h},this.abort=function(){h=!0,n.abort(),d.meta.aborted=!0,M(t.complete)&&t.complete(d),e=""}}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(t){var e,n=(t=t||{}).delimiter,i=t.newline,o=t.comments,r=t.step,a=t.preview,s=t.fastMode,u=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(u=t.escapeChar),("string"!=typeof n||-1<l.BAD_DELIMITERS.indexOf(n))&&(n=","),o===n)throw"Comment character same as delimiter";!0===o?o="#":("string"!=typeof o||-1<l.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var c=0,h=!1;this.parse=function(t,l,p){if("string"!=typeof t)throw"Input must be a string";var d=t.length,f=n.length,m=i.length,v=o.length,y=M(r),_=[],b=[],w=[],x=c=0;if(!t)return I();if(s||!1!==s&&-1===t.indexOf(e)){for(var E=t.split(i),L=0;L<E.length;L++){if(w=E[L],c+=w.length,L!==E.length-1)c+=i.length;else if(p)return I();if(!o||w.substr(0,v)!==o){if(y){if(_=[],A(w.split(n)),z(),h)return I()}else A(w.split(n));if(a&&a<=L)return _=_.slice(0,a),I(!0)}}return I()}for(var T,k=t.indexOf(n,c),S=t.indexOf(i,c),C=new RegExp(g(u)+g(e),"g");;)if(t[c]!==e)if(o&&0===w.length&&t.substr(c,v)===o){if(-1===S)return I();c=S+m,S=t.indexOf(i,c),k=t.indexOf(n,c)}else if(-1!==k&&(k<S||-1===S))w.push(t.substring(c,k)),c=k+f,k=t.indexOf(n,c);else{if(-1===S)break;if(w.push(t.substring(c,S)),N(S+m),y&&(z(),h))return I();if(a&&_.length>=a)return I(!0)}else for(T=c,c++;;){if(-1===(T=t.indexOf(e,T+1)))return p||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:c}),P();if(T===d-1)return P(t.substring(c,T).replace(C,e));if(e!==u||t[T+1]!==u){if(e===u||0===T||t[T-1]!==u){var j=D(-1===S?k:Math.min(k,S));if(t[T+1+j]===n){w.push(t.substring(c,T).replace(C,e)),c=T+1+j+f,k=t.indexOf(n,c),S=t.indexOf(i,c);break}var O=D(S);if(t.substr(T+1+O,m)===i){if(w.push(t.substring(c,T).replace(C,e)),N(T+1+O+m),k=t.indexOf(n,c),y&&(z(),h))return I();if(a&&_.length>=a)return I(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:c}),T++}}else T++}return P();function A(t){_.push(t),x=c}function D(e){var n=0;if(-1!==e){var i=t.substring(T+1,e);i&&""===i.trim()&&(n=i.length)}return n}function P(e){return p||(void 0===e&&(e=t.substr(c)),w.push(e),c=d,A(w),y&&z()),I()}function N(e){c=e,A(w),w=[],S=t.indexOf(i,c)}function I(t){return{data:_,errors:b,meta:{delimiter:n,linebreak:i,aborted:h,truncated:!!t,cursor:x+(l||0)}}}function z(){r(I()),_=[],b=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return c}}function y(t){var e=t.data,n=a[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){i=!0,_(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(M(n.userStep)){for(var r=0;r<e.results.data.length&&(n.userStep({data:[e.results.data[r]],errors:e.results.errors,meta:e.results.meta},o),!i);r++);delete e.results}else M(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&_(e.workerId,e.results)}function _(t,e){var n=a[t];M(n.userComplete)&&n.userComplete(e),n.terminate(),delete a[t]}function b(){throw"Not implemented."}function w(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=w(t[n]);return e}function x(t,e){return function(){t.apply(e,arguments)}}function M(t){return"function"==typeof t}return o?n.onmessage=function(t){var e=t.data;if(void 0===l.WORKER_ID&&e&&(l.WORKER_ID=e.workerId),"string"==typeof e.input)n.postMessage({workerId:l.WORKER_ID,results:l.parse(e.input,e.config),finished:!0});else if(n.File&&e.input instanceof File||e.input instanceof Object){var i=l.parse(e.input,e.config);i&&n.postMessage({workerId:l.WORKER_ID,results:i,finished:!0})}}:l.WORKERS_SUPPORTED&&(e=document.getElementsByTagName("script"),t=e.length?e[e.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",(function(){r=!0}),!0):r=!0),(h.prototype=Object.create(c.prototype)).constructor=h,(p.prototype=Object.create(c.prototype)).constructor=p,(d.prototype=Object.create(d.prototype)).constructor=d,(f.prototype=Object.create(c.prototype)).constructor=f,l})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3),a=l(r),s=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}var u={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},c=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],h=function(t,e){e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.letterSpacing=t.letterSpacing,e.style.textTransform=t.textTransform},p=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),d=function(){return p?"_"+Math.random().toString(36).substr(2,12):void 0},f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.inputRef=function(t){n.input=t,"function"==typeof n.props.inputRef&&n.props.inputRef(t)},n.placeHolderSizerRef=function(t){n.placeHolderSizer=t},n.sizerRef=function(t){n.sizer=t},n.state={inputWidth:t.minWidth,inputId:t.id||d()},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=t.id;e!==this.props.id&&this.setState({inputId:e||d()})}},{key:"componentDidUpdate",value:function(t,e){e.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var t=this.input&&window.getComputedStyle(this.input);t&&(h(t,this.sizer),this.placeHolderSizer&&h(t,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var t=void 0;t=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(t+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(t=this.props.minWidth),t!==this.state.inputWidth&&this.setState({inputWidth:t})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var t=this.props.injectStyles;return p&&t?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var t=[this.props.defaultValue,this.props.value,""].reduce((function(t,e){return null!=t?t:e})),e=i({},this.props.style);e.display||(e.display="inline-block");var n=i({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),o=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(this.props,[]);return function(t){c.forEach((function(e){return delete t[e]}))}(o),o.className=this.props.inputClassName,o.id=this.state.inputId,o.style=n,a.default.createElement("div",{className:this.props.className,style:e},this.renderStyles(),a.default.createElement("input",i({},o,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:u},t),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:u},this.props.placeholder):null)}}]),e}(r.Component);f.propTypes={className:s.default.string,defaultValue:s.default.any,extraWidth:s.default.oneOfType([s.default.number,s.default.string]),id:s.default.string,injectStyles:s.default.bool,inputClassName:s.default.string,inputRef:s.default.func,inputStyle:s.default.object,minWidth:s.default.oneOfType([s.default.number,s.default.string]),onAutosize:s.default.func,onChange:s.default.func,placeholder:s.default.string,placeholderIsMinWidth:s.default.bool,style:s.default.object,value:s.default.any},f.defaultProps={minWidth:1,injectStyles:!0},e.default=f},function(t,e,n){var i;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];if(i){var r=typeof i;if("string"===r||"number"===r)t.push(i);else if(Array.isArray(i)&&i.length){var a=o.apply(null,i);a&&t.push(a)}else if("object"===r)for(var s in i)n.call(i,s)&&i[s]&&t.push(s)}}return t.join(" ")}t.exports?(o.default=o,t.exports=o):void 0===(i=function(){return o}.apply(e,[]))||(t.exports=i)}()},function(t,e,n){"use strict";var i=n(3),o=n(715);if(void 0===i)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var r=(new i.Component).updater;t.exports=o(i.Component,i.isValidElement,r)},function(t,e,n){"use strict";var i=n(104),o=n(716),r=n(717);t.exports=function(t,e,n){var a=[],s={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},l={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},u={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)h(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=i({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=i({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=d(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=i({},t.propTypes,e)},statics:function(t,e){!function(t,e){if(!e)return;for(var n in e){var i=e[n];if(e.hasOwnProperty(n)){if(r(!(n in u),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in t){var o=l.hasOwnProperty(n)?l[n]:null;return r("DEFINE_MANY_MERGED"===o,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=d(t[n],i))}t[n]=i}}}(t,e)},autobind:function(){}};function c(t,e){var n=s.hasOwnProperty(e)?s[e]:null;y.hasOwnProperty(e)&&r("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&r("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function h(t,n){if(n){r("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),r(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var i=t.prototype,o=i.__reactAutoBindPairs;for(var a in n.hasOwnProperty("mixins")&&u.mixins(t,n.mixins),n)if(n.hasOwnProperty(a)&&"mixins"!==a){var l=n[a],h=i.hasOwnProperty(a);if(c(h,a),u.hasOwnProperty(a))u[a](t,l);else{var p=s.hasOwnProperty(a);if("function"==typeof l&&!p&&!h&&!1!==n.autobind)o.push(a,l),i[a]=l;else if(h){var m=s[a];r(p&&("DEFINE_MANY_MERGED"===m||"DEFINE_MANY"===m),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,a),"DEFINE_MANY_MERGED"===m?i[a]=d(i[a],l):"DEFINE_MANY"===m&&(i[a]=f(i[a],l))}else i[a]=l}}}else;}function p(t,e){for(var n in r(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),e)e.hasOwnProperty(n)&&(r(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function d(t,e){return function(){var n=t.apply(this,arguments),i=e.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return p(o,n),p(o,i),o}}function f(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function m(t,e){return e.bind(t)}var g={componentDidMount:function(){this.__isMounted=!0}},v={componentWillUnmount:function(){this.__isMounted=!1}},y={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},_=function(){};return i(_.prototype,t.prototype,y),function(t){var e=function(t,i,a){this.__reactAutoBindPairs.length&&function(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];t[i]=m(t,o)}}(this),this.props=t,this.context=i,this.refs=o,this.updater=a||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;r("object"==typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=s};for(var i in e.prototype=new _,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],a.forEach(h.bind(null,e)),h(e,g),h(e,t),h(e,v),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),r(e.prototype.render,"createClass(...): Class specification must implement a `render` method."),s)e.prototype[i]||(e.prototype[i]=null);return e}}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,o,r,a,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,o,r,a,s],c=0;(l=new Error(e.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(t,e,n){var i=n(593),o=n(719),r=n(720),a=n(533),s=n(581),l=n(541),u=Object.prototype.hasOwnProperty,c=r((function(t,e){if(s(e)||a(e))o(e,l(e),t);else for(var n in e)u.call(e,n)&&i(t,n,e[n])}));t.exports=c},function(t,e,n){var i=n(593),o=n(594);t.exports=function(t,e,n,r){var a=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var u=e[s],c=r?r(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),a?o(n,u,c):i(n,u,c)}return n}},function(t,e,n){var i=n(721),o=n(591);t.exports=function(t){return i((function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(r--,a):void 0,s&&o(n[0],n[1],s)&&(a=r<3?void 0:a,r=1),e=Object(e);++i<r;){var l=n[i];l&&t(e,l,i,a)}return e}))}},function(t,e,n){var i=n(532),o=n(722),r=n(724);t.exports=function(t,e){return r(o(t,e,i),t+"")}},function(t,e,n){var i=n(723),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),l=Array(s);++a<s;)l[a]=r[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=r[a];return u[e]=n(l),i(t,this,u)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var i=n(725),o=n(727)(i);t.exports=o},function(t,e,n){var i=n(726),o=n(595),r=n(532),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:r;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,i=0;return function(){var o=n(),r=16-(o-i);if(i=o,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){!function(){var e=function(t,n){var i=this;e.count=(e.count||0)+1,this.count=e.count,this.isOpened=!1,this.input=o(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=n=n||{},function(t,e,n){for(var i in e){var o=e[i],r=t.input.getAttribute("data-"+i.toLowerCase());t[i]="number"==typeof o?parseInt(r):!1===o?null!==r:o instanceof Function?null:r,t[i]||0===t[i]||(t[i]=i in n?n[i]:o)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:e.DATA,filter:e.FILTER_CONTAINS,sort:!1!==n.sort&&e.SORT_BYLENGTH,container:e.CONTAINER,item:e.ITEM,replace:e.REPLACE,tabSelect:!1},n),this.index=-1,this.container=this.container(t),this.ul=o.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=o.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(t){var e=t.keyCode;i.opened&&(13===e&&i.selected?(t.preventDefault(),i.select(void 0,void 0,t)):9===e&&i.selected&&i.tabSelect?i.select(void 0,void 0,t):27===e?i.close({reason:"esc"}):38!==e&&40!==e||(t.preventDefault(),i[38===e?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(t){t.preventDefault()},click:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&0===t.button&&(t.preventDefault(),i.select(e,t.target,t))}}}},o.bind(this.input,this._events.input),o.bind(this.input.form,this._events.form),o.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],e.all.push(this)};function n(t){var e=Array.isArray(t)?{label:t[0],value:t[1]}:"object"==typeof t&&"label"in t&&"value"in t?t:{label:t,value:t};this.label=e.label||e.value,this.value=e.value}e.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if((t=o(t))&&t.children){var e=[];i.apply(t.children).forEach((function(t){if(!t.disabled){var n=t.textContent.trim(),i=t.value||n,o=t.label||n;""!==i&&e.push({label:o,value:i})}})),this._list=e}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(t){this.opened&&(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),o.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),o.fire(this.input,"awesomplete-open")},destroy:function(){if(o.unbind(this.input,this._events.input),o.unbind(this.input.form,this._events.form),!this.options.container){var t=this.container.parentNode;t.insertBefore(this.input,this.container),t.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var n=e.all.indexOf(this);-1!==n&&e.all.splice(n,1)},next:function(){var t=this.ul.children.length;this.goto(this.index<t-1?this.index+1:t?0:-1)},previous:function(){var t=this.ul.children.length,e=this.index-1;this.goto(this.selected&&-1!==e?e:t-1)},goto:function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent+", list item "+(t+1)+" of "+e.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=e[t].offsetTop-this.ul.clientHeight+e[t].clientHeight,o.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,e,n){if(t?this.index=o.siblingIndex(t):t=this.ul.children[this.index],t){var i=this.suggestions[this.index];o.fire(this.input,"awesomplete-select",{text:i,origin:e||t,originalEvent:n})&&(this.replace(i),this.close({reason:"select"}),o.fire(this.input,"awesomplete-selectcomplete",{text:i,originalEvent:n}))}},evaluate:function(){var t=this,e=this.input.value;e.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map((function(i){return new n(t.data(i,e))})).filter((function(n){return t.filter(n,e)})),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach((function(n,i){t.ul.appendChild(t.item(n,e,i))})),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},e.all=[],e.FILTER_CONTAINS=function(t,e){return RegExp(o.regExpEscape(e.trim()),"i").test(t)},e.FILTER_STARTSWITH=function(t,e){return RegExp("^"+o.regExpEscape(e.trim()),"i").test(t)},e.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:t<e?-1:1},e.CONTAINER=function(t){return o.create("div",{className:"awesomplete",around:t})},e.ITEM=function(t,e,n){var i=""===e.trim()?t:t.replace(RegExp(o.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>");return o.create("li",{innerHTML:i,role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+n})},e.REPLACE=function(t){this.input.value=t.value},e.DATA=function(t){return t},Object.defineProperty(n.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),n.prototype.toString=n.prototype.valueOf=function(){return""+this.label};var i=Array.prototype.slice;function o(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function r(t,e){return i.call((e||document).querySelectorAll(t))}function a(){r("input.awesomplete").forEach((function(t){new e(t)}))}o.create=function(t,e){var n=document.createElement(t);for(var i in e){var r=e[i];if("inside"===i)o(r).appendChild(n);else if("around"===i){var a=o(r);a.parentNode.insertBefore(n,a),n.appendChild(a),null!=a.getAttribute("autofocus")&&a.focus()}else i in n?n[i]=r:n.setAttribute(i,r)}return n},o.bind=function(t,e){if(t)for(var n in e){var i=e[n];n.split(/\s+/).forEach((function(e){t.addEventListener(e,i)}))}},o.unbind=function(t,e){if(t)for(var n in e){var i=e[n];n.split(/\s+/).forEach((function(e){t.removeEventListener(e,i)}))}},o.fire=function(t,e,n){var i=document.createEvent("HTMLEvents");for(var o in i.initEvent(e,!0,!0),n)i[o]=n[o];return t.dispatchEvent(i)},o.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},o.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},"undefined"!=typeof self&&(self.Awesomplete=e),"undefined"!=typeof Document&&("loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)),e.$=o,e.$$=r,t.exports&&(t.exports=e)}()},function(t,e,n){var i=n(730);"string"==typeof i&&(i=[[t.i,i,""]]);n(40)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(39)(!1)).push([t.i,'.awesomplete [hidden] {\n    display: none;\n}\n\n.awesomplete .visually-hidden {\n    position: absolute;\n    clip: rect(0, 0, 0, 0);\n}\n\n.awesomplete {\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n\n.awesomplete > input {\n    display: block;\n}\n\n.awesomplete > ul {\n    position: absolute;\n    left: 0;\n    z-index: 1;\n    min-width: 100%;\n    box-sizing: border-box;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    background: #fff;\n    word-wrap: break-word;\n}\n\n.awesomplete > ul:empty {\n    display: none;\n}\n\n.awesomplete > ul {\n  width: 80%;\n  border-radius: .3em;\n  margin: .2em 0 0;\n  background: hsla(0,0%,100%,.9);\n  background: linear-gradient(to bottom right, white, hsla(0,0%,100%,.8));\n  border: 1px solid rgba(0,0,0,.3);\n  box-shadow: .05em .2em .6em rgba(0,0,0,.2);\n  text-shadow: none;\n}\n\n@supports (transform: scale(0)) {\n  .awesomplete > ul {\n    transition: .3s cubic-bezier(.4,.2,.5,1.4);\n    transform-origin: 1.43em -.43em;\n  }\n\n  .awesomplete > ul[hidden],\n  .awesomplete > ul:empty {\n    opacity: 0;\n    transform: scale(0);\n    display: block;\n    transition-timing-function: ease;\n  }\n}\n\n  /* Pointer */\n  .awesomplete > ul:before {\n    content: "";\n    position: absolute;\n    top: -.43em;\n    left: 1em;\n    width: 0; height: 0;\n    padding: .4em;\n    background: white;\n    border: inherit;\n    border-right: 0;\n    border-bottom: 0;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .awesomplete > ul > li {\n    position: relative;\n    padding: .2em .5em;\n    cursor: pointer;\n  }\n\n  .awesomplete > ul > li:hover {\n    background: hsl(200, 40%, 80%);\n    color: black;\n  }\n\n  .awesomplete > ul > li[aria-selected="true"] {\n    background: hsl(205, 40%, 40%);\n    color: white;\n  }\n\n  .awesomplete mark {\n    color: rgb(80, 151, 186);\n    background: white;\n  }\n\n  .awesomplete li:hover mark {\n    background: hsl(200, 40%, 80%);\n  }\n',""])},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"c",(function(){return X})),n.d(e,"a",(function(){return $}));var i=n(568),o=n(604),r=n(603),a=function(t){return new Array(t.length)};function s(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}s.prototype={constructor:s,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function l(t,e,n,i,o,r){for(var a,l=0,u=e.length,c=r.length;l<c;++l)(a=e[l])?(a.__data__=r[l],i[l]=a):n[l]=new s(t,r[l]);for(;l<u;++l)(a=e[l])&&(o[l]=a)}function u(t,e,n,i,o,r,a){var l,u,c,h={},p=e.length,d=r.length,f=new Array(p);for(l=0;l<p;++l)(u=e[l])&&(f[l]=c="$"+a.call(u,u.__data__,l,e),c in h?o[l]=u:h[c]=u);for(l=0;l<d;++l)(u=h[c="$"+a.call(t,r[l],l,r)])?(i[l]=u,u.__data__=r[l],h[c]=null):n[l]=new s(t,r[l]);for(l=0;l<p;++l)(u=e[l])&&h[f[l]]===u&&(o[l]=u)}function c(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var h=n(566);function p(t){return function(){this.removeAttribute(t)}}function d(t){return function(){this.removeAttributeNS(t.space,t.local)}}function f(t,e){return function(){this.setAttribute(t,e)}}function m(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function g(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function v(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var y=n(605);function _(t){return function(){delete this[t]}}function b(t,e){return function(){this[t]=e}}function w(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function x(t){return t.trim().split(/^|\s+/)}function M(t){return t.classList||new E(t)}function E(t){this._node=t,this._names=x(t.getAttribute("class")||"")}function L(t,e){for(var n=M(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function T(t,e){for(var n=M(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function k(t){return function(){L(this,t)}}function S(t){return function(){T(this,t)}}function C(t,e){return function(){(e.apply(this,arguments)?L:T)(this,t)}}E.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function j(){this.textContent=""}function O(t){return function(){this.textContent=t}}function A(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function D(){this.innerHTML=""}function P(t){return function(){this.innerHTML=t}}function N(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function I(){this.nextSibling&&this.parentNode.appendChild(this)}function z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var R=n(567);function B(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===R.b&&e.documentElement.namespaceURI===R.b?e.createElement(t):e.createElementNS(n,t)}}function F(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var V=function(t){var e=Object(h.a)(t);return(e.local?F:B)(e)};function W(){return null}function Z(){var t=this.parentNode;t&&t.removeChild(this)}function H(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function U(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var Y=n(548),G=n(569);function q(t,e,n){var i=Object(G.a)(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function K(t,e){return function(){return q(this,t,e)}}function Q(t,e){return function(){return q(this,t,e.apply(this,arguments))}}var X=[null];function $(t,e){this._groups=t,this._parents=e}function J(){return new $([[document.documentElement]],X)}$.prototype=J.prototype={constructor:$,select:function(t){"function"!=typeof t&&(t=Object(i.a)(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var a,s,l=e[r],u=l.length,c=o[r]=new Array(u),h=0;h<u;++h)(a=l[h])&&(s=t.call(a,a.__data__,h,l))&&("__data__"in a&&(s.__data__=a.__data__),c[h]=s);return new $(o,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Object(o.a)(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var s,l=e[a],u=l.length,c=0;c<u;++c)(s=l[c])&&(i.push(t.call(s,s.__data__,c,l)),r.push(s));return new $(i,r)},filter:function(t){"function"!=typeof t&&(t=Object(r.a)(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=i[o]=[],c=0;c<l;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&u.push(a);return new $(i,this._parents)},data:function(t,e){if(!t)return g=new Array(this.size()),p=-1,this.each((function(t){g[++p]=t})),g;var n,i=e?u:l,o=this._parents,r=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=r.length,s=new Array(a),c=new Array(a),h=new Array(a),p=0;p<a;++p){var d=o[p],f=r[p],m=f.length,g=t.call(d,d&&d.__data__,p,o),v=g.length,y=c[p]=new Array(v),_=s[p]=new Array(v);i(d,f,y,_,h[p]=new Array(m),g,e);for(var b,w,x=0,M=0;x<v;++x)if(b=y[x]){for(x>=M&&(M=x+1);!(w=_[M])&&++M<v;);b._next=w||null}}return(s=new $(s,o))._enter=c,s._exit=h,s},enter:function(){return new $(this._enter||this._groups.map(a),this._parents)},exit:function(){return new $(this._exit||this._groups.map(a),this._parents)},join:function(t,e,n){var i=this.enter(),o=this,r=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(o=e(o)),null==n?r.remove():n(r),i&&o?i.merge(o).order():o},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),a=new Array(i),s=0;s<r;++s)for(var l,u=e[s],c=n[s],h=u.length,p=a[s]=new Array(h),d=0;d<h;++d)(l=u[d]||c[d])&&(p[d]=l);for(;s<i;++s)a[s]=e[s];return new $(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,a=o[r];--r>=0;)(i=o[r])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=c);for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var a,s=n[r],l=s.length,u=o[r]=new Array(l),h=0;h<l;++h)(a=s[h])&&(u[h]=a);u.sort(e)}return new $(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var a=i[o];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],a=0,s=r.length;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this},attr:function(t,e){var n=Object(h.a)(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?d:p:"function"==typeof e?n.local?v:g:n.local?m:f)(n,e))},style:y.a,property:function(t,e){return arguments.length>1?this.each((null==e?_:"function"==typeof e?w:b)(t,e)):this.node()[t]},classed:function(t,e){var n=x(t+"");if(arguments.length<2){for(var i=M(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?C:e?k:S)(n,e))},text:function(t){return arguments.length?this.each(null==t?j:("function"==typeof t?A:O)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?D:("function"==typeof t?N:P)(t)):this.node().innerHTML},raise:function(){return this.each(I)},lower:function(){return this.each(z)},append:function(t){var e="function"==typeof t?t:V(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:V(t),o=null==e?W:"function"==typeof e?e:Object(i.a)(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Z)},clone:function(t){return this.select(t?U:H)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:Y.b,dispatch:function(t,e){return this.each(("function"==typeof e?Q:K)(t,e))}};e.b=J},,,function(t,e,n){"use strict";var i={value:function(){}};function o(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new r(i)}function r(t){this._=t}function a(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function s(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function l(t,e,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===e){t[o]=i,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:e,value:n}),t}r.prototype=o.prototype={constructor:r,on:function(t,e){var n,i=this._,o=a(t+"",i),r=-1,u=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++r<u;)if(n=(t=o[r]).type)i[n]=l(i[n],t.name,e);else if(null==e)for(n in i)i[n]=l(i[n],t.name,null);return this}for(;++r<u;)if((n=(t=o[r]).type)&&(n=s(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new r(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),r=0;r<n;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(i=this._[t]).length;r<n;++r)i[r].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}},e.a=o},function(t,e,n){"use strict";var i=n(750);e.a=function(t){return"string"==typeof t?new i.a([[document.querySelector(t)]],[document.documentElement]):new i.a([[t]],i.c)}},function(t,e,n){"use strict";var i=Math.PI,o=2*i,r=o-1e-6;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function s(){return new a}a.prototype=s.prototype={constructor:a,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,o,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,e,n,o,r){t=+t,e=+e,n=+n,o=+o,r=+r;var a=this._x1,s=this._y1,l=n-t,u=o-e,c=a-t,h=s-e,p=c*c+h*h;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(p>1e-6)if(Math.abs(h*l-u*c)>1e-6&&r){var d=n-a,f=o-s,m=l*l+u*u,g=d*d+f*f,v=Math.sqrt(m),y=Math.sqrt(p),_=r*Math.tan((i-Math.acos((m+p-g)/(2*v*y)))/2),b=_/y,w=_/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*h)),this._+="A"+r+","+r+",0,0,"+ +(h*d>c*f)+","+(this._x1=t+w*l)+","+(this._y1=e+w*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,a,s,l){t=+t,e=+e,l=!!l;var u=(n=+n)*Math.cos(a),c=n*Math.sin(a),h=t+u,p=e+c,d=1^l,f=l?a-s:s-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+p:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-p)>1e-6)&&(this._+="L"+h+","+p),n&&(f<0&&(f=f%o+o),f>r?this._+="A"+n+","+n+",0,1,"+d+","+(t-u)+","+(e-c)+"A"+n+","+n+",0,1,"+d+","+(this._x1=h)+","+(this._y1=p):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=i)+","+d+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=e+n*Math.sin(s))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},e.a=s},,function(t,e,n){"use strict";n.r(e);var i=n(59),o=n.n(i),r=n(60),a=n.n(r),s=n(124),l=n.n(s),u=n(82),c=n.n(u),h=n(83),p=n.n(h),d=n(53),f=n.n(d),m=n(16),g=n.n(m),v=n(3),y=n.n(v),_=n(15),b=n.n(_),w=n(46),x=n(527),M=n(526),E=function(t){var e=t.sidebarOpen,n=t.mobileDisplay,i=t.handler,o={visibility:n?"visible":e?"hidden":"visible",width:n?60:14,height:n?60:44,position:"absolute",top:n?15:4,left:n?"auto":0,right:n?20:"auto",zIndex:9e3,backgroundColor:n?M.c:M.j,boxShadow:n?"2px 4px 10px 1px rgba(0, 0, 0, 0.15)":"0px 0px 5px 1px rgba(0, 0, 0, 0.2)",cursor:"pointer",padding:0,transition:"top 0.3s ease-out, left 0.3s ease-out, width 0.3s ease-out, height 0.3s ease-out",borderRadius:n?"45px":"0px 6px 6px 0px"},r={visibility:n?"visible":e?"hidden":"visible",position:"absolute",width:30,height:30,top:"50%",left:"50%",lineHeight:"30px",textAlign:"center",transform:"translate(-50%,-50%)",marginLeft:"auto",marginRight:"auto",verticalAlign:"middle",color:n?"#FFFFFF":"#444",fontSize:n?26:12},a="fa fa-close";return e&&!n?a="fa fa-chevron-left":e||n?e&&n?a="fa fa-close":!e&&n&&(a="fa fa-sliders"):a="fa fa-chevron-right",y.a.createElement("div",{style:o,onClick:i},y.a.createElement("div",{style:r},y.a.createElement("i",{className:a,"aria-hidden":"true"})))},T=n(161),k=n(531),S=n(123),C=n(24),j=n(7),O=n(2),A=n(28),D=n.n(A),P=n(564),N=n.n(P),I=n(565),z=n.n(I),R=n(0),B=n(546),F=n(601),V=n(547),W=n.n(V),Z=n(5);function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var U,Y=function(t){t||(t=window.event),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},G=function(t,e,n){return y.a.createElement("tr",{key:t},y.a.createElement("th",{style:M.e.item},t),y.a.createElement("td",{style:M.e.item},n?y.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},e):e))},q=function(t){return void 0!==t&&t.startsWith("https_")?t.replace("https_","https:"):void 0!==t&&t.startsWith("http_")?t.replace("http_","http:"):t},K=function(t){var e=t.url,n=t.title,i=t.value;return y.a.createElement("tr",null,y.a.createElement("th",{style:M.e.item},n),y.a.createElement("td",{style:M.e.item},y.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},i)))},Q=function(t){var e=t.node,n=Object(Z.a)(e),i=Object(Z.e)(e),o=Object(Z.d)(e,"genbank_accession"),r=Object(Z.d)(e,"gisaid_epi_isl");return Object(O.z)(r)?y.a.createElement(y.a.Fragment,null,y.a.createElement(K,{title:"GISAID EPI ISL",value:r.split("_")[2],url:"https://gisaid.org"}),Object(O.z)(o)?y.a.createElement(K,{title:"Genbank accession",value:o,url:"https://www.ncbi.nlm.nih.gov/nuccore/"+o}):null):Object(O.z)(o)?y.a.createElement(K,{title:"Genbank accession",value:o,url:"https://www.ncbi.nlm.nih.gov/nuccore/"+o}):Object(O.z)(n)&&Object(O.z)(i)?y.a.createElement(K,{url:q(i),value:n,title:"Accession"}):Object(O.z)(n)?G("Accession",n):Object(O.z)(i)?y.a.createElement(K,{title:"Strain URL",url:q(i),value:"click here"}):null},X=function(t){var e=t.node,n=t.t,i=Object(Z.f)(e);if(!i)return null;var o=[];return i.selection_date&&o.push(y.a.createElement("tr",{key:"seldate"},y.a.createElement("th",null,n("Vaccine selected")),y.a.createElement("td",null,i.selection_date))),i.start_date&&o.push(y.a.createElement("tr",{key:"startdate"},y.a.createElement("th",null,n("Vaccine start date")),y.a.createElement("td",null,i.start_date))),i.end_date&&o.push(y.a.createElement("tr",{key:"enddate"},y.a.createElement("th",null,n("Vaccine end date")),y.a.createElement("td",null,i.end_date))),i.serum&&o.push(y.a.createElement("tr",{key:"serum"},y.a.createElement("th",null,n("Serum strain")),y.a.createElement("td",null))),o},$=function(t){var e=t.node,n=t.t,i=Object(Z.c)(e);if(!i)return null;var o=[];return o.push(G(n("Authors"),i.value)),i.title&&"?"!==i.title&&(i.paper_url&&"?"!==i.paper_url?o.push(G(n("Title"),i.title,i.paper_url)):o.push(G(n("Title"),i.title))),i.journal&&"?"!==i.journal&&o.push(G(n("Journal"),i.journal)),1===o.length?o[0]:o},J=function(t){var e=t.children;return y.a.createElement("p",{style:M.e.modalHeading},e)},tt=function(t){var e=t.node,n=t.t,i=Object(Z.d)(e,"num_date");if(!i)return null;var o=Object(Z.d)(e,"num_date",{confidence:!0});return i&&o&&o[0]!==o[1]?y.a.createElement(y.a.Fragment,null,G(n("Inferred collection date"),Object(j.d)(i)),G(n("Date Confidence Interval"),"(".concat(Object(j.d)(o[0]),", ").concat(Object(j.d)(o[1]),")"))):G(n("Collection date"),Object(j.d)(i))},et=function(t){var e=t.node,n=t.trait,i=t.colorings,o=Object(Z.d)(e,n),r=o;"number"==typeof o&&(Number.isInteger(o)||(r=Number.parseFloat(o).toPrecision(3)));var a=i&&i[n]&&i[n].title?i[n].title:n;return Object(O.z)(r)?G(a,r):null},nt=function(t){var e=t.tip,n=t.goAwayCallback,i=t.colorings,o=t.t;if(!e)return null;var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},M.e.panel);r.maxHeight="70%";var a=e.n;return y.a.createElement("div",{style:M.e.modalContainer,onClick:function(){return n(e)}},y.a.createElement("div",{className:"panel",style:r,onClick:function(t){return Y(t)}},y.a.createElement(J,null,a.name),y.a.createElement("table",null,y.a.createElement("tbody",null,y.a.createElement(X,{node:a,t:o}),y.a.createElement(tt,{node:a,t:o}),y.a.createElement($,{node:a,t:o}),function(t){if(!t.node_attrs)return[];var e=["author","div","num_date","gisaid_epi_isl","genbank_accession"];return Object.keys(t.node_attrs).filter((function(t){return!e.includes(t)}))}(a).map((function(t){return y.a.createElement(et,{node:a,trait:t,colorings:i,key:t})})),y.a.createElement(Q,{node:a}))),y.a.createElement("p",{style:M.e.comment},o("Click outside this box to go back to the tree"))))},it=n(57),ot=n(13),rt=n.n(ot),at=n(18),st=function(t){var e=t.dispatch,n=t.transform,i=t.legendRectSize,o=t.legendSpacing,r=t.legendMaxLength,a=t.rectStroke,s=t.rectFill,l=t.label,u=t.value;return y.a.createElement("g",{transform:n,onMouseEnter:function(){e(Object(S.e)({selectedLegendItem:u}))},onMouseLeave:function(){e(Object(S.e)())}},y.a.createElement("rect",{style:{strokeWidth:2},width:i,height:i,fill:s,stroke:a}),y.a.createElement("text",{x:i+o+5,y:i-o,style:{fontSize:12,fill:M.a,fontFamily:M.b}},y.a.createElement("title",null,l),"string"==typeof l?l.substring(0,r):l))},lt=n(36);function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ht(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var pt={position:"absolute",top:26,borderRadius:4,zIndex:1e3,userSelect:"none"},dt=Object(w.b)((function(t){return{colorBy:t.controls.colorBy,colorings:t.metadata.colorings,colorScale:t.controls.colorScale,legendOpen:t.controls.legendOpen}}))(U=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(ht()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){return o()(this,i),n.call(this,t)}return a()(i,[{key:"showLegend",value:function(){return void 0!==this.props.legendOpen?this.props.legendOpen:!(this.props.width<600||this.props.colorScale.legendValues.length>32)}},{key:"getSVGHeight",value:function(){if(!this.showLegend())return 18;var t=this.props.colorScale.legendValues.length;return Math.ceil(t/2)*(O.B+O.C)+O.C+20||100}},{key:"getSVGWidth",value:function(){return this.showLegend()?290:this.getTitleWidth()+20}},{key:"getTransformationForLegendItem",value:function(t){var e=this.props.colorScale.legendValues.length,n=Math.ceil(e/2);return"translate("+(145*Math.floor(t/n)+10)+","+t%n*(O.B+O.C)+")"}},{key:"getTitleString",value:function(){if(Object(lt.d)(this.props.colorBy)){var t=Object(lt.a)(this.props.colorBy);return t.aa?"Genotype at ".concat(t.gene," site ").concat(t.positions.join(", ")):"Nucleotide at position ".concat(t.positions.join(", "))}return void 0===this.props.colorings[this.props.colorBy]?"":this.props.colorings[this.props.colorBy].title}},{key:"getTitleWidth",value:function(){return 15+5.3*this.getTitleString().length}},{key:"toggleLegend",value:function(){this.props.dispatch({type:R.L,value:!this.props.legendOpen})}},{key:"legendTitle",value:function(){return y.a.createElement("g",{id:"Title"},y.a.createElement("rect",{width:this.getTitleWidth(),height:"12",fill:"rgba(255,255,255,.85)"}),y.a.createElement("text",{x:this.getTitleOffset(),y:10,style:{fontSize:12,fill:M.a,fontFamily:M.d,backgroundColor:"#fff"}},this.getTitleString()))}},{key:"legendChevron",value:function(){var t=this.showLegend()?-180:0,e=this.getArrowOffset();return y.a.createElement("g",{id:"Chevron",transform:"translate(".concat(e,",0)")},y.a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792"},y.a.createElement("rect",{width:"1792",height:"1792",fill:"rgba(255,255,255,.85)"}),y.a.createElement("path",{fill:M.a,style:{transform:"rotate(".concat(t,"deg)"),transformOrigin:"50% 50%",transition:"".concat(O.u,"ms ease-in-out")},d:"M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"})))}},{key:"styleLabelText",value:function(t){if("num_date"===this.props.colorBy){var e=this.props.colorScale.legendValues;if(e[e.length-1]-e[0]>10&&e[e.length-1]-parseInt(t,10)>=10)return parseInt(t,10);var n=Object(j.d)(t).split("-"),i=rt()(n,3),o=i[0],r=i[1];i[2];return"".concat(O.E[r]," ").concat(o)}return t}},{key:"legendItems",value:function(){var t=this,e=this.props.colorScale.legendValues.filter((function(t){return void 0!==t})).map((function(e,n){return y.a.createElement(st,{dispatch:t.props.dispatch,legendRectSize:O.B,legendSpacing:O.C,legendMaxLength:O.A,rectFill:Object(at.g)(t.props.colorScale.scale(e)).brighter([.35]).toString(),rectStroke:Object(at.g)(t.props.colorScale.scale(e)).toString(),transform:t.getTransformationForLegendItem(n),key:e,value:e,label:t.styleLabelText(e),index:n})}));return y.a.createElement("g",{id:"ItemsContainer"},y.a.createElement("rect",{width:"290",height:this.getSVGHeight(),fill:"rgba(255,255,255,.85)"}),y.a.createElement("g",{id:"Items",transform:"translate(0,20)"},e))}},{key:"getStyles",value:function(){return{svgLeft:ct({},pt,{left:5}),svgRight:ct({},pt,{right:5})}}},{key:"getSVGStyle",value:function(){var t=this.getStyles();return this.props.right?t.svgRight:t.svgLeft}},{key:"getArrowOffset",value:function(){return this.props.right?this.getSVGWidth()-20:this.getTitleWidth()}},{key:"getTitleOffset",value:function(){return this.props.right?this.getSVGWidth()-this.getTitleWidth()-15:5}},{key:"render",value:function(){var t=this;return this.props.colorScale?y.a.createElement("svg",{id:"TreeLegendContainer",width:this.getSVGWidth(),height:this.getSVGHeight(),style:this.getSVGStyle()},this.legendItems(),y.a.createElement("g",{id:"TitleAndChevron",onClick:function(){return t.toggleLegend()},style:{cursor:"pointer",textAlign:"right"}},this.legendTitle(),this.legendChevron())):null}}]),i}(y.a.Component))||U,ft=n(30),mt=n(93),gt=n(602),vt=function(t){return 1===t["stroke-width"]?0:t["stroke-width"]>6?t["stroke-width"]+6:2*t["stroke-width"]},yt=(n(220),n(51)),_t=function(t){var e=t.n.node_attrs&&t.n.node_attrs.hidden;return e&&("always"===e||"timetree"===e&&"num_date"===t.that.distance||"divtree"===e&&"div"===t.that.distance)?"hidden":"visible"},bt=function(t,e){return t.branchStroke},wt=function(t,e,n){if(t){var i="T".concat(t.that.id,"_").concat(t.parent.n.arrayIdx,"_").concat(t.n.arrayIdx),o=t.that.svg.select(Object(mt.e)("#branchT",t.n.name));o.empty()||o.style("stroke",n);var r=t.that.svg.select(Object(mt.e)("#branchS",t.n.name));if(!r.empty())if(t.branchStroke===t.parent.branchStroke)r.style("stroke",n);else{var a=t.that.svg.select("#".concat(i,"_begin"));a&&a.attr("stop-color",e);var s=t.that.svg.select("#".concat(i,"_end"));s&&s.attr("stop-color",n)}}};var xt={attrs:{".tip":{r:function(t){return t.r},cx:function(t){return t.xTip},cy:function(t){return t.yTip}},".branch":{},".vaccineCross":{d:function(t){return t.vaccineCross}},".conf":{d:function(t){return t.confLine}}},styles:{".tip":{fill:function(t){return t.fill},stroke:function(t){return t.tipStroke},visibility:function(t){return t.visibility===O.b?"visible":"hidden"}},".conf":{stroke:function(t){return t.branchStroke},"stroke-width":vt},".branch":{"stroke-width":function(t){return t["stroke-width"]+"px"},cursor:function(t){return t.visibility===O.b?"pointer":"default"},visibility:_t},".branch.S":{stroke:function(t){return bt(t)}},".branch.T":{stroke:function(t){return bt(t)}}}},Mt=function(t,e){return function(n){xt.attrs[t]&&D()(e).filter((function(e){return xt.attrs[t][e]})).forEach((function(e){n.attr(e,xt.attrs[t][e])})),xt.styles[t]&&D()(e).filter((function(e){return xt.styles[t][e]})).forEach((function(e){n.style(e,xt.styles[t][e])}))}},Et=function(t,e,n,i){t.selectAll(e).filter((function(t){return t.update})).transition().duration(i).call(n),i||Object(gt.d)()},Lt=n(10),Tt=function t(e,n){e.x=e.px+e.branchLength*Math.cos(e.tau+.5*e.w),e.y=e.py+e.branchLength*Math.sin(e.tau+.5*e.w);var i=e.tau;if(!e.terminal)for(var o=0;o<e.children.length;o++){var r=e.children[o];r.w=2*Math.PI*r.leafCount/n,r.tau=i,i+=r.w,r.px=e.x,r.py=e.y,t(r,n)}},kt=n(529);function St(t){return+t}var Ct=function(t,e){var n=Math.floor(Math.log10(t)),i=Math.pow(10,n);t/i<2?i/=5:t/i<5&&(i/=2);var o=e;return 5!==i&&10!==i||(o=5),[i,i/o]},jt=function(t,e){if(t>=1)return e.toFixed(Math.max(0,-Math.floor(Math.log10(t))));var n=Object(j.d)(e).split("-"),i=rt()(n,3),o=i[0],r=i[1],a=i[2];return t>=1/12?"".concat(o,"-").concat(O.E[r]):"".concat(o,"-").concat(O.E[r],"-").concat(a)},Ot=function(t,e,n,i,o,r){for(var a=[],s=[],l="num_date"===i?function(t,e){var n=function(t,e){return Math.ceil(t/e)*e},i=t/(Math.floor(e/(e<1200?100:150))||1);return[i=i>100?n(i,100):i>10?n(i,10):i>1?n(i,1):i>1/12?n(i,1/12):i>1/52?n(i,1/52):i>1/365.25?n(i,1/365.25):1/365.25,function(t){for(var e=0,n=[1/365.25,1/52,1/12,1,10,100,1e3];e<n.length;e++){var i=n[e];if(t/i<=12)return i}return t}(i)]}(e-t,Math.abs(r)):Ct(e-t,o),u=rt()(l,2),c=u[0],h=u[1],p=Math.floor(t/c)*c,d="radial"===n?t:p,f=e,m=0;m<=(e-p)/c+3;m++){var g=p+c*m;a.push({position:g,name:"num_date"===i?jt(c,g):g.toFixed(Math.max(0,-Math.floor(Math.log10(c)))),visibility:g<d||g>f?"hidden":"visible",axis:"x"});for(var v=g+h;v<g+c&&v<e;v+=h)s.push({position:v,visibility:v<d||v>f+h?"hidden":"visible",axis:"x"})}return{majorGridPoints:a,minorGridPoints:s}},At=(Object(kt.b)("temporalWindowTransition").duration(O.d).ease(St),function(t){return"aa"===t?"10px":"14px"}),Dt=function(t){return"aa"===t?"500":"700"},Pt=function(t,e,n){if("aa"!==t)return"visible";return function(t){return"rect"!==e?"hidden":Object.keys(t.n.branch_attrs.labels).filter((function(t){return"aa"!==t})).length||t.n.tipCount>.05*n?"visible":"hidden"}},Nt=function(t,e){var n=this;this.grid=!1,this.attributes=["r","cx","cy","id","class","d"],this.params={regressionStroke:M.a,regressionWidth:6,majorGridStroke:"#DDD",majorGridWidth:2,minorGridStroke:"#EEE",minorGridWidth:1,tickLabelSize:12,tickLabelFill:M.a,minorTicks:4,orientation:[1,1],margins:{left:30,right:15,top:10,bottom:40},showGrid:!0,fillSelected:"#A73",radiusSelected:5,branchStroke:"#AAA",branchStrokeWidth:2,tipStroke:"#AAA",tipFill:"#CCC",tipStrokeWidth:1,tipRadius:4,fontFamily:M.b,branchLabelKey:!1,branchLabelFont:M.b,branchLabelFill:"#777",branchLabelFontWeight:500,branchLabelPadX:8,branchLabelPadY:5,tipLabels:!0,tipLabelFont:M.b,tipLabelFill:"#555",tipLabelPadX:8,tipLabelPadY:2,mapToScreenDebounceTime:500,tipLabelFontSizeL1:8,tipLabelFontSizeL2:10,tipLabelFontSizeL3:12,tipLabelBreakL1:75,tipLabelBreakL2:50,tipLabelBreakL3:25},this.groups={},this.id=e,this.nodes=t.map((function(t){var e={that:n,n:t,x:0,y:0,terminal:void 0===t.children,inView:void 0===t.inView||t.inView};return t.shell=e,e})),this.numberOfTips=Object(mt.c)(this.nodes),Object(mt.h)(this.nodes),this.xScale=Object(ft.a)(),this.yScale=Object(ft.a)(),this.zoomNode=this.nodes[0],this.strainToNode={},this.nodes.forEach((function(t){n.strainToNode[t.n.name]=t}))};Nt.prototype.change=function(t){var e,n,i=t.changeColorBy,o=void 0!==i&&i,r=t.changeVisibility,a=void 0!==r&&r,s=t.changeTipRadii,l=void 0!==s&&s,u=t.changeBranchThickness,c=void 0!==u&&u,h=t.showConfidences,p=void 0!==h&&h,d=t.removeConfidences,f=void 0!==d&&d,m=t.zoomIntoClade,g=void 0!==m&&m,v=t.svgHasChangedDimensions,y=void 0!==v&&v,_=t.animationInProgress,b=void 0!==_&&_,w=t.newDistance,x=void 0===w?void 0:w,M=t.newLayout,E=void 0===M?void 0:M,L=t.updateLayout,T=void 0===L?void 0:L,k=t.newBranchLabellingKey,S=void 0===k?void 0:k,C=t.branchStroke,j=void 0===C?void 0:C,O=t.tipStroke,A=void 0===O?void 0:O,D=t.fill,P=void 0===D?void 0:D,N=t.visibility,I=void 0===N?void 0:N,z=t.tipRadii,R=void 0===z?void 0:z,B=t.branchThickness,F=void 0===B?void 0:B,V=new Set,W={},Z=new Set,H=E,U=500;Date.now()-this.timeLastRenderRequested<1e3&&(U=0),o&&(V.add(".branch.S").add(".branch.T").add(".tip").add(".conf"),Z.add("stroke").add("fill"),W.branchStroke=j,W.tipStroke=A,W.fill=P),a&&(V.add(".tip").add(".tipLabel"),Z.add("visibility").add("cursor"),W.visibility=I),l&&(V.add(".tip"),Z.add("r"),W.r=R),c&&(V.add(".branch").add(".conf"),Z.add("stroke-width"),W["stroke-width"]=F),(x||E||T||g||y)&&(V.add(".tip").add(".branch.S").add(".branch.T").add(".branch"),V.add(".vaccineCross").add(".vaccineDottedLine").add(".conf"),V.add(".branchLabel").add(".tipLabel"),V.add(".grid").add(".regression"),Z.add("cx").add("cy").add("d").add("opacity").add("visibility")),e=this.nodes,n=W,e.forEach((function(t,e){for(var i in t.update=!1,n){var o=n[i][e];o!==t[i]&&(t[i]=o,t.update=!0)}})),o&&this.updateColorBy(),g&&(this.nodes.forEach((function(t){t.inView=!1,t.update=!0})),this.zoomNode=g.terminal?g.parent:g,Object(mt.b)(this.zoomNode,(function(t){t.inView=!0}))),y&&this.nodes.forEach((function(t){t.update=!0})),x&&this.setDistance(x),(x||E||T)&&this.setLayout(E||this.layout),(Z.has(["stroke-width"])||x||E||T||g||y)&&this.mapToScreen();var Y={removeConfidences:f,showConfidences:p,newBranchLabellingKey:S};Y.timeSliceHasPotentiallyChanged=a||x,Y.hideTipLabels=b,H?this.modifySVGInStages(V,Z,U,1e3):this.modifySVG(V,Z,U,Y),this.timeLastRenderRequested=Date.now()},Nt.prototype.modifySVG=function(t,e,n,i){var o,r=this,a=[".tip",".vaccineDottedLine",".vaccineCross",".branch"];if(t.has(".branch.S")||t.has(".branch.T")){var s=t.has(".branch");s&&a.splice(a.indexOf(".branch"),1);[".S",".T"].forEach((function(i,a){t.has(".branch".concat(i))&&(o=s?function(t){Mt(".branch",e)(t),t.attr("d",(function(t){return t.branch[a]}))}:e.has("stroke")?function(t){Mt(".branch".concat(i),e)(t),t.attr("d",(function(t){return t.branch[a]}))}:function(t){t.attr("d",(function(t){return t.branch[a]}))},Et(r.svg,".branch".concat(i),o,n))}))}a.forEach((function(i){t.has(i)&&(o=Mt(i,e),Et(r.svg,i,o,n))})),t.has(".branchLabel")&&this.updateBranchLabels(n),i.hideTipLabels?this.removeTipLabels():t.has(".tipLabel")&&this.updateTipLabels(),t.has(".grid")&&(this.grid&&"unrooted"!==this.layout?this.addGrid():this.hideGrid()),t.has(".regression")&&(this.removeRegression(),"clock"===this.layout&&"num_date"===this.distance&&this.drawRegression()),i.removeConfidences&&this.confidencesInSVG?this.removeConfidence():i.showConfidences&&!this.confidencesInSVG?this.drawConfidence():t.has(".conf")&&this.confidencesInSVG&&("rect"===this.layout&&"num_date"===this.distance?(o=Mt(".conf",e),Et(this.svg,".conf",o,n)):this.removeConfidence()),i.timeSliceHasPotentiallyChanged&&this.showTemporalSlice(),i.newBranchLabellingKey&&(this.removeBranchLabels(),"none"!==i.newBranchLabellingKey&&this.drawBranchLabels(i.newBranchLabellingKey))},Nt.prototype.modifySVGInStages=function(t,e,n,i){var o=this;t.delete(".tip"),this.hideGrid();var r=0,a=function(){o.drawBranches(),o.params.showGrid&&o.addGrid(),o.svg.selectAll(".tip").remove(),o.drawTips(),o.updateTipLabels(),o.vaccines&&o.drawVaccines(),o.showTemporalSlice(),"clock"===o.layout&&"num_date"===o.distance&&o.drawRegression(),t.has(".branchLabel")&&o.drawBranchLabels(o.params.branchLabelKey)};this.confidencesInSVG=!1,this.svg.selectAll(D()(t).join(", ")).transition().duration(n).style("opacity",0).remove().on("start",(function(){return r++})).on("end",(function(){if(!--r){var t=Mt(".tip",e);Et(o.svg,".tip",t,i),setTimeout(a,i)}})),this.hideTemporalSlice(),n||Object(gt.d)()},Nt.prototype.render=function(t,e,n,i,o,r,a,s,l,u,c,h,p,d){var f=this;this.svg=t,this.params=Object.assign(this.params,i),this.callbacks=o,this.vaccines=l?l.map((function(t){return t.shell})):void 0,this.dateRange=d,this.setDistance(n),this.setLayout(e),this.mapToScreen(),this.nodes.forEach((function(t,e){t.branchStroke=u[e],t.tipStroke=c[e],t.fill=h[e],t.visibility=a[e],t["stroke-width"]=r[e],t.r=p?p[e]:f.params.tipRadius})),this.params.showGrid&&(this.addGrid(),this.showTemporalSlice()),this.drawBranches(),this.drawTips(),this.params.branchLabelKey&&this.drawBranchLabels(this.params.branchLabelKey),this.vaccines&&this.drawVaccines(),"clock"===this.layout&&"num_date"===this.distance&&this.drawRegression(),this.confidencesInSVG=!1,s&&this.drawConfidence(),this.updateTipLabels(),this.timeLastRenderRequested=Date.now()},Nt.prototype.clearSVG=function(){this.svg.selectAll("*").remove()},Nt.prototype.drawTips=function(){var t=this.params;"tips"in this.groups||(this.groups.tips=this.svg.append("g").attr("id","tips")),this.groups.tips.selectAll(".tip").data(this.nodes.filter((function(t){return t.terminal}))).enter().append("circle").attr("class","tip").attr("id",(function(t){return Object(mt.e)("tip",t.n.name)})).attr("cx",(function(t){return t.xTip})).attr("cy",(function(t){return t.yTip})).attr("r",(function(t){return t.r})).on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick).style("pointer-events","auto").style("visibility",(function(t){return t.visibility===O.b?"visible":"hidden"})).style("fill",(function(e){return e.fill||t.tipFill})).style("stroke",(function(e){return e.tipStroke||t.tipStroke})).style("stroke-width",(function(){return t.tipStrokeWidth})).style("cursor","pointer")},Nt.prototype.drawBranches=function(){var t=this.params;"branchTee"in this.groups||(this.groups.branchTee=this.svg.append("g").attr("id","branchTee")),"clock"===this.layout||"unrooted"===this.layout?this.groups.branchTee.selectAll("*").remove():this.groups.branchTee.selectAll(".branch").data(this.nodes.filter((function(t){return!t.terminal}))).enter().append("path").attr("class","branch T").attr("id",(function(t){return Object(mt.e)("branchT",t.n.name)})).attr("d",(function(t){return t.branch[1]})).style("stroke",(function(e){return e.branchStroke||t.branchStroke})).style("stroke-width",(function(e){return e["stroke-width"]||t.branchStrokeWidth})).style("fill","none").style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick),this.groups.branchGradientDefs||(this.groups.branchGradientDefs=this.svg.append("defs")),this.groups.branchGradientDefs.selectAll("*").remove(),this.updateColorBy(),"branchStem"in this.groups||(this.groups.branchStem=this.svg.append("g").attr("id","branchStem")),this.groups.branchStem.selectAll(".branch").data(this.nodes).enter().append("path").attr("class","branch S").attr("id",(function(t){return Object(mt.e)("branchS",t.n.name)})).attr("d",(function(t){return t.branch[0]})).style("stroke",(function(e){return e.branchStroke?bt(e):t.branchStroke})).style("stroke-linecap","round").style("stroke-width",(function(e){return e["stroke-width"]||t.branchStrokeWidth})).style("visibility",_t).style("cursor",(function(t){return t.visibility===O.b?"pointer":"default"})).style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick)},Nt.prototype.drawVaccines=function(){this.vaccines&&this.vaccines.length&&("vaccines"in this.groups||(this.groups.vaccines=this.svg.append("g").attr("id","vaccines")),this.groups.vaccines.selectAll(".vaccineCross").data(this.vaccines).enter().append("path").attr("class","vaccineCross").attr("d",(function(t){return t.vaccineCross})).style("stroke","#333").style("stroke-width",2*this.params.branchStrokeWidth).style("fill","none").style("cursor","pointer").style("pointer-events","auto").on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick))},Nt.prototype.drawRegression=function(){var t=this.yScale(this.regression.intercept+this.xScale.domain()[0]*this.regression.slope),e=this.yScale(this.regression.intercept+this.xScale.domain()[1]*this.regression.slope),n="M "+this.xScale.range()[0].toString()+" "+t.toString()+" L "+this.xScale.range()[1].toString()+" "+e.toString();"clockRegression"in this.groups||(this.groups.clockRegression=this.svg.append("g").attr("id","clockRegression")),this.groups.clockRegression.append("path").attr("d",n).attr("class","regression").style("fill","none").style("visibility","visible").style("stroke",this.params.regressionStroke).style("stroke-width",this.params.regressionWidth),this.groups.clockRegression.append("text").text(function(t,e){if(e>5)return"rate estimate: ".concat(Object(mt.d)(t.slope)," subs per year");return"rate estimate: ".concat(t.slope.toExponential(2)," subs per site per year")}(this.regression,this.yScale.domain()[0])).attr("class","regression").attr("x",this.xScale.range()[1]/2-75).attr("y",this.yScale.range()[0]+50).style("fill",this.params.regressionStroke).style("font-size",this.params.tickLabelSize+8).style("font-weight",400).style("font-family",this.params.fontFamily)},Nt.prototype.removeRegression=function(){"clockRegression"in this.groups&&this.groups.clockRegression.selectAll("*").remove()},Nt.prototype.updateColorBy=function(){},Nt.prototype.setDistance=function(t){this.nodes.forEach((function(t){t.update=!0})),this.distance=t||"div","div"===this.distance?this.nodes.forEach((function(t){t.depth=Object(Z.b)(t.n),t.pDepth=Object(Z.b)(t.n.parent),t.conf=[t.depth,t.depth]})):this.nodes.forEach((function(t){t.depth=Object(Z.d)(t.n,"num_date"),t.pDepth=Object(Z.d)(t.n.parent,"num_date"),t.conf=Object(Z.d)(t.n,"num_date",{confidence:!0})||[t.depth,t.depth]})),this.vaccines&&this.vaccines.forEach((function(t){t.crossDepth=t.depth}))},Nt.prototype.setLayout=function(t){void 0!==t&&t===this.layout||this.nodes.forEach((function(t){t.update=!0})),this.layout=void 0===t?"rect":t,"rect"===this.layout?this.rectangularLayout():"clock"===this.layout?this.timeVsRootToTip():"radial"===this.layout?this.radialLayout():"unrooted"===this.layout&&this.unrootedLayout()},Nt.prototype.rectangularLayout=function(){this.nodes.forEach((function(t){t.y=t.n.yvalue,t.x=t.depth,t.px=t.pDepth,t.py=t.y})),this.vaccines&&this.vaccines.forEach((function(t){t.xCross=t.crossDepth,t.yCross=t.y}))},Nt.prototype.timeVsRootToTip=function(){this.nodes.forEach((function(t){t.y=Object(Z.b)(t.n),t.x=Object(Z.d)(t.n,"num_date"),t.px=Object(Z.d)(t.n.parent,"num_date"),t.py=Object(Z.b)(t.n.parent)})),this.vaccines&&this.vaccines.forEach((function(t){t.xCross=t.x,t.yCross=t.y}));var t=this.numberOfTips,e=this.nodes[0].depth,n=Object(Lt.h)(this.nodes.filter((function(t){return t.terminal})).map((function(t){return t.y*(t.depth-e)})))/t/(Object(Lt.h)(this.nodes.filter((function(t){return t.terminal})).map((function(t){return(t.depth-e)*(t.depth-e)})))/t),i=-e*n;this.regression={slope:n,intercept:i}},Nt.prototype.unrootedLayout=function(){Object(mt.a)(this.nodes[0]);var t=this.nodes[0].leafCount;this.nodes.forEach((function(t){t.branchLength=t.depth-t.pDepth})),this.nodes[0].x=0,this.nodes[0].y=0,this.nodes[0].px=0,this.nodes[0].py=0,this.nodes[0].w=2*Math.PI,this.nodes[0].tau=0;for(var e=1.5*Math.PI,n=0;n<this.nodes[0].children.length;n++)this.nodes[0].children[n].px=0,this.nodes[0].children[n].py=0,this.nodes[0].children[n].w=2*Math.PI*this.nodes[0].children[n].leafCount/t,this.nodes[0].children[n].tau=e,e+=this.nodes[0].children[n].w,Tt(this.nodes[0].children[n],t);this.vaccines&&this.vaccines.forEach((function(t){var e=t.crossDepth-t.depth;t.xCross=t.px+e*Math.cos(t.tau+.5*t.w),t.yCross=t.py+e*Math.sin(t.tau+.5*t.w)}))},Nt.prototype.radialLayout=function(){var t=this,e=this.numberOfTips,n=this.nodes[0].depth;this.nodes.forEach((function(t){var i=1.9*Math.PI*t.yRange[0]/e,o=1.9*Math.PI*t.yRange[1]/e;t.angle=1.9*Math.PI*t.n.yvalue/e,t.y=(t.depth-n)*Math.cos(t.angle),t.x=(t.depth-n)*Math.sin(t.angle),t.py=t.y*(t.pDepth-n)/(t.depth-n+1e-15),t.px=t.x*(t.pDepth-n)/(t.depth-n+1e-15),t.yCBarStart=(t.depth-n)*Math.cos(i),t.xCBarStart=(t.depth-n)*Math.sin(i),t.yCBarEnd=(t.depth-n)*Math.cos(o),t.xCBarEnd=(t.depth-n)*Math.sin(o),t.smallBigArc=Math.abs(o-i)>1*Math.PI})),this.vaccines&&this.vaccines.forEach((function(e){"div"===t.distance?(e.xCross=e.x,e.yCross=e.y):(e.xCross=(e.crossDepth-n)*Math.sin(e.angle),e.yCross=(e.crossDepth-n)*Math.cos(e.angle))}))},Nt.prototype.setScales=function(t){var e=parseInt(this.svg.attr("width"),10),n=parseInt(this.svg.attr("height"),10);if("radial"===this.layout||"unrooted"===this.layout){var i=e-(t.left||0)-(t.right||0),o=n-(t.top||0)-(t.top||0),r=Object(Lt.e)([i,o]),a=i-r,s=o-r;this.xScale.range([.5*a+t.left||0,e-.5*a-(t.right||0)]),this.yScale.range([.5*s+t.top||0,n-.5*s-(t.bottom||0)])}else this.params.orientation[0]>0?this.xScale.range([t.left||0,e-(t.right||0)]):this.xScale.range([e-(t.right||0),t.left||0]),this.params.orientation[1]>0?this.yScale.range([t.top||0,n-(t.bottom||0)]):this.yScale.range([n-(t.bottom||0),t.top||0])},Nt.prototype.mapToScreen=function(){var t=this,e={left:this.params.margins.left,right:this.params.margins.right,top:this.params.margins.top,bottom:this.params.margins.bottom},n=this.nodes.filter((function(t){return t.terminal})).filter((function(t){return t.inView}));if(n.length<this.params.tipLabelBreakL1){var i=this.params.tipLabelFontSizeL1;n.length<this.params.tipLabelBreakL2&&(i=this.params.tipLabelFontSizeL2),n.length<this.params.tipLabelBreakL3&&(i=this.params.tipLabelFontSizeL3);var o=0;n.forEach((function(t){o<t.n.name.length&&(o=.65*t.n.name.length*i)})),e.right+=o}this.setScales(e);var r=1e6,a=0,s=1e6,l=0;if(this.nodes.filter((function(t){return t.inView})).forEach((function(t){t.x>l&&(l=t.x),t.y>a&&(a=t.y),t.x<s&&(s=t.x),t.y<r&&(r=t.y)})),s===l&&(s-=.005,l+=.005),n.length<30){var u=.05*(a-r);r-=u,a+=u}var c=l-s;if(c<1e-8&&(l=1e-8-s,c=1e-8),"radial"===this.layout||"unrooted"===this.layout){var h=a-r,p=Object(Lt.d)([h,c]),d=c>h?.5*(c-h):0,f=c<h?.5*(h-c):0;this.xScale.domain([s-f,s+p-f]),this.yScale.domain([r-d,r+p-d])}else"clock"===this.layout?(this.xScale.domain([s,l]),this.yScale.domain([a,r])):(this.xScale.domain([s,l]),this.yScale.domain([r,a]));if(this.nodes.forEach((function(e){e.xTip=t.xScale(e.x),e.yTip=t.yScale(e.y),e.xBase=t.xScale(e.px),e.yBase=t.yScale(e.py),e.rot=180*Math.atan2(e.yTip-e.yBase,e.xTip-e.xBase)/Math.PI})),this.vaccines&&this.vaccines.forEach((function(e){var n=t.xScale(e.xCross),i=t.yScale(e.yCross);e.vaccineCross=" M ".concat(n-6,",").concat(i-6," L ").concat(n+6,",").concat(i+6," M ").concat(n-6,",").concat(i+6," L ").concat(n+6,",").concat(i-6)})),"clock"===this.layout||"unrooted"===this.layout)this.nodes.forEach((function(t){t.branch=[" M "+t.xBase.toString()+","+t.yBase.toString()+" L "+t.xTip.toString()+","+t.yTip.toString(),""]}));else if("rect"===this.layout)this.nodes.forEach((function(e){var n=.5*(e.parent["stroke-width"]-e["stroke-width"])||0,i=[t.yScale(e.yRange[0]),t.yScale(e.yRange[1])];e.branch=[[" M ".concat(e.xBase-n,",").concat(e.yBase," L ").concat(e.xTip,",").concat(e.yTip+.01)],[" M ".concat(e.xTip,",").concat(i[0]," L ").concat(e.xTip,",").concat(i[1])]],t.params.confidence&&(e.confLine=" M ".concat(t.xScale(e.conf[0]),",").concat(e.yBase," L ").concat(t.xScale(e.conf[1]),",").concat(e.yTip))}));else if("radial"===this.layout){var m=this.nodes[0].depth,g=this.nodes.map((function(t){return.5*(t.parent["stroke-width"]-t["stroke-width"])||0}));this.nodes.forEach((function(e){e.cBarStart=t.yScale(e.yRange[0])})),this.nodes.forEach((function(e){e.cBarEnd=t.yScale(e.yRange[1])})),this.nodes.forEach((function(e,n){e.branch=[" M "+(e.xBase-g[n]*Math.sin(e.angle)).toString()+" "+(e.yBase-g[n]*Math.cos(e.angle)).toString()+" L "+e.xTip.toString()+" "+e.yTip.toString(),""],e.terminal||(e.branch[1]=[" M "+t.xScale(e.xCBarStart).toString()+" "+t.yScale(e.yCBarStart).toString()+" A "+(t.xScale(e.depth)-t.xScale(m)).toString()+" "+(t.yScale(e.depth)-t.yScale(m)).toString()+" 0 "+(e.smallBigArc?"1 ":"0 ")+" 1  "+t.xScale(e.xCBarEnd).toString()+","+t.yScale(e.yCBarEnd).toString()])}))}},Nt.prototype.removeConfidence=function(t){this.confidencesInSVG=!1,"confidenceIntervals"in this.groups&&(t?this.groups.confidenceIntervals.selectAll("*").transition().duration(t).style("opacity",0).remove():this.groups.confidenceIntervals.selectAll("*").remove())},Nt.prototype.drawConfidence=function(t){var e=this;this.confidencesInSVG=!0,"confidenceIntervals"in this.groups||(this.groups.confidenceIntervals=this.svg.append("g").attr("id","confidenceIntervals")),t?(this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call((function(t){return e.drawSingleCI(t,0)})),this.groups.confidenceIntervals.transition().duration(t).style("opacity",.5)):this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call((function(t){return e.drawSingleCI(t,.5)}))},Nt.prototype.drawSingleCI=function(t,e){t.append("path").attr("class","conf").attr("id",(function(t){return Object(mt.e)("conf",t.n.name)})).attr("d",(function(t){return t.confLine})).style("stroke",(function(t){return t.branchStroke||"#888"})).style("opacity",e).style("fill","none").style("stroke-width",vt).style("pointer-events","none")},Nt.prototype.drawBranchLabels=function(t){var e=this;this.params.branchLabelKey=t;var n=At(t),i=Dt(t),o=Pt(t,this.layout,this.zoomNode.n.tipCount);"branchLabels"in this.groups||(this.groups.branchLabels=this.svg.append("g").attr("id","branchLabels")),this.groups.branchLabels.selectAll(".branchLabel").data(this.nodes.filter((function(e){return e.n.branch_attrs&&e.n.branch_attrs.labels&&e.n.branch_attrs.labels[t]}))).enter().append("text").attr("class","branchLabel").attr("x",(function(t){return t.xTip+(e.params.orientation[0]>0?-5:5)})).attr("y",(function(t){return t.yTip-e.params.branchLabelPadY})).style("text-anchor",this.params.orientation[0]>0?"end":"start").style("visibility",o).style("fill",this.params.branchLabelFill).style("font-family",this.params.branchLabelFont).style("font-weight",i).style("font-size",n).text((function(e){return e.n.branch_attrs.labels[t]}))},Nt.prototype.removeBranchLabels=function(){"branchLabels"in this.groups&&this.groups.branchLabels.selectAll("*").remove()},Nt.prototype.updateBranchLabels=function(t){var e=this,n=Pt(this.params.branchLabelKey,this.layout,this.zoomNode.n.tipCount),i=At(this.params.branchLabelKey),o=Dt(this.params.branchLabelKey);this.groups.branchLabels.selectAll(".branchLabel").transition().duration(t).attr("x",(function(t){return t.xTip-5})).attr("y",(function(t){return t.yTip-e.params.branchLabelPadY})).style("visibility",n).style("font-weight",o).style("font-size",i),t||Object(gt.d)()},Nt.prototype.updateTipLabels=function(t){var e=this;"tipLabels"in this.groups?this.groups.tipLabels.selectAll("*").remove():this.groups.tipLabels=this.svg.append("g").attr("id","tipLabels");var n=this.callbacks.tipLabel,i=this.params.tipLabelPadX,o=this.params.tipLabelPadY,r=this.nodes.filter((function(t){return t.terminal})).filter((function(t){return t.inView})),a=r.filter((function(t){return t.visibility===O.b}));if(a.length<this.params.tipLabelBreakL1){var s=this.params.tipLabelFontSizeL1;r.length<this.params.tipLabelBreakL3?s=this.params.tipLabelFontSizeL3:r.length<this.params.tipLabelBreakL2&&(s=this.params.tipLabelFontSizeL2),window.setTimeout((function(){e.groups.tipLabels.selectAll(".tipLabel").data(a).enter().append("text").attr("x",(function(t){return t.xTip+i})).attr("y",(function(t){return t.yTip+o})).text((function(t){return n(t)})).attr("class","tipLabel").style("font-size",s.toString()+"px").style("visibility",(function(t){return t.visibility===O.b?"visible":"hidden"}))}),t)}},Nt.prototype.removeTipLabels=function(){"tipLabels"in this.groups&&this.groups.tipLabels.selectAll("*").remove()},Nt.prototype.hideGrid=function(){"majorGrid"in this.groups&&this.groups.majorGrid.selectAll("*").style("visibility","hidden"),"minorGrid"in this.groups&&this.groups.minorGrid.selectAll("*").style("visibility","hidden"),"gridText"in this.groups&&this.groups.gridText.selectAll("*").style("visibility","hidden"),"axisText"in this.groups&&this.groups.axisText.selectAll("*").style("visibility","hidden")},Nt.prototype.addGrid=function(){var t,e,n=this.layout;if(t=this.groups,e=this.svg,"temporalWindow"in t||(t.temporalWindow=e.append("g").attr("id","temporalWindow"),t.temporalWindowStart=t.temporalWindow.append("rect").attr("class","temporalWindowStart"),t.temporalWindowEnd=t.temporalWindow.append("rect").attr("class","temporalWindowEnd")),"majorGrid"in t||(t.majorGrid=e.append("g").attr("id","majorGrid")),"minorGrid"in t||(t.minorGrid=e.append("g").attr("id","minorGrid")),"gridText"in t||(t.gridText=e.append("g").attr("id","gridText")),"axisText"in t||(t.axisText=e.append("g").attr("id","axisText")),"unrooted"!==n){var i,o=Object(Lt.e)(this.yScale.domain()),r=Object(Lt.d)(this.yScale.domain()),a="radial"===n?this.nodes[0].depth:this.xScale.domain()[0],s="radial"===n?a+Object(Lt.d)([this.xScale.domain()[1],this.yScale.domain()[1],-this.xScale.domain()[0],-this.yScale.domain()[0]]):this.xScale.domain()[1],l=this.xScale.range()[1]-this.xScale.range()[0],u=Ot(a,s,n,this.distance,this.params.minorTicks,l),c=u.majorGridPoints,h=u.minorGridPoints,p=function(t,e,n){return function(i){var o="";if("x"===i.axis){if("rect"===n||"clock"===n){var r=t(i.position);o="M"+r.toString()+" "+e.range()[1].toString()+" L "+r.toString()+" "+e.range()[0].toString()}else if("radial"===n){var l=t(i.position-a);o="M "+l.toString()+"  "+e(0).toString()+" A "+(l-t(0)).toString()+" "+(e(i.position)-e(a)).toString()+" 0 1 0 "+l.toString()+" "+(e(0)+.001).toString()}}else if("y"===i.axis){var u=e(i.position);o="M".concat(t(a)+20," ").concat(u," L ").concat(t(s)," ").concat(u)}return o}};if("clock"===this.layout&&c.push.apply(c,D()(function(t,e){var n,i=[];n=Ct(e-t)[0];for(var o=Math.max(0,-Math.floor(Math.log10(n))),r=Math.floor(t/n)*n,a=e,s=r,l=1;l<=(e-r)/n+10;l++){var u=r+n*l;i.push({position:u,name:u.toFixed(o),visibility:u<s||u>a?"hidden":"visible",axis:"y"})}return{majorGridPoints:i}}(o,r).majorGridPoints)),this.groups.majorGrid.selectAll("*").remove(),this.groups.majorGrid.selectAll(".majorGrid").data(c).enter().append("path").attr("d",p(this.xScale,this.yScale,n)).attr("class","majorGrid").style("fill","none").style("visibility",(function(t){return t.visibility})).style("stroke",this.params.majorGridStroke).style("stroke-width",this.params.majorGridWidth),this.groups.minorGrid.selectAll("*").remove(),this.svg.selectAll(".minorGrid").remove(),this.groups.minorGrid.selectAll(".minorGrid").data(h).enter().append("path").attr("d",p(this.xScale,this.yScale,n)).attr("class","minorGrid").style("fill","none").style("visibility",(function(t){return t.visibility})).style("stroke",this.params.minorGridStroke).style("stroke-width",this.params.minorGridWidth),this.groups.gridText.selectAll("*").remove(),this.svg.selectAll(".gridText").remove(),this.groups.gridText.selectAll(".gridText").data(c).enter().append("text").text((function(t){return t.name})).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor",(i=n,function(t){return"x"===t.axis?"radial"===i?"end":"middle":"start"})).style("visibility",(function(t){return t.visibility})).attr("x",function(t,e){return function(n){return"x"===n.axis?t("radial"===e?0:n.position):t.range()[0]-15}}(this.xScale,n)).attr("y",function(t,e){return function(n){return"x"===n.axis?"radial"===e?t(n.position-a)-5:t.range()[1]+18:t(n.position)}}(this.yScale,n)),this.groups.axisText.selectAll("*").remove(),this.svg.selectAll(".axisText").remove(),"rect"===n||"clock"===n){var d="Date";"clock"===this.layout?d=this.yScale.domain()[0]>5?"Mutations":"Divergence":"div"===this.distance&&(d=this.xScale.domain()[1]>5?"Mutations":"Divergence"),this.groups.axisText.append("text").text("rect"===n?d:"Date").attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("x",Math.abs(this.xScale.range()[1]-this.xScale.range()[0])/2).attr("y",this.yScale.range()[1]+this.params.margins.bottom-6),"clock"===n&&this.groups.axisText.append("text").text(d).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("transform","translate(10,"+this.yScale.range()[1]/2+") rotate(-90)")}this.grid=!0}},Nt.prototype.showTemporalSlice=function(){if("rect"===this.layout&&"num_date"===this.distance){var t=[this.xScale(this.dateRange[0]),this.xScale(this.dateRange[1])],e=this.yScale.range()[1],n=-1===this.params.orientation[0],i=this.xScale(this.nodes[0].x),o=n?this.xScale.range()[0]:this.xScale.range()[1];if(o+=this.params.margins.left+this.params.margins.right,Math.abs(t[0]-i)>30){var r=t[0],a=0;n&&(r=o-t[0],a=t[0]);var s="1"===this.groups.temporalWindowStart.attr("opacity");this.groups.temporalWindowStart.attr("opacity",1).attr("height",e).attr("transform","translate(".concat(a,",0)")).attr("fill","#EEE"),s?this.groups.temporalWindowStart.transition("temporalWindowTransition").attr("width",r):this.groups.temporalWindowStart.attr("width",r)}else this.groups.temporalWindowStart.attr("opacity",0);var l=t[1],u=o-this.params.margins.right-t[1],c="translate(".concat(o-this.params.margins.right,",0) scale(-1,1)");if(n&&(l=this.params.margins.right,u=t[1]-this.params.margins.right,c="translate(".concat(l,",0)")),u>30){var h="1"===this.groups.temporalWindowEnd.attr("opacity");this.groups.temporalWindowEnd.attr("opacity",1).attr("height",e).attr("fill","#EEE").attr("transform",c),h?this.groups.temporalWindowEnd.transition("temporalWindowTransition").attr("width",u):this.groups.temporalWindowEnd.attr("width",u)}else this.groups.temporalWindowEnd.attr("opacity",0)}else this.hideTemporalSlice()},Nt.prototype.hideTemporalSlice=function(){this.groups.temporalWindowStart.attr("opacity",0),this.groups.temporalWindowEnd.attr("opacity",0)};var It=Nt;function zt(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return Rt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,r=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){a=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw o}}}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Bt=function(t){var e=t.name,n=t.value,i=t.padBelow,o=void 0!==i&&i;return y.a.createElement("div",{style:{paddingBottom:o?"15px":"10px"},key:e},y.a.createElement("span",{style:{fontWeight:"500"}},e+" "),n?Array.isArray(n)?n.map((function(t){return y.a.createElement("div",{key:t,style:{fontWeight:"300",marginLeft:"0em"}},t)})):y.a.createElement("span",{style:{fontWeight:"300"}},n):null)},Ft=function(t){var e=t.name;return y.a.createElement("div",{style:M.e.tooltipHeading},e)},Vt=function(t){var e=t.node,n=t.t,i=[],o=Object(Z.b)(e),r=Object(Z.d)(e,"num_date");if(o&&i.push(y.a.createElement(Bt,{name:n("Divergence")+":",value:Object(mt.d)(o),key:"div"})),void 0!==r){var a=Object(j.d)(r),s=Object(Z.d)(e,"num_date",{confidence:!0});if(s&&s[0]!==s[1]){i.push(y.a.createElement(Bt,{name:n("Inferred Date")+":",value:a,key:"inferredDate"}));var l=[Object(j.d)(s[0]),Object(j.d)(s[1])];l[0]!==l[1]&&i.push(y.a.createElement(Bt,{name:n("Date Confidence Interval")+":",value:"(".concat(l[0],", ").concat(l[1],")"),key:"dateConf"}))}else i.push(y.a.createElement(Bt,{name:n("Date")+":",value:a,key:"date"}))}return i},Wt=function(t){var e=t.node,n=t.colorBy,i=t.colorByConfidence,o=t.colorScale,r=t.colorings;if("num_date"===n)return null;if(Object(lt.d)(n)){var a=Object(lt.a)(n),s=a.aa?"Amino Acid at ".concat(a.gene," site ").concat(a.positions.join(", "),":"):"Nucleotide at pos ".concat(a.positions.join(", "),":");return y.a.createElement(Bt,{name:s,value:Object(yt.g)(e,o)})}if("author"===n){var l=Object(Z.c)(e);return l?y.a.createElement(y.a.Fragment,null,l.title?y.a.createElement(Bt,{name:"Title:",value:l.title}):null,l.journal?y.a.createElement(Bt,{name:"Journal:",value:l.journal}):null):null}var u=r&&r[n]&&r[n].title?r[n].title:n,c=function(){var t=Object(Z.d)(e,n);return Object(O.z)(t)?y.a.createElement(Bt,{name:"".concat(u,":"),value:t}):null};if(!0===i){var h=Object(Z.d)(e,n,{confidence:!0});if(!h)return console.error("couldn't find confidence vals for ",n),null;if(!e.hasChildren&&1===Object.keys(h).length&&Object.values(h)[0]>.99)return c();var p=Object.keys(h).filter((function(t){return Object(O.z)(t)})).sort((function(t,e){return h[t]>h[e]?-1:1})).slice(0,4).map((function(t){return"".concat(t," (").concat((100*h[t]).toFixed(0),"%)")}));return p.length?y.a.createElement(Bt,{name:"".concat(u," (confidence):"),value:p}):null}return c()},Zt=function(t){var e=t.node,n=t.t;if(!e.branch_attrs||!e.branch_attrs.mutations)return null;var i=[],o=e.branch_attrs.mutations;if(o.nuc&&o.nuc.length){var r=function(t){return"-"===t.slice(-1)||"-"===t.slice(0,1)},a=function(t){return"N"===t.slice(-1)||"N"===t.slice(0,1)},s=o.nuc.filter((function(t){return!r(t)&&!a(t)})),l=s.length,u=s.slice(0,Math.min(9,l)).join(", ");l>9&&(u+=" + "+n("{{x}} more",{x:l-9})),0!==l&&i.push(y.a.createElement(Bt,{name:n("Nucleotide mutations")+":",value:u,key:"nuc"}));var c=o.nuc.filter((function(t){return r(t)})).length;c&&i.push(y.a.createElement(Bt,{name:"".concat(n("Gaps"),' ("-"):'),value:c,key:"gaps"}));var h=o.nuc.filter((function(t){return a(t)})).length;h&&i.push(y.a.createElement(Bt,{name:"Ns:",value:h,key:"Ns"}))}else i.push(y.a.createElement(Bt,{name:n("No nucleotide mutations"),value:"",key:"nuc"}));var p,d=Object.keys(o).filter((function(t){return"nuc"!==t})),f={},m=!1,g=zt(d);try{for(g.s();!(p=g.n()).done;){var v=p.value,_=o[v].filter((function(t){return!t.endsWith("X")}));_.length&&(f[v]=_,m=!0)}}catch(t){g.e(t)}finally{g.f()}if(m){var b=[];Object.keys(f).forEach((function(t,e){if(e<7){var i=t+":  "+f[t].slice(0,Math.min(3,f[t].length)).join(", ");f[t].length>3&&(i+=" + "+n("{{x}} more",{x:f[t].length-3})),b.push(i)}else 7===e&&b.push("(".concat(n("protein mutations truncated"),")"))})),i.push(y.a.createElement(Bt,{name:n("AA mutations")+":",value:b,key:"aa"}))}else o.nuc&&o.nuc.length&&i.push(y.a.createElement(Bt,{name:n("No amino acid mutations"),key:"aa"}));return i},Ht=function(t){var e=t.node,n=t.t,i=1===e.fullTipCount?[n("Branch leading to"),e.name]:[n("Number of descendants")+":",e.fullTipCount],o=rt()(i,2),r=o[0],a=o[1];return y.a.createElement(Bt,{name:r,value:a,padBelow:!0})},Ut=function(t){var e=t.node,n=t.t,i=Object(Z.f)(e);if(!i)return null;var o=[];return i.selection_date&&o.push(y.a.createElement(Bt,{name:n("Vaccine selected")+":",value:i.selection_date,key:"seldate"})),i.start_date&&o.push(y.a.createElement(Bt,{name:n("Vaccine start date")+":",value:i.start_date,key:"startdate"})),i.end_date&&o.push(y.a.createElement(Bt,{name:n("Vaccine end date")+":",value:i.end_date,key:"enddate"})),i.serum&&o.push(y.a.createElement(Bt,{name:n("Serum strain"),key:"serum"})),o},Yt=function(t){var e=t.node,n=[],i=Object(Z.c)(e);i&&n.push(y.a.createElement(Bt,{name:"Author:",value:i.value,key:"author"}));var o=Object(Z.d)(e,"gisaid_epi_isl");if(Object(O.z)(o)){var r=o.split("_")[2];n.push(y.a.createElement(Bt,{name:"GISAID EPI ISL:",value:r,key:"gisaid_epi_isl"}))}return n},Gt=function(t){var e=t.node,n=t.panelDims,i=t.children,o=-1===e.shell.that.params.orientation[0]?n.width/2+n.spaceBetweenTrees+e.shell.xTip:e.shell.xTip,r=e.shell.yTip,a={container:{position:"absolute",width:200,padding:"10px",borderRadius:10,zIndex:1e3,pointerEvents:"none",fontFamily:M.e.panel.fontFamily,fontSize:14,lineHeight:1,fontWeight:M.e.panel.fontWeight,color:M.e.panel.color,backgroundColor:M.e.panel.backgroundColor,wordWrap:"break-word",wordBreak:"break-word"}};return o<.6*n.width?a.container.left=o+10:a.container.right=n.width-o+10,r<.55*n.height?a.container.top=r+40:a.container.bottom=n.height-r+10,y.a.createElement("div",{style:a.container},y.a.createElement("div",{className:"tooltip",style:M.e.tooltip},i))},qt=function(t){var e=t.children;return y.a.createElement("div",{style:M.e.comment},e)},Kt=function(t){var e=t.hovered,n=t.colorBy,i=t.colorByConfidence,o=t.colorScale,r=t.panelDims,a=t.colorings,s=t.t;if(!e)return null;var l=e.d.n,u=Object(mt.f)(l);return y.a.createElement(Gt,{node:l,panelDims:r},".tip"===e.type?y.a.createElement(y.a.Fragment,null,y.a.createElement(Ft,{name:l.name}),y.a.createElement(Ut,{node:l,t:s}),y.a.createElement(Zt,{node:l,t:s}),y.a.createElement(Vt,{node:l,t:s}),y.a.createElement(Wt,{node:l,colorBy:n,colorByConfidence:i,colorScale:o,colorings:a}),y.a.createElement(Yt,{node:l}),y.a.createElement(qt,null,s("Click on tip to display more info"))):y.a.createElement(y.a.Fragment,null,y.a.createElement(Ht,{node:l,t:s}),y.a.createElement(Zt,{node:l,t:s}),y.a.createElement(Vt,{node:l,t:s}),y.a.createElement(Wt,{node:l,colorBy:n,colorByConfidence:i,colorScale:o,colorings:a}),y.a.createElement(qt,null,u===l.arrayIdx?s("Click to zoom out to parent clade"):s("Click to zoom into clade"))))},Qt=function(t,e,n,i){var o={},r={},a=t?n.tree:n.treeToo,s=t?i.tree:i.treeToo;if(e.dateRange=[i.dateMinNumeric,i.dateMaxNumeric],a.selectedStrain&&!s.selectedStrain&&(r.selectedTip=null,r.hovered=null),!s.nodeColorsVersion||a.nodeColorsVersion===s.nodeColorsVersion&&i.colorByConfidence===n.colorByConfidence||(o.changeColorBy=!0,o.branchStroke=Object(yt.a)(s,i.colorByConfidence,i.colorBy),o.tipStroke=s.nodeColors,o.fill=s.nodeColors.map((function(t){return Object(at.g)(t).brighter([.65]).toString()}))),s.visibilityVersion&&a.visibilityVersion!==s.visibilityVersion&&(o.changeVisibility=!0,o.visibility=s.visibility),s.tipRadiiVersion&&a.tipRadiiVersion!==s.tipRadiiVersion&&(o.changeTipRadii=!0,o.tipRadii=s.tipRadii),a.branchThicknessVersion!==s.branchThicknessVersion&&(o.changeBranchThickness=!0,o.branchThickness=s.branchThickness),n.distanceMeasure!==i.distanceMeasure&&(o.newDistance=i.distanceMeasure),n.selectedBranchLabel!==i.selectedBranchLabel&&(o.newBranchLabellingKey=i.selectedBranchLabel),!0===n.temporalConfidence.display&&!1===i.temporalConfidence.display||!0===n.temporalConfidence.on&&!1===i.temporalConfidence.on?o.removeConfidences=!0:!0===i.temporalConfidence.display&&!1===n.temporalConfidence.on&&!0===i.temporalConfidence.on&&(o.showConfidences=!0),n.layout!==i.layout&&(o.newLayout=i.layout),a.idxOfInViewRootNode!==s.idxOfInViewRootNode){var l=e.nodes[s.idxOfInViewRootNode];o.zoomIntoClade=l,r.selectedBranch=0===s.idxOfInViewRootNode?null:l,r.selectedTip=null,r.hovered=null,"unrooted"===i.layout&&(o.updateLayout=!0)}n.width===i.width&&n.height===i.height||(o.svgHasChangedDimensions=!0),t&&n.showTreeToo!==i.showTreeToo&&(o.svgHasChangedDimensions=!0);var u=Object.keys(o).length;return u&&(o.animationInProgress="Pause"===i.animationPlayPauseButton,e.change(o)),[!!Object.keys(r).length&&r,u]},Xt=function(t){t.visibility===O.b&&((1===t.that.params.orientation[0]?this.state.tree:this.state.treeToo).svg.select(Object(mt.e)("#tip",t.n.name)).attr("r",(function(t){return t.r+4})),this.setState({hovered:{d:t,type:".tip"}}))},$t=function(t){if(t.visibility===O.b&&!this.props.narrativeMode){this.setState({hovered:null,selectedTip:t});var e=1===t.that.params.orientation[0]?{treeIdx:t.n.arrayIdx}:{treeTooIdx:t.n.arrayIdx};this.props.dispatch(Object(S.f)({tipSelected:e,cladeSelected:this.props.tree.selectedClade}))}},Jt=function(t){if(t.visibility===O.b){if(function(t){t&&wt(t,Object(yt.e)(t.parent.branchStroke),Object(yt.e)(t.branchStroke))}(t),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on){var e=1===t.that.params.orientation[0]?this.state.tree:this.state.treeToo;"confidenceIntervals"in e.groups||(e.groups.confidenceIntervals=e.svg.append("g").attr("id","confidenceIntervals")),e.groups.confidenceIntervals.selectAll(".conf").data([t]).enter().call((function(t){return e.drawSingleCI(t,.5)}))}this.setState({hovered:{d:t,type:".branch"}})}},te=function(t){if(t.visibility===O.b&&!this.props.narrativeMode){var e,n,i=[void 0,void 0];if(t.n.branch_attrs&&void 0!==t.n.branch_attrs.labels&&(n=Object.keys(t.n.branch_attrs.labels).filter((function(t){return"aa"!==t}))),n&&n.length){var o=this.props.tree.availableBranchLabels;n.sort((function(t,e){return o.indexOf(t)-o.indexOf(e)}));var r=n[0];e="".concat(r,":").concat(t.n.branch_attrs.labels[r])}var a=Object(mt.f)(t.n)===t.n.arrayIdx?Object(mt.g)(t.n,this.props.distanceMeasure).arrayIdx:t.n.arrayIdx;1===t.that.params.orientation[0]?i[0]=a:i[1]=a,this.props.dispatch(Object(S.f)({root:i,cladeSelected:e}))}},ee=function(t){(function(t){t&&wt(t,t.parent.branchStroke,t.branchStroke)}(t),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on)&&(1===t.that.params.orientation[0]?this.state.tree:this.state.treeToo).removeConfidence();this.state.hovered&&this.setState({hovered:null})},ne=function(t){var e=1===t.that.params.orientation[0]?this.state.tree:this.state.treeToo;this.state.selectedTip||e.svg.select(Object(mt.e)("#tip",t.n.name)).attr("r",(function(t){return t.r})),this.state.hovered&&this.setState({hovered:null})},ie=function(t){(1===t.that.params.orientation[0]?this.state.tree:this.state.treeToo).svg.select(Object(mt.e)("#tip",t.n.name)).attr("r",(function(t){return t.r})),this.setState({selectedTip:null,hovered:null}),this.props.dispatch(Object(S.f)({tipSelected:{clear:!0},cladeSelected:this.props.tree.selectedClade}))},oe=n(754),re=function(t,e,n,i){var o=e?t.domRefs.mainTree:t.domRefs.secondTree,r=e?i.tree:i.treeToo;r.loaded?n.render(Object(oe.a)(o),i.layout,i.distanceMeasure,{grid:!0,confidence:i.temporalConfidence.display,branchLabelKey:i.selectedBranchLabel,orientation:e?[1,1]:[-1,1],tipLabels:!0,showTipLabels:!0},{onTipHover:Xt.bind(t),onTipClick:$t.bind(t),onBranchHover:Jt.bind(t),onBranchClick:te.bind(t),onBranchLeave:ee.bind(t),onTipLeave:ne.bind(t),tipLabel:function(t){return t.n.name}},r.branchThickness,r.visibility,i.temporalConfidence.on,r.vaccines,Object(yt.a)(r,i.colorByConfidence,i.colorBy),r.nodeColors,r.nodeColors.map((function(t){return Object(at.g)(t).brighter([.65]).toString()})),r.tipRadii,[i.dateMinNumeric,i.dateMaxNumeric]):console.warn("can't run renderTree (not loaded)")};function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ue=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(le()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),(e=n.call(this,t)).state={left:0,top:31,lookup:void 0,drawn:!1},e.timeout=!1,e}return a()(i,[{key:"shouldComponentUpdate",value:function(t){return this.props.width!==t.width||this.props.height!==t.height||this.props.leftTreeName!==t.leftTreeName||this.props.rightTreeName!==t.rightTreeName}},{key:"drawLines",value:function(t){t||(t=this.props);var e=t.lookup.length>750?.25:t.lookup.length>100?.5:1;Object(oe.a)(this.d3ref).selectAll("*").remove();var n=function(t){return function(e){var n=t.leftNodes[e[0]].shell,i=t.rightNodes[e[1]].shell;return"M ".concat(n.xTip,",").concat(n.yTip," H ").concat(t.width/2-t.spaceBetweenTrees/2," L ").concat(t.width/2+t.spaceBetweenTrees/2,",").concat(i.yTip," H ").concat(t.width/2+t.spaceBetweenTrees/2+i.xTip)}}(t);Object(oe.a)(this.d3ref).selectAll(".tangleLine").data(t.lookup).enter().append("path").attr("class","tangleLine").attr("d",n).attr("stroke-width",e).attr("stroke",(function(e){return t.colors[e[0]]})).attr("fill","none")}},{key:"componentWillReceiveProps",value:function(t){!this.state.drawn&&t.rightNodes[0].shell&&(this.drawLines(t),this.setState({drawn:!0}))}},{key:"componentDidMount",value:function(){!this.state.drawn&&this.props.rightNodes[0].shell&&(this.drawLines(this.props),this.setState({drawn:!0}))}},{key:"componentDidUpdate",value:function(t){this.props.width===t.width&&this.props.height===t.height||(this.timeout?window.clearTimeout(this.timeout):Object(oe.a)(this.d3ref).selectAll(".tangleLine").remove(),this.timeout=window.setTimeout(this.drawLines.bind(this),1e3))}},{key:"render",value:function(){var t=this,e={position:"absolute",top:5,zIndex:100,fontSize:16,color:"#000",fontWeight:500},n=[this.props.width/2-this.props.spaceBetweenTrees/2,this.props.width/2+this.props.spaceBetweenTrees/2];return y.a.createElement("div",{id:"TangleContainer"},y.a.createElement("div",{id:"MainTreeTitle",style:se({},e,{left:n[0],transform:"translateX(-100%)"})},this.props.leftTreeName),y.a.createElement("div",{id:"SecondTreeTitle",style:se({},e,{left:n[1]})},this.props.rightTreeName),y.a.createElement("div",{id:"TangleSvgContainer",style:{position:"absolute",left:this.state.left,top:this.state.top,zIndex:100,pointerEvents:"none"}},y.a.createElement("svg",{id:"Tangle",style:{cursor:"default",width:this.props.width,height:this.props.height},ref:function(e){t.d3ref=e}})))}}]),i}(y.a.Component),ce=n(534),he=function(t,e){for(var n=0,i=0,o=0,r=0,a=0,s=0,l=0;l<e.nodes.length;l++){var u=e.nodes[l].n;if(!u.children&&t.strainToNode[u.name]){var c=t.strainToNode[u.name].n.yvalue,h=u.yvalue;n++,i+=c,o+=h,r+=Math.pow(c,2),a+=Math.pow(h,2),s+=c*h}}return r/=n,a/=n,((s/=n)-(i/=n)*(o/=n))/Math.sqrt((r-Math.pow(i,2))*(a-Math.pow(o,2)))},pe=function(t,e){!function(t,e){for(var n=he(t,e),i=0;i<e.nodes.length;i++){var o=e.nodes[i],r=o.n;if(o.children){for(var a=r,s=function(){var t=a.children[0];a.children.forEach((function(e){e.yvalue<t.yvalue&&(t=e)})),a=t};a.hasChildren;)s();var l=a.yvalue-1;o.children.reverse(),r.children.reverse(),Object(mt.i)(o,l);var u=he(t,e);n>u?(o.children.reverse(),r.children.reverse(),Object(mt.i)(o,l)):n=u}}}(t,e),Object(mt.h)(e.nodes)};function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ge=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(me()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),e=n.call(this,t),g()(l()(e),"getStyles",(function(){var t=0!==e.props.tree.idxOfInViewRootNode||0!==e.props.treeToo.idxOfInViewRootNode;return{resetTreeButton:{zIndex:100,position:"absolute",right:5,top:0,cursor:t?"pointer":"auto",color:t?M.a:M.f}}})),e.domRefs={mainTree:void 0,secondTree:void 0},e.tangleRef=void 0,e.state={hover:null,selectedBranch:null,selectedTip:null,tree:null,treeToo:null},e.clearSelectedTip=ie.bind(l()(e)),e.redrawTree=function(){e.props.dispatch(Object(S.f)({root:[0,0]}))},e}return a()(i,[{key:"setUpAndRenderTreeToo",value:function(t,e){e.treeToo=new It(t.treeToo.nodes,"RIGHT"),O.g&&pe(e.tree,e.treeToo),re(this,!1,e.treeToo,t)}},{key:"componentDidMount",value:function(){if(this.props.tree.loaded){var t={};t.tree=new It(this.props.tree.nodes,"LEFT"),re(this,!0,t.tree,this.props),this.props.showTreeToo&&this.setUpAndRenderTreeToo(this.props,t),this.setState(t)}}},{key:"componentDidUpdate",value:function(t){var e={},n=!1,i=Qt(!0,this.state.tree,t,this.props),o=rt()(i,2),r=o[0],a=o[1];if(r&&(e=r),t.showTreeToo!==this.props.showTreeToo)this.props.showTreeToo?(this.state.treeToo&&this.state.treeToo.clearSVG(),e.tree=this.state.tree,this.setUpAndRenderTreeToo(this.props,e),this.tangleRef&&this.tangleRef.drawLines()):e.treeToo=null;else if(this.state.treeToo){var s=Qt(!1,this.state.treeToo,t,this.props),l=rt()(s,2);l[0],n=l[1]}this.tangleRef&&(a||n)&&this.tangleRef.drawLines(),Object.keys(e).length&&this.setState(e)}},{key:"renderTreeDiv",value:function(t){var e=this,n=t.width,i=t.height,o=t.mainTree;return y.a.createElement("svg",{id:o?"MainTree":"SecondTree",style:{pointerEvents:"auto",cursor:"default",userSelect:"none"},width:n,height:i,ref:function(t){o?e.domRefs.mainTree=t:e.domRefs.secondTree=t}})}},{key:"render",value:function(){var t=this,e=this.props.t,n=this.getStyles(),i=this.props.showTreeToo?(this.props.width-100)/2:this.props.width;return y.a.createElement(k.a,{center:!0,title:e("Phylogeny")},y.a.createElement(ce.a,null,y.a.createElement(dt,{width:this.props.width})),y.a.createElement(Kt,{hovered:this.state.hovered,colorBy:this.props.colorBy,colorByConfidence:this.props.colorByConfidence,colorScale:this.props.colorScale,colorings:this.props.metadata.colorings,panelDims:{width:this.props.width,height:this.props.height,spaceBetweenTrees:100},t:e}),y.a.createElement(nt,{goAwayCallback:this.clearSelectedTip,tip:this.state.selectedTip,colorings:this.props.metadata.colorings,t:e}),this.props.showTangle&&this.state.tree&&this.state.treeToo?y.a.createElement(ue,{ref:function(e){t.tangleRef=e},width:this.props.width,height:this.props.height,lookup:this.props.treeToo.tangleTipLookup,leftNodes:this.props.tree.nodes,rightNodes:this.props.treeToo.nodes,colors:this.props.tree.nodeColors,cVersion:this.props.tree.nodeColorsVersion,vVersion:this.props.tree.visibilityVersion,metric:this.props.distanceMeasure,spaceBetweenTrees:100,leftTreeName:this.props.tree.name,rightTreeName:this.props.showTreeToo}):null,this.renderTreeDiv({width:i,height:this.props.height,mainTree:!0}),this.props.showTreeToo?y.a.createElement("div",{id:"treeSpacer",style:{width:100}}):null,this.props.showTreeToo?this.renderTreeDiv({width:i,height:this.props.height,mainTree:!1}):null,this.props.narrativeMode?null:y.a.createElement("button",{style:fe({},M.o,{},n.resetTreeButton),onClick:this.redrawTree},e("Reset Layout")))}}]),i}(y.a.Component),ve=Object(T.c)()(ge);function ye(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return _e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,r=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){a=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw o}}}}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var be,we=function(t){return Object.prototype.hasOwnProperty.call(t,"paper_url")&&!t.paper_url.endsWith("/")&&"?"!==t.paper_url},xe="text/plain;charset=utf-8;",Me="text/tab-separated-values;charset=utf-8;",Ee="image/svg+xml;charset=utf-8",Le=function(t,e,n){var i=new Blob([n],{type:e}),o=document.createElement("a"),r=URL.createObjectURL(i);o.setAttribute("href",r),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},Te=function(t,e,n,i){var o=i?e+"_timetree.nwk":e+"_tree.nwk",r=i?"TimeTree":"Tree";Le(o,xe,function(t,e){return function t(n,i){var o="";if(n.hasChildren){var r=[];n.children.forEach((function(i){var o=t(i,e?Object(Z.d)(n,"num_date"):Object(Z.b)(n));r.push(o)})),o+="("+r.join(",")+")"+n.name+":",o+=(e?Object(Z.d)(n,"num_date"):Object(Z.b)(n))-i}else{var a=n.name+":";o+=a+=(e?Object(Z.d)(n,"num_date"):Object(Z.b)(n))-i}return o}(t,0)+";"}(n,i)),t(Object(it.b)({message:r+" written to "+o}))},ke=function(t){var e=t.match(/^(<.+?>)(.+)<\/.+?>$/);if(e){var n=e[1].match(/width.+?([0-9.]+).+height.+?([0-9.]+)/);if(n){var i=e[1].match(/viewBox="([0-9-]+)\s([0-9-]+)\s([0-9-]+)\s([0-9-]+)"/);return{x:0,y:0,viewbox:i?i.slice(1):void 0,width:parseFloat(n[1]),height:parseFloat(n[2]),inner:e[2]}}}},Se=function(t,e,n){var i='<svg id="'.concat(e,'" width="').concat(n.width,'" height="').concat(n.height,'" x="').concat(n.x,'" y="').concat(n.y,'">');t.push(i),t.push(n.inner),t.push("</svg>")},Ce=function(t,e,n,i,o,r){var a=[],s={tree:void 0,map:void 0,entropy:void 0,frequencies:void 0};if(-1!==n.indexOf("tree")){try{s.tree=ke((new XMLSerializer).serializeToString(document.getElementById("MainTree"))),s.treeLegend=ke((new XMLSerializer).serializeToString(document.getElementById("TreeLegendContainer")))}catch(t){s.tree=void 0,a.push("tree"),console.error("Tree SVG save error:",t)}if(s.tree&&document.getElementById("SecondTree"))try{s.secondTree=ke((new XMLSerializer).serializeToString(document.getElementById("SecondTree"))),document.getElementById("Tangle")&&(s.tangle=ke((new XMLSerializer).serializeToString(document.getElementById("Tangle"))))}catch(t){a.push("second tree / tanglegram"),console.error("Second Tree / tanglegram SVG save error:",t)}}if(-1!==n.indexOf("entropy"))try{s.entropy=ke((new XMLSerializer).serializeToString(document.getElementById("d3entropyParent"))),s.entropy.inner=s.entropy.inner.replace(/<text/g,'<text class="txt"'),s.entropy.inner='<style>.txt { font-family: "Lato", "Helvetica Neue", "Helvetica", "sans-serif"; }</style>'.concat(s.entropy.inner)}catch(t){s.entropy=void 0,a.push("entropy"),console.error("Entropy SVG save error:",t)}if(-1!==n.indexOf("frequencies"))try{s.frequencies=ke((new XMLSerializer).serializeToString(document.getElementById("d3frequenciesSVG")))}catch(t){s.frequencies=void 0,a.push("frequencies"),console.error("Frequencies SVG save error:",t)}-1!==n.indexOf("map")&&r&&(s.map={x:0,y:0,viewbox:void 0,width:parseFloat(r.mapDimensions.x),height:parseFloat(r.mapDimensions.y),inner:r.mapSvg});var l=[],u=function(t,e,n){var i=0,o=0;for(var r in t.secondTree&&(t.secondTree.x=100+t.tree.width,t.tree.width+=100+t.secondTree.width),t.tree&&t.map?"grid"===e?(i=t.tree.width+50+t.map.width,o=Math.max(t.tree.height,t.map.height),t.map.x=t.tree.width+50):(i=Math.max(t.tree.width,t.map.width),o=t.tree.height+50+t.map.height,t.map.y=t.tree.height+50):t.tree?(i=t.tree.width,o=t.tree.height):t.map&&(i=t.map.width,o=t.map.height),t.entropy&&(i<t.entropy.width?i=t.entropy.width:t.entropy.x=(i-t.entropy.width)/2,o?(t.entropy.y=o+50,o+=50+t.entropy.height):o=t.entropy.height),t.frequencies&&(i<t.frequencies.width?i=t.frequencies.width:t.frequencies.x=(i-t.frequencies.width)/2,o?(t.frequencies.y=o+50,o+=50+t.frequencies.height):o=t.frequencies.height),t)t[r]&&(t[r].x+=50,t[r].y+=50);o+=100;var a=36*n+20;return{width:i+=100,height:o+=a,padding:50,textY:o-a,textHeight:a}}(s,i,o.length);for(var c in l.push('<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="'.concat(u.width,'" height="').concat(u.height,'">')),s)s[c]&&Se(l,c,s[c]);l.push('<foreignObject x="'.concat(u.padding,'" y="').concat(u.height-u.textHeight,'" height="').concat(u.textHeight,'" width="').concat(u.width-2*u.padding,'">')),o.forEach((function(t){l.push('<p xmlns="http://www.w3.org/1999/xhtml" style="font-family:lato,sans-serif;">'),l.push(t),l.push("</p>")})),l.push("</foreignObject>"),l.push("</svg>"),Le(e+".svg",Ee,l.join("\n")),a.length?t(Object(it.d)({message:"Vector image saved",details:"Saved to ".concat(e,".svg, however there were errors with ").concat(a.join(", "))})):t(Object(it.b)({message:"Vector image saved",details:e+".svg"}))},je=function(t,e,n,i,o){-1!==n.indexOf("map")?window.L.getMapSvg(Ce.bind(void 0,t,e,n,i,o)):Ce(t,e,n,i,o,void 0)},Oe=function(t){var e=t.theme,n=t.selected,i=t.width,o=n?e.selectedColor:e.unselectedColor;return y.a.createElement("svg",{width:i,height:i+5},y.a.createElement("g",{transform:"translate(0,2)"},y.a.createElement("svg",{width:i,height:i,viewBox:"16 19 27 22"},y.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)"},y.a.createElement("polyline",{id:"Path-3",stroke:o,points:"2.94117647 12.8571429 2.94117647 18.6083984 17.8459616 18.6083984 17.8459616 16.0260882 24.870031 16.0260882"}),y.a.createElement("polyline",{id:"Path-4",stroke:o,points:"17.8500004 18.5714286 17.8500004 20 25.0119374 20"}),y.a.createElement("polyline",{id:"Path-5",stroke:o,points:"2.94117647 12.8571429 3.00303284 7.21191058 10.2360102 7.11220045 10.4159559 2.99881623 17.1561911 2.93803403 17.1561911 0 24.313534 0"}),y.a.createElement("polyline",{id:"Path-6",stroke:o,points:"17.1599998 2.85714286 17.1599998 4.28571429 24.512941 4.28571429"}),y.a.createElement("path",{d:"M0,12.8571429 L2.94117647,12.8571429",id:"Path-6",stroke:o}),y.a.createElement("polyline",{id:"Path-7",stroke:o,points:"10.2941176 7.14285714 10.2941176 11.4285714 24.5454676 11.4285714"})))))},Ae=function(t){var e=t.theme,n=t.selected,i=t.width,o=n?e.selectedColor:e.unselectedColor;return y.a.createElement("svg",{width:i,height:i+5},y.a.createElement("g",{transform:"translate(0,6)"},y.a.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},y.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},y.a.createElement("rect",{fill:"none",stroke:o,x:"1",y:"1",width:"14",height:"17"}),y.a.createElement("rect",{fill:"none",stroke:o,x:"15",y:"1",width:"14",height:"17"}),y.a.createElement("rect",{fill:"none",stroke:o,x:"1",y:"18",width:"28",height:"8"})))))};function De(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Pe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ne,Ie=Object(x.d)(Oe),ze=Object(x.d)(Ae),Re=Object(x.d)((function(t){var e=t.theme,n=t.selected,i=t.width,o=n?e.selectedColor:e.unselectedColor;return y.a.createElement("svg",{width:i,height:i+5},y.a.createElement("g",{transform:"translate(0,7)"},y.a.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},y.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},y.a.createElement("line",{stroke:o,x1:"3.3",y1:"3.8",x2:"27.7",y2:"3.8"}),y.a.createElement("line",{stroke:o,x1:"3.3",y1:"9.2",x2:"27.7",y2:"9.2"}),y.a.createElement("line",{stroke:o,x1:"3.3",y1:"14.5",x2:"27.7",y2:"14.5"}),y.a.createElement("line",{stroke:o,x1:"3.3",y1:"19.9",x2:"27.7",y2:"19.9"}),y.a.createElement("line",{stroke:o,x1:"3.3",y1:"25.2",x2:"27.7",y2:"25.2"})))))})),Be={nextstrain:{author:"Hadfield et al",title:"Nextstrain: real-time tracking of pathogen evolution",year:"2018",journal:"Bioinformatics",href:"https://doi.org/10.1093/bioinformatics/bty407"},treetime:{author:"Sagulenko et al",title:"TreeTime: Maximum-likelihood phylodynamic analysis",journal:"Virus Evolution",year:"2017",href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5758920/"},titers:{author:"Neher et al",titleJournalYear:"Prediction, dynamics, and visualization of antigenic phenotypes of seasonal influenza viruses",journal:"PNAS",year:"2016",href:"http://www.pnas.org/content/113/12/E1701.abstract"}},Fe=Object(w.b)((function(t){return{browserDimensions:t.browserDimensions.browserDimensions,show:t.controls.showDownload,colorBy:t.controls.colorBy,metadata:t.metadata,tree:t.tree,nodes:t.tree.nodes,visibleStateCounts:t.tree.visibleStateCounts,filters:t.controls.filters,visibility:t.tree.visibility,panelsToDisplay:t.controls.panelsToDisplay,panelLayout:t.controls.panelLayout}}))(be=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Pe()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),(e=n.call(this,t)).getStyles=function(t,e){return{behind:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"all",zIndex:2e3,backgroundColor:"rgba(80, 80, 80, .20)",display:"flex",justifyContent:"center",alignItems:"center",wordWrap:"break-word",wordBreak:"break-word"},title:{fontWeight:500,fontSize:32,marginTop:"20px",marginBottom:"20px"},secondTitle:{fontWeight:500,marginTop:"0px",marginBottom:"20px"},modal:{marginLeft:200,marginTop:130,width:t-400,height:e-260,borderRadius:2,backgroundColor:"rgba(250, 250, 250, 1)",overflowY:"auto"},break:{marginBottom:"10px"}}},e.dismissModal=e.dismissModal.bind(l()(e)),e}return a()(i,[{key:"componentDidMount",value:function(){var t=this;W.a.bind("d",(function(){je(t.props.dispatch,t.getFilePrefix(),t.props.panelsToDisplay,t.props.panelLayout,t.makeTextStringsForSVGExport())}))}},{key:"getRelevantPublications",value:function(){var t=[Be.nextstrain,Be.treetime];return-1!==["cTiter","rb","ep","ne"].indexOf(this.props.colorBy)&&t.push(Be.titers),t}},{key:"formatPublications",value:function(t){return y.a.createElement("span",null,y.a.createElement("ul",null,t.map((function(t){return y.a.createElement("li",{key:t.href},y.a.createElement("a",{href:t.href,target:"_blank",rel:"noreferrer noopener"},t.author,", ",t.title,", ",y.a.createElement("i",null,t.journal)," (",t.year,")"))}))))}},{key:"getFilePrefix",value:function(){return"nextstrain_"+window.location.pathname.replace(/^\//,"").replace(/:/g,"-").replace(/\//g,"_")}},{key:"makeTextStringsForSVGExport",value:function(){var t=[];t.push(this.props.metadata.title),t.push("Last updated ".concat(this.props.metadata.updated));var e=window.location.href.replace(/&/g,"&amp;");return t.push('Downloaded from <a href="'.concat(e,'">').concat(e,"</a> on ").concat((new Date).toLocaleString())),t.push(this.createSummaryWrapper()),t.push(""),t.push("".concat(this.props.t("Data usage part 1"),' A full list of sequence authors is available via <a href="https://nextstrain.org">nextstrain.org</a>.')),t.push("Relevant publications:"),this.getRelevantPublications().forEach((function(e){t.push('<a href="'.concat(e.href,'">').concat(e.author,", ").concat(e.title,", ").concat(e.journal," (").concat(e.year,")</a>"))})),t}},{key:"downloadButtons",value:function(){var t=this,e=this.getFilePrefix(),n=[["Tree (newick)",y.a.createElement(Ie,{width:25,selected:!0}),function(){return Te(t.props.dispatch,e,t.props.nodes[0],!1)}],["TimeTree (newick)",y.a.createElement(Ie,{width:25,selected:!0}),function(){return Te(t.props.dispatch,e,t.props.nodes[0],!0)}],["Strain Metadata (TSV)",y.a.createElement(Re,{width:25,selected:!0}),function(){return function(t,e,n,i){var o,r={},a=["Strain"],s=ye(n);try{var l=function(){var t=o.value;if(t.hasChildren)return"continue";if(r[t.name]={Strain:t.name},!t.node_attrs)return"continue";var e,n=["author","div","num_date","vaccine","accession"],i=ye(Object.keys(t.node_attrs).filter((function(t){return!n.includes(t)})));try{for(i.s();!(e=i.n()).done;){var s=e.value;a.includes(s)||a.push(s);var l=Object(Z.d)(t,s);l&&("string"==typeof l?r[t.name][s]=l:"number"==typeof l&&(r[t.name][s]=parseFloat(l).toFixed(2)))}}catch(t){i.e(t)}finally{i.f()}var u=Object(Z.d)(t,"num_date");if(u){var c="Collection Data";a.includes(c)||a.push(c);var h=Object(Z.d)(t,"num_date",{confidence:!0});h&&h[0]!==h[1]?r[t.name][c]="".concat(Object(j.d)(u)," (").concat(Object(j.d)(h[0])," - ").concat(Object(j.d)(h[1]),")"):r[t.name][c]=Object(j.d)(u)}var p=Object(Z.c)(t);if(p){a.includes("Author")||a.push("Author"),r[t.name].Author=p.value,we(p)&&(r[t.name].Author+=" (".concat(p.paper_url,")"))}var d=Object(Z.f)(t);if(d&&d.selection_date){var f="Vaccine Selection Date";a.includes(f)||a.push(f),r[t.name][f]=d.selection_date}var m=Object(Z.a)(t);if(m){a.includes("Accession")||a.push("Accession"),r[t.name].Accession=m}};for(s.s();!(o=s.n()).done;)l()}catch(t){s.e(t)}finally{s.f()}for(var u=[a.map((function(t){return i&&i[t]&&i[t].title?i[t].title:t})).join("\t")],c=0,h=Object.values(r);c<h.length;c++){var p,d=h[c],f=[],m=ye(a);try{for(m.s();!(p=m.n()).done;){var g=p.value;f.push(d[g]||"")}}catch(t){m.e(t)}finally{m.f()}u.push(f.join("\t"))}var v="".concat(e,"_metadata.tsv");Le(v,Me,u.join("\n")),t(Object(it.b)({message:"Metadata exported to ".concat(v)}))}(t.props.dispatch,e,t.props.nodes,t.props.metadata.colorings)}]];(function(t){for(var e=0;e<t.nodes.length;e++)if(Object(Z.c)(t.nodes[e]))return!0;return!1})(this.props.tree)&&n.push(["Author Metadata (TSV)",y.a.createElement(Re,{width:25,selected:!0}),function(){return function(t,e,n){var i=[];i.push(["Author","n (strains)","publication title","journal","publication URL","strains"].join("\t"));var o=e+"_authors.tsv",r={};n.nodes.filter((function(t){return!t.hasChildren})).forEach((function(t){var e=Object(Z.c)(t);e&&(r[e.value]?(r[e.value].count+=1,r[e.value].strains.push(t.name)):r[e.value]={author:e.value,title:e.title||"unknown",journal:e.journal||"unknown",url:we(e)?e.paper_url:"unknown",count:1,strains:[t.name]})})),Object.values(r).forEach((function(t){i.push([t.author,t.count,t.title,t.journal,t.url,t.strains.join(",")].join("\t"))})),Le(o,Me,i.join("\n")),t(Object(it.b)({message:"Author metadata exported",details:o}))}(t.props.dispatch,e,t.props.tree)}]),n.push(["Screenshot (SVG)",y.a.createElement(ze,{width:25,selected:!0}),function(){return je(t.props.dispatch,e,t.props.panelsToDisplay,t.props.panelLayout,t.makeTextStringsForSVGExport())}]);var i=Object.assign({},M.g,{backgroundColor:"rgba(0,0,0,0)",paddingLeft:"10px",color:"white"});return y.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},n.map((function(t){return y.a.createElement("div",{key:t[0],onClick:t[2],style:{cursor:"pointer"}},t[1],y.a.createElement("button",{style:i},t[0]))})))}},{key:"dismissModal",value:function(){this.props.dispatch({type:R.x})}},{key:"createSummaryWrapper",value:function(){return cn(this.props.metadata.mainTreeNumTips,this.props.nodes,this.props.filters,this.props.visibility,this.props.visibleStateCounts,void 0,this.props.t)}},{key:"render",value:function(){var t=this.props.t;if(!this.props.show)return null;var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?De(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},M.e.panel);e.width=.66*this.props.browserDimensions.width,e.maxWidth=e.width,e.maxHeight=.66*this.props.browserDimensions.height,e.fontSize=14,e.lineHeight=1.4;var n=this.props.metadata;return y.a.createElement("div",{style:M.e.modalContainer,onClick:this.dismissModal},y.a.createElement("div",{style:e,onClick:function(t){return Y(t)}},y.a.createElement("p",{style:M.e.topRightMessage},"(",t("click outside this box to return to the app"),")"),y.a.createElement("div",{style:M.e.modalSubheading},n.title," (",t("last updated")," ",n.updated,")"),y.a.createElement("div",null,this.createSummaryWrapper()),y.a.createElement("div",{style:M.e.break})," "+t("A full list of sequence authors is available via the TSV files below"),y.a.createElement("div",{style:M.e.break}),Ke({},{preamble:{fontWeight:300},acknowledgments:{fontWeight:300}}),y.a.createElement("div",{style:M.e.modalSubheading},t("Data usage policy")),t("Data usage part 1")+" "+t("Data usage part 2"),y.a.createElement("div",{style:M.e.modalSubheading},t("Please cite the authors who contributed genomic data (where relevant), as well as")+":"),this.formatPublications(this.getRelevantPublications()),y.a.createElement("div",{style:M.e.modalSubheading},t("Download data"),":"),this.downloadButtons()))}}]),i}(y.a.Component))||be,Ve=Object(T.c)()(Fe),We=n(549);function Ze(t,e){if(window.location.pathname.includes("inrb-drc"))return y.a.createElement("div",null,y.a.createElement("div",null,"This work is made possible by the open sharing of genetic data by research groups."),y.a.createElement("div",{className:"acknowledgments"},"These sequences were generated by the Democratic Republic of the Congo Sequencing Consortium led by the Institut National de Recherche Biomédicales (INRB), Kinshasa, DRC, partnered with the United States Army Medical Reseach Insititute of Infectious Diseases (USAMRIID), Maryland, USA; University of Nebraska Medical Center (UNMC), Nebraska, USA; Institut Pasteur de Dakar, Dakar, Senegal; TransVIHMI, Institut de Recherche pour le Développement (IRD), Institut National de la Santé et de la Recherche Médicale (INSERM), Université de Montpellier, Montpellier, France."),y.a.createElement("div",{className:"acknowledgments"},"These data were shared with the Ministry of Health of the DRC, and with the public via this ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/drc-2018-viral-genome-characterization/230"},"virological.org")," post, which is continually updated. If you intend to use these sequences prior to publication, please contact Drs. Muyembe-Tamfum and Ahuka to coordinate."));if(!window.location.pathname.includes("community")){if(window.location.pathname.includes("ebola"))return function(t){return y.a.createElement("div",null,t,y.a.createElement("div",{className:"acknowledgments"},"Special thanks to Nick Loman, Matt Cotten, Ian Goodfellow and Paul Kellam for spearheading data sharing efforts during the outbreak. For a more complete phylogeographic analysis of these data see ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://dx.doi.org/10.1038/nature22040"},"Dudas et al"),". Curated data used in the paper are available at ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://github.com/ebov/space-time"},"github.com/ebov/space-time"),". The animation shown here was inspired by ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://youtu.be/eWnIhWUpQiQ"},"a work")," by ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://bedford.io/team/gytis-dudas/"},"Gytis Dudas"),"."))}(e);if(window.location.pathname.includes("zika"))return function(t){return y.a.createElement("div",null,t,y.a.createElement("div",{className:"acknowledgments"},"Special thanks to Nick Loman, Nathan Grubaugh, Kristof Theys, Nuno Faria, Kristian Andersen, Andrew Rambaut and Karl Erlandson for data sharing, comments and suggestions."))}(e);if(window.location.pathname.includes("mumps"))return function(t){return y.a.createElement("div",null,t,y.a.createElement("div",{className:"acknowledgments"},"Special thanks to Duah Alkam, Piroon Jenjaroenpun , Thidathip Wongsurawat, Zulema Udaondo, Preecha Patumcharoenpol, Michael Robeson, Dirk Haselow, William Mason, Intawat Nookaew, David Ussery, Se-Ran Jun, Jennifer Gardy, Shirlee Wohl, Jeff Joy, Patrick Stapleton, Nathan Yozwiak, Hayden Metsky, Agatha Jassem, Louise Moncla, Gytis Dudas and Pardis Sabeti for data sharing, comments and suggestions."))}(e);if(window.location.pathname.includes("lassa"))return function(t){return y.a.createElement("div",{className:"acknowledgments"},"This work is made possible by the open sharing of genetic data by research groups, including these groups currently collecting Lassa sequences:",y.a.createElement("p",null),y.a.createElement("a",{href:"http://acegid.org/"},"Christian Happi"),", ",y.a.createElement("a",{href:"https://www.sabetilab.org/"},"Pardis Sabeti"),", ",y.a.createElement("a",{href:"https://www.sabetilab.org/katherine-siddle/"},"Katherine Siddle")," and colleagues, whose data was shared via ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/new-lassa-virus-genomes-from-nigeria-2015-2016/191"},"this viroligical.org post. "),"If you intend to use these sequences prior to publication, please contact them directly to coordinate. ",y.a.createElement("span",{className:"link",onClick:function(){return t(Object(S.a)("set","authors",["Odia_et_al"]))}},"Click here")," here to see these sequences in isolation.",y.a.createElement("p",null),"The Irrua specialist Teaching Hospital (ISTH) and Institute for Lassa Fever Research and Control (ILFRC), Irrua, Edo State, Nigeria;\n        The Bernhard-Nocht Institute for Tropical Medicine (BNITM), Hamburg, Germany;\n        Public Health England (PHE);\n        African Center of Excellence for Genomics of Infectious Disease (ACEGID ), Redeemer’s University, Ede, Nigeria;\n        Broad Institute of MIT and Harvard University (Cambridge, MA, USA).\n        For further details, including conditions of reuse, please contact ",y.a.createElement("a",{href:"mailto:epogbaini@yahoo.com"},"Ephraim Epogbaini"),", ",y.a.createElement("a",{href:"http://www.who.int/blueprint/about/stephan-gunther/en/"},"Stephan Günther")," and ",y.a.createElement("a",{href:"https://rega.kuleuven.be/cev/ecv/lab-members/PhilippeLemey.html"},"Philippe Lemey"),". Their data was first shared via ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/2018-lasv-sequencing-continued/192/8"},"this viroligical.org post"),", which is continually updated. ",y.a.createElement("span",{className:"link",onClick:function(){return t(Object(S.a)("set","authors",["ISTH-BNITM-PHE"]))}},"Click here")," here to see these sequences in isolation.")}(t);if(window.location.pathname.includes("WNV/NA"))return function(t){return y.a.createElement("div",{className:"acknowledgments"},"This work is possible due to the groups who have made their data openly available for analysis -\n        with a special thanks to Nikos Gurfield, Saran Grewal, Chris Barker, Ying Fang and the Andersen Lab for making ",y.a.createElement("a",{href:"https://andersen-lab.com/secrets/data/west-nile-genomics/"},"their data")," available ahead of publication. ","We also thank Simon Dellicour, Sebastian Lequime, Bram Vrancken, Philippe Lemey, Karthik Gangavarapu, Nate Matteson, Sharada Saraf\n        and Nathan Grubaugh for curating the original dataset; and Zhe Zheng and Anderson Brito helping with the updates\n        The data is being maintained by ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://bedford.io/team/james-hadfield/"},"James Hadfield")," and ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://grubaughlab.com"},"Nathan Grubaugh's lab."),y.a.createElement("p",null),"Our goal is to promote sequencing and sharing of West Nile virus genomes to improve our understanding of virus spread and evolution.\n        To aid in this effort, Nathan Grubaugh, Ryan Smith, and Kristian Andersen have initiated a large study,\n        including >70 collaborators from >30 US states, to sequence ~4,000 West Nile virus genomes from across the country: ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://westnile4k.org/"},"WestNile 4K.")," Their website includes a complete list of collaborators and information on how to join the project.\n      To conduct such an ambitious sequencing project, they adapted their highly multiplexed PCR approach for ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.nature.com/articles/nprot.2017.066"},"Zika virus sequencing")," on the Illumina and Minion platforms for West Nile Virus circulating in North America. Their ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://grubaughlab.com/open-science/amplicon-sequencing/"},"sequencing protocol and primers")," are free to use.\n        If you have any questions about West Nile virus sequencing, or if you have unpublished data that you would like to share, please email ",y.a.createElement("a",{href:"emailto:grubaughlab@gmail.com"},"grubaughlab@gmail.com"),".",y.a.createElement("p",null),"All data shown here are coding-complete genomes.",y.a.createElement("p",null),"WNV is split into three phenotypically relevant strains - NY99, WN02 and SW03 (",y.a.createElement("span",{className:"link",onClick:function(){return t(Object(We.a)("wnv_strain"))}},"click here")," to colour the tree by this). These strains are defined by these mutations (click to change the colouring of the tree):",y.a.createElement("ul",null,y.a.createElement("li",null,y.a.createElement("span",{className:"link",onClick:function(){return t(Object(We.a)(Object(lt.c)({gene:"env",positions:[159]})))}},"env-V159A")," designates the switch from NY99 (the original sequence) to WN02."),y.a.createElement("li",null,y.a.createElement("span",{className:"link",onClick:function(){return t(Object(We.a)(Object(lt.c)({gene:"NS4A",positions:[85]})))}},"NS4A-A85T")," designates the switch from WN02 to SW03 (WN02 displaced NY99; WN02 and SW03 co-circulate).")))}(t);if(window.location.pathname.includes("h7n9"))return y.a.createElement("div",{className:"acknowledgments"},"We thank the ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://gisaid.org"},"GISAID Initiative")," for enabling genomic surveillance of influenza and for providing a critical data sharing platform, and all of the groups who contribute to it.");if(window.location.pathname.includes("flu"))return y.a.createElement("div",null,y.a.createElement("div",{className:"acknowledgments"},"We thank the ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://gisaid.org"},"GISAID Initiative")," and the ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.who.int/influenza/gisrs_laboratory/en/"},"GISRS Network")," for critical surveillance efforts and open data sharing. Titer data used in antigenic analysis was generated by the ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.cdc.gov/flu/"},"Influenza Division at the US Centers for Disease Control and Prevention"),", the ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.crick.ac.uk/research/worldwide-influenza-centre"},"Worldwide Influenza Centre at the Francis Crick Institute"),", the ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.vidrl.org.au/"},"Victorian Infectious Diseases Reference Laboratory at the Australian Peter Doherty Institute for Infection and Immunity")," and the ",y.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.niid.go.jp/niid/en/flu-e.html"},"Influenza Virus Research Center at the Japan National Institute of Infectious Diseases"),"."),y.a.createElement("div",{className:"acknowledgments"},"Special thanks to Jackie Katz, Dave Wentworth, Becky Garten, Vivien Dugan, Xiyan Xu, Elizabeth Neuhaus, Sujatha Seenu, John McCauley, Rod Daniels, Vicki Gregory, Kanta Subbarao, Ian Barr, Aeron Hurt, Takato Odagiri, Shinji Watanabe, Tomoko Kuwahara, Michael Lässig, Marta Łuksza, Richard Reeve, Colin Russell, Sebastian Maurer-Stroh and Peter Bogner for feedback and advice. This analysis represents an updated frontend to the Nextflu informatic pipeline, originally available at nextflu.org."),y.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},y.a.createElement("div",{style:{flex:5}}),y.a.createElement("a",{key:5,href:"https://gisaid.org",target:"_blank",rel:"noreferrer noopener",style:{display:"flex",flexDirection:"column",justifyContent:"center"}},y.a.createElement("img",{alt:"gisaid-logo",width:"120",src:n(610)})),y.a.createElement("div",{style:{flex:1}}),y.a.createElement("a",{key:6,href:"http://www.who.int/influenza/gisrs_laboratory/en/",target:"_blank",rel:"noreferrer noopener"},y.a.createElement("img",{alt:"gisrs-logo",width:"120",src:n(611)})),y.a.createElement("div",{style:{flex:5}})))}return y.a.createElement("div",null,e)}function He(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return Ue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,r=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){a=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw o}}}}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ge=y.a.createElement("span",{style:{marginLeft:10,marginRight:10}},"•"),qe=x.c.div.withConfig({displayName:"footer__FooterStyles",componentId:"n42vt4-0"})(["margin-left:30px;padding-bottom:30px;font-family:",";font-size:15px;font-weight:300;color:rgb(136,136,136);line-height:1.4;h1{font-weight:700;font-size:2.2em;margin:0.2em 0;}h2{font-weight:600;font-size:2em;margin:0.2em 0;}h3{font-weight:500;font-size:1.8em;margin:0.2em 0;}h4{font-weight:500;font-size:1.6em;margin:0.1em 0;}h5{font-weight:500;font-size:1.4em;margin:0.1em 0;}h6{font-weight:500;font-size:1.2em;margin:0.1em 0;}pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px;}pre code{padding:0;margin:0;overflow:visible;font-size:100%;line-height:inherit;word-wrap:normal;background-color:initial;border:0;}p code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px;}.line{margin-top:20px;margin-bottom:20px;border-bottom:1px solid #CCC;}.finePrint{font-size:14px;}.acknowledgments{margin-top:10px;}.filterList{margin-top:10px;line-height:1.0;}.imageContainer{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;}img{margin-left:30px;margin-right:30px;margin-top:2px;margin-bottom:2px;}"],M.b),Ke=function(t,e){if(t.description){z.a.addHook("afterSanitizeAttributes",(function(t){"href"in t&&location.hostname!==t.hostname&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noreferrer nofollow")),D()(t.childNodes).filter((function(t){return"img"===t.localName})).length>0&&("a"===t.localName?t.parentNode.className+=" imageContainer":t.className+=" imageContainer")}));var n=(0,z.a.sanitize)(N()(t.description),{ALLOWED_TAGS:["div","h1","h2","h3","h4","h5","h6","p","em","strong","del","ol","ul","li","a","img","#text","code","pre","hr"],ALLOWED_ATTR:["href","src","width","height","alt"],KEEP_CONTENT:!1,ALLOW_DATA_ATTR:!1});return y.a.createElement("div",{className:"acknowledgments",dangerouslySetInnerHTML:{__html:n}})}var i=y.a.createElement("div",null,"This work is made possible by the open sharing of genetic data by research groups from all over the world. We gratefully acknowledge their contributions.");return"nextstrain.org"===window.location.hostname?Ze(e,i):y.a.createElement("div",null,i)},Qe=function(t,e,n,i){var o=-1===e[n].indexOf(i)?"add":"remove";t(Object(S.a)(o,n,[i]))},Xe=function(t,e,n,i,o,r){var a=-1!==e[n].indexOf(i);return a&&r?y.a.createElement("div",{key:i,style:{display:"inline-block"}},y.a.createElement("div",{className:"boxed-item-icon",onClick:function(){Qe(t,e,n,i)},role:"button",tabIndex:0},"×"),y.a.createElement("div",{className:"boxed-item active-with-icon"},o)):a?y.a.createElement("div",{className:"boxed-item active-clickable",key:i,onClick:function(){Qe(t,e,n,i)},role:"button",tabIndex:0},o):y.a.createElement("div",{className:"boxed-item inactive",key:i,onClick:function(){Qe(t,e,n,i)},role:"button",tabIndex:0},o)},$e=Object(w.b)((function(t){return{tree:t.tree,totalStateCounts:t.tree.totalStateCounts,metadata:t.metadata,colorOptions:t.metadata.colorOptions,browserDimensions:t.browserDimensions.browserDimensions,activeFilters:t.controls.filters}}))(Ne=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Ye()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"shouldComponentUpdate",value:function(t){if(this.props.tree.version!==t.tree.version||this.props.browserDimensions!==t.browserDimensions)return!0;if(Object.keys(this.props.activeFilters)!==Object.keys(t.activeFilters))return!0;if(Object.keys(this.props.activeFilters)){var e,n=He(this.props.activeFilters);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(this.props.activeFilters[i]!==t.activeFilters[i])return!0}}catch(t){n.e(t)}finally{n.f()}}return!1}},{key:"displayFilter",value:function(t){var e,n,i,o,r=this,a=this.props.t,s=this.props.totalStateCounts[t],l=this.props.metadata.colorings[t]?this.props.metadata.colorings[t].title:t;return y.a.createElement("div",null,a("Filter by {{filterTitle}}",{filterTitle:l}),this.props.activeFilters[t].length?(e=this.props.dispatch,n=[t],i="inlineRight",o=a("Clear {{filterName}} filter",{filterName:t}),y.a.createElement("div",{className:"".concat(i," boxed-item active-clickable"),style:{paddingLeft:"5px",paddingRight:"5px",display:"inline-block"},onClick:function(){n.forEach((function(t){return e(Object(S.a)("set",t,[]))}))}},o)):null,y.a.createElement("div",{className:"filterList"},y.a.createElement(B.a,{wrap:"wrap",justifyContent:"flex-start",alignItems:"center"},Array.from(s.keys()).filter((function(t){return Object(O.z)(t)})).sort().map((function(e){var n=y.a.createElement("span",null,"".concat(e," (").concat(s.get(e),")"));return Xe(r.props.dispatch,r.props.activeFilters,t,e,n,!1)})))))}},{key:"getUpdated",value:function(){var t=this.props.t;return this.props.metadata.updated?y.a.createElement("span",null,t("Data updated")," ",this.props.metadata.updated):null}},{key:"downloadDataButton",value:function(){var t=this,e=this.props.t;return y.a.createElement("button",{style:Object.assign({},M.g,{backgroundColor:"rgba(0,0,0,0)",color:M.h,margin:0,padding:0}),onClick:function(){t.props.dispatch({type:R.T})}},y.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"}),y.a.createElement("span",{style:{position:"relative"}}," "+e("Download data")))}},{key:"getCitation",value:function(){return y.a.createElement("span",null,"Nextstrain: ",y.a.createElement("a",{href:Be.nextstrain.href,target:"_blank",rel:"noopener noreferrer"},Be.nextstrain.author,", ",y.a.createElement("i",null,Be.nextstrain.journal)," (".concat(Be.nextstrain.year,")")))}},{key:"render",value:function(){var t=this;if(!this.props.metadata||!this.props.tree.nodes)return null;var e=this.props.width-30;return y.a.createElement(qe,null,y.a.createElement("div",{style:{width:e}},y.a.createElement("div",{className:"line"}),Ke(this.props.metadata,this.props.dispatch),y.a.createElement("div",{className:"line"}),Object.keys(this.props.activeFilters).map((function(e){return y.a.createElement("div",{key:e},t.displayFilter(e),y.a.createElement("div",{className:"line"}))})),y.a.createElement(B.a,{className:"finePrint"},this.getUpdated(),Ge,this.downloadDataButton(),Ge,"Auspice v"+F.version),y.a.createElement("div",{style:{height:"3px"}}),y.a.createElement(B.a,{className:"finePrint"},this.getCitation())))}}]),i}(y.a.Component))||Ne,Je=Object(T.c)()($e),tn={avatar:{marginRight:5,marginBottom:2},byline:{fontFamily:M.d,fontSize:15,marginLeft:2,marginTop:5,marginBottom:5,fontWeight:500,color:"#555",lineHeight:1.4,verticalAlign:"middle"},bylineWeight:{fontFamily:M.d,fontSize:15,fontWeight:500}};function en(t,e){var n=e.buildUrl;if("string"==typeof n){var i=n.match(/(https?:\/\/)?(www\.)?github.com\/([^/]+)/);if(i)return y.a.createElement("img",{style:tn.avatar,alt:"avatar",width:"28",src:"https://github.com/".concat(i[3],".png?size=200")})}return null}function nn(t,e){var n;return Object.prototype.hasOwnProperty.call(e,"maintainers")&&(n=e.maintainers,Array.isArray(n)&&n.length)?y.a.createElement("span",null,t("Maintained by")+" ",n.map((function(t,e){return y.a.createElement(y.a.Fragment,{key:t.name},t.url?y.a.createElement(on,{url:t.url},t.name):t.name,e===n.length-1?"":e===n.length-2?" and ":", ")})),"."):null}function on(t){var e=t.url,n=t.children;return y.a.createElement("a",{style:tn.bylineWeight,rel:"noopener noreferrer",href:e,target:"_blank"},n)}var rn,an=function(t){var e=t.width,n=t.metadata,i=Object(T.b)().t;return"nextstrain.org"!==window.location.hostname&&"dev.nextstrain.org"!==window.location.hostname||!window.location.pathname.startsWith("/ncov")?y.a.createElement("div",{width:e,style:tn.byline},en(i,n),function(t,e){if(Object.prototype.hasOwnProperty.call(e,"buildUrl")){var n=e.buildUrl;if("string"==typeof n&&(n.startsWith("https://")||n.startsWith("http://")||n.startsWith("www.")))return y.a.createElement("span",null,t("Built with")," ",y.a.createElement(on,{url:n},n.replace(/^(http[s]?:\/\/)/,"").replace(/^www\./,"").replace(/^github.com\//,"")),". ")}return null}(i,n),nn(i,n)):y.a.createElement("div",{width:e,style:tn.byline},en(i,n),nn(i,n),n.buildUrl&&y.a.createElement("span",null," Enabled by data from ",y.a.createElement("img",{src:"https://www.gisaid.org/fileadmin/gisaid/img/schild.png",alt:"gisaid-logo",width:"65"})))};function sn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ln={country:"countries",authors:"authors"},un=function(t){var e="number"==typeof t?Object(j.d)(t):t,n=e.split("-");return 3===n.length?"".concat(O.E[n[1]]," ").concat(n[0]):e},cn=function(t,e,n,i,o,r,a){var s=function(t,e){var n=0;return t.forEach((function(t,i){t.hasChildren||e[i]!==O.b||(n+=1)})),n}(e,i),l=Object(C.c)(e,i),u="";u+="divOnly"!==r&&s>0?a("Showing {{x}} of {{y}} genomes sampled between {{from}} and {{to}}",{x:s,y:t,from:un(l[0]),to:un(l[1])}):a("Showing {{x}} of {{y}} genomes",{x:s,y:t}),u+=".";var c=[];Object.keys(n).forEach((function(t){var e=Object.keys(o[t]).length;e&&c.push("".concat(e," ").concat(function(t,e){return 1===e?"authors"===t&&(t="author"):(t in ln&&(t=ln[t]),"s"!==t.slice(-1).toLowerCase()&&(t+="s")),t=t.replace(/_/g," ")}(t,e)))}));var h=a("Comprising"),p=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.prefix,o=void 0===i?void 0:i,r=n.suffix,a=void 0===r?void 0:r,s=n.capatalise,l=void 0===s||s,u=n.fullStop,c=void 0===u||u;return t.length?(e=1===t.length?t[0]:t.slice(0,-1).join(", ")+" and "+t[t.length-1],o&&(e=o+" "+e),a&&(e+=" "+a),l&&(e=e.charAt(0).toUpperCase()),c&&(e+="."),e+" "):""}(c,{prefix:h,capatalise:!1});return p.length?u+=" ".concat(p):u.endsWith(".")?u+=" ":u+=". ",u},hn=Object(w.b)((function(t){return{browserDimensions:t.browserDimensions.browserDimensions,filters:t.controls.filters,animationPlayPauseButton:t.controls.animationPlayPauseButton,metadata:t.metadata,nodes:t.tree.nodes,visibleStateCounts:t.tree.visibleStateCounts,totalStateCounts:t.tree.totalStateCounts,visibility:t.tree.visibility,selectedStrain:t.tree.selectedStrain,selectedClade:t.tree.selectedClade,dateMin:t.controls.dateMin,dateMax:t.controls.dateMax,absoluteDateMin:t.controls.absoluteDateMin,absoluteDateMax:t.controls.absoluteDateMax,branchLengthsToDisplay:t.controls.branchLengthsToDisplay}}))(rn=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(sn()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){return o()(this,i),n.call(this,t)}return a()(i,[{key:"getStyles",value:function(t){var e=28;return this.props.browserDimensions.width<1e3&&(e=27),this.props.browserDimensions.width<800&&(e=26),this.props.browserDimensions.width<600&&(e=25),this.props.browserDimensions.width<400&&(e=24),{base:{width:t+34,display:"inline-block",maxWidth:t,marginTop:0},title:{fontFamily:M.p,fontSize:e,marginLeft:0,marginTop:0,marginBottom:5,fontWeight:500,color:M.a,letterSpacing:"-0.5px",lineHeight:1.2},n:{fontFamily:M.d,fontSize:14,marginLeft:2,marginTop:5,marginBottom:5,fontWeight:500,color:M.h,lineHeight:1.4}}}},{key:"addFilteredDatesButton",value:function(t){var e=this;t.push(y.a.createElement("div",{key:"timefilter",style:{display:"inline-block"}},y.a.createElement("div",{className:"boxed-item-icon",onClick:function(){e.props.dispatch(Object(S.c)({newMin:e.props.absoluteDateMin,newMax:e.props.absoluteDateMax}))},role:"button",tabIndex:0},"×"),y.a.createElement("div",{className:"boxed-item active-with-icon"},"".concat(un(this.props.dateMin)," to ").concat(un(this.props.dateMax)))))}},{key:"addNonAuthorFilterButton",value:function(t,e){var n=this;this.props.filters[e].sort().forEach((function(i){var o=y.a.createElement("span",null,i," (".concat(n.props.totalStateCounts[e].get(i),")"));t.push(Xe(n.props.dispatch,n.props.filters,e,i,o,!0))}))}},{key:"selectedStrainButton",value:function(t){var e=this;return y.a.createElement("span",null,"Showing a single strain ",y.a.createElement("div",{style:{display:"inline-block"}},y.a.createElement("div",{className:"boxed-item-icon",onClick:function(){e.props.dispatch(Object(S.f)({tipSelected:{clear:!0},cladeSelected:e.props.selectedClade}))},role:"button",tabIndex:0},"×"),y.a.createElement("div",{className:"boxed-item active-with-icon"},t)))}},{key:"clearFilterButton",value:function(t){var e=this;return y.a.createElement("span",{style:{cursor:"pointer",color:"#5097BA"},key:t,onClick:function(){return e.props.dispatch(Object(S.a)("set",t,[]))},role:"button",tabIndex:0},t)}},{key:"renderTitle",value:function(t){var e="";return this.props.metadata.title&&(e=this.props.metadata.title),y.a.createElement("div",{width:this.props.width,style:t.title},e)}},{key:"render",value:function(){var t=this,e=this.props.t;if(!this.props.metadata||!this.props.nodes||!this.props.visibility)return null;var n=this.getStyles(this.props.width),i="Pause"===this.props.animationPlayPauseButton,o=!i&&!this.props.selectedStrain,r=this.props.dateMin===this.props.absoluteDateMin&&this.props.dateMax===this.props.absoluteDateMax,a=cn(this.props.metadata.mainTreeNumTips,this.props.nodes,this.props.filters,this.props.visibility,this.props.visibleStateCounts,this.props.branchLengthsToDisplay,this.props.t),s=[];return Object.keys(this.props.filters).filter((function(e){return t.props.filters[e].length>0})).forEach((function(e){return t.addNonAuthorFilterButton(s,e)})),r||this.addFilteredDatesButton(s),y.a.createElement(k.a,{center:!0,infocard:!0},y.a.createElement("div",{style:n.base},this.renderTitle(n),y.a.createElement(an,{styles:n,width:this.props.width,metadata:this.props.metadata}),y.a.createElement("div",{width:this.props.width,style:n.n},i?e("Animation in progress")+". ":null,this.props.selectedStrain?this.selectedStrainButton(this.props.selectedStrain):null,o?a:null,o&&s.length?y.a.createElement("span",null,e("Filtered to")+" ",s.map((function(t){return t})),". "):null)))}}]),i}(y.a.Component))||rn,pn=Object(T.c)()(hn),dn=Object(w.b)((function(t){return{tree:t.tree,treeToo:t.treeToo,dateMinNumeric:t.controls.dateMinNumeric,dateMaxNumeric:t.controls.dateMaxNumeric,quickdraw:t.controls.quickdraw,colorBy:t.controls.colorBy,colorByConfidence:t.controls.colorByConfidence,layout:t.controls.layout,temporalConfidence:t.controls.temporalConfidence,distanceMeasure:t.controls.distanceMeasure,mutType:t.controls.mutType,colorScale:t.controls.colorScale,metadata:t.metadata,showTreeToo:t.controls.showTreeToo,showTangle:t.controls.showTangle,panelsToDisplay:t.controls.panelsToDisplay,selectedBranchLabel:t.controls.selectedBranchLabel,narrativeMode:t.narrative.display,animationPlayPauseButton:t.controls.animationPlayPauseButton}}))(ve),fn=n(612),mn=n.n(fn),gn=n(613),vn=n(614),yn=n.n(vn),_n=n(571),bn=n.n(_n),wn=n(616),xn=n.n(wn),Mn=n(617),En=n.n(Mn),Ln=n(692),Tn=n.n(Ln),kn=n(693);function Sn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Cn(t){this._context=t}Cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var jn=n(755),On=n(556),An=Math.abs,Dn=Math.atan2,Pn=Math.cos,Nn=Math.max,In=Math.min,zn=Math.sin,Rn=Math.sqrt,Bn=Math.PI,Fn=Bn/2,Vn=2*Bn;function Wn(t){return t>1?0:t<-1?Bn:Math.acos(t)}function Zn(t){return t>=1?Fn:t<=-1?-Fn:Math.asin(t)}function Hn(t){return t.innerRadius}function Un(t){return t.outerRadius}function Yn(t){return t.startAngle}function Gn(t){return t.endAngle}function qn(t){return t&&t.padAngle}function Kn(t,e,n,i,o,r,a,s){var l=n-t,u=i-e,c=a-o,h=s-r,p=h*l-c*u;if(!(p*p<1e-12))return[t+(p=(c*(e-r)-h*(t-o))/p)*l,e+p*u]}function Qn(t,e,n,i,o,r,a){var s=t-n,l=e-i,u=(a?r:-r)/Rn(s*s+l*l),c=u*l,h=-u*s,p=t+c,d=e+h,f=n+c,m=i+h,g=(p+f)/2,v=(d+m)/2,y=f-p,_=m-d,b=y*y+_*_,w=o-r,x=p*m-f*d,M=(_<0?-1:1)*Rn(Nn(0,w*w*b-x*x)),E=(x*_-y*M)/b,L=(-x*y-_*M)/b,T=(x*_+y*M)/b,k=(-x*y+_*M)/b,S=E-g,C=L-v,j=T-g,O=k-v;return S*S+C*C>j*j+O*O&&(E=T,L=k),{cx:E,cy:L,x01:-c,y01:-h,x11:E*(o/w-1),y11:L*(o/w-1)}}var Xn,$n,Jn,ti=function(){var t=Hn,e=Un,n=Object(On.a)(0),i=null,o=Yn,r=Gn,a=qn,s=null;function l(){var l,u,c=+t.apply(this,arguments),h=+e.apply(this,arguments),p=o.apply(this,arguments)-Fn,d=r.apply(this,arguments)-Fn,f=An(d-p),m=d>p;if(s||(s=l=Object(jn.a)()),h<c&&(u=h,h=c,c=u),h>1e-12)if(f>Vn-1e-12)s.moveTo(h*Pn(p),h*zn(p)),s.arc(0,0,h,p,d,!m),c>1e-12&&(s.moveTo(c*Pn(d),c*zn(d)),s.arc(0,0,c,d,p,m));else{var g,v,y=p,_=d,b=p,w=d,x=f,M=f,E=a.apply(this,arguments)/2,L=E>1e-12&&(i?+i.apply(this,arguments):Rn(c*c+h*h)),T=In(An(h-c)/2,+n.apply(this,arguments)),k=T,S=T;if(L>1e-12){var C=Zn(L/c*zn(E)),j=Zn(L/h*zn(E));(x-=2*C)>1e-12?(b+=C*=m?1:-1,w-=C):(x=0,b=w=(p+d)/2),(M-=2*j)>1e-12?(y+=j*=m?1:-1,_-=j):(M=0,y=_=(p+d)/2)}var O=h*Pn(y),A=h*zn(y),D=c*Pn(w),P=c*zn(w);if(T>1e-12){var N,I=h*Pn(_),z=h*zn(_),R=c*Pn(b),B=c*zn(b);if(f<Bn&&(N=Kn(O,A,R,B,I,z,D,P))){var F=O-N[0],V=A-N[1],W=I-N[0],Z=z-N[1],H=1/zn(Wn((F*W+V*Z)/(Rn(F*F+V*V)*Rn(W*W+Z*Z)))/2),U=Rn(N[0]*N[0]+N[1]*N[1]);k=In(T,(c-U)/(H-1)),S=In(T,(h-U)/(H+1))}}M>1e-12?S>1e-12?(g=Qn(R,B,O,A,h,S,m),v=Qn(I,z,D,P,h,S,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),S<T?s.arc(g.cx,g.cy,S,Dn(g.y01,g.x01),Dn(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,S,Dn(g.y01,g.x01),Dn(g.y11,g.x11),!m),s.arc(0,0,h,Dn(g.cy+g.y11,g.cx+g.x11),Dn(v.cy+v.y11,v.cx+v.x11),!m),s.arc(v.cx,v.cy,S,Dn(v.y11,v.x11),Dn(v.y01,v.x01),!m))):(s.moveTo(O,A),s.arc(0,0,h,y,_,!m)):s.moveTo(O,A),c>1e-12&&x>1e-12?k>1e-12?(g=Qn(D,P,I,z,c,-k,m),v=Qn(O,A,R,B,c,-k,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),k<T?s.arc(g.cx,g.cy,k,Dn(g.y01,g.x01),Dn(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,k,Dn(g.y01,g.x01),Dn(g.y11,g.x11),!m),s.arc(0,0,c,Dn(g.cy+g.y11,g.cx+g.x11),Dn(v.cy+v.y11,v.cx+v.x11),m),s.arc(v.cx,v.cy,k,Dn(v.y11,v.x11),Dn(v.y01,v.x01),!m))):s.arc(0,0,c,w,b,m):s.lineTo(D,P)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +r.apply(this,arguments))/2-Bn/2;return[Pn(i)*n,zn(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Object(On.a)(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Object(On.a)(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Object(On.a)(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Object(On.a)(+t),l):i},l.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Object(On.a)(+t),l):o},l.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Object(On.a)(+t),l):r},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Object(On.a)(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l},ei=Object(kn.a)().x((function(t){return t.x})).y((function(t){return t.y})).curve((function(t){return new Cn(t)})),ni=function(t,e,n,i,o,r,a,s,l){if("hidden"===a)return[];var u=En()(l,(function(e){return e>t})),c=Tn()(l,(function(t){return t<e}));if(-1===u||-1===c)return[];var h,p,d=s.slice(u,c+1);if(u>0){var f=l[u]-l[u-1],m=(t-l[u-1])/f,g=(l[u]-t)/f;h={x:g*s[u-1].x+m*s[u].x,y:g*s[u-1].y+m*s[u].y}}if(c<s.length-1){var v=l[c+1]-l[c],y=(e-l[c])/v,_=(l[c+1]-e)/v;p={x:_*s[c].x+y*s[c+1].x,y:_*s[c].y+y*s[c+1].y}}return h&&d.unshift(h),p&&d.push(p),d},ii=function(t){var e=[];return t.forEach((function(t){t.arcs.forEach((function(t){e.push(t)}))})),e},oi=function(t,e,n,i,o,r,a,s,l,u){var c,h=n.selectAll("transmissions").data(e).enter().append("path").attr("d",(function(t){return ei(ni(r,a,t.originCoords,t.destinationCoords,t.originNumDate,t.destinationNumDate,t.visible,t.bezierCurve,t.bezierDates))})).attr("fill","none").attr("stroke-opacity",.6).attr("stroke-linecap","round").attr("stroke",(function(t){return t.color})).attr("stroke-width",1),p=O.t/Math.sqrt(bn()([o.length,O.s]));if(s){var d=ii(t);d.forEach((function(e){e.outerRadius=Math.sqrt(t[e.demeDataIdx].count)*p})),c=n.selectAll("demes").data(d).enter().append("path").attr("d",(function(t){return ti()(t)})).style("stroke","none").style("fill-opacity",.65).style("fill",(function(t){return t.color})).style("stroke-opacity",.85).style("stroke",(function(t){return t.color})).style("pointer-events","all").attr("transform",(function(e){return"translate("+t[e.demeDataIdx].coords.x+","+t[e.demeDataIdx].coords.y+")"})).on("mouseover",(function(e){u(Object(S.e)({geoFilter:[l,t[e.demeDataIdx].name]}))})).on("mouseout",(function(){u(Object(S.e)())}))}else c=n.selectAll("demes").data(t).enter().append("circle").attr("r",(function(t){return p*Math.sqrt(t.count)})).style("stroke","none").style("fill-opacity",.65).style("fill",(function(t){return t.color})).style("stroke-opacity",.85).style("stroke",(function(t){return t.color})).style("pointer-events","all").attr("transform",(function(t){return"translate("+t.coords.x+","+t.coords.y+")"})).on("mouseover",(function(t){u(Object(S.e)({geoFilter:[l,t.name]}))})).on("mouseout",(function(){u(Object(S.e)())}));return{demes:c,transmissions:h}},ri=n(694),ai=n.n(ri),si=n(701),li=n.n(si),ui=n(99),ci=n(702),hi=n.n(ci),pi=n(705),di=n.n(pi),fi=n(707),mi=n.n(fi),gi=n(708),vi=n.n(gi),yi=function(t,e){var n=vi.a.get(t,e);return function(i){return n*Math.pow(i,e)*Math.pow(1-i,t-e)}},_i=function(t,e,n){var i=t.x,o=t.y,r=e.x,a=e.y,s=Math.sign(r-i),l=(a-o)/(r-i),u=Math.sqrt(Math.pow(a-o,2)+Math.pow(r-i,2)),c=200*Math.log(Math.pow(u,.05))+n*O.M,h=Math.sqrt(Math.pow(c,2)+Math.pow(u,2)/4);return{x:i+h*Math.cos(Math.atan(2*c/u)+Math.atan(l))*s,y:o+h*Math.sin(Math.atan(2*c/u)+Math.atan(l))*s}},bi=function(t,e,n){return n.latLngToLayerPoint(new L.LatLng(t,e))},wi=function(t,e,n){var i={};return t.forEach((function(t,o){if(!t.children){var r=Object(Z.d)(t,n);r&&(i[r]||(i[r]=[]),e[o]!==O.a&&i[r].push(t))}})),i},xi=function(t,e,n,i){var o,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=Object(lt.d)(n),s={},l=e.length;r?(o=r,e.forEach((function(t,e){s[t]=e,o[e]._count=0})),o[l]._count=0):(o=e.map((function(t,e){return s[t]=e,{innerRadius:0,_count:0}}))).push({innerRadius:0,_count:0}),t.forEach((function(t){var e=a?t.currentGt:Object(Z.d)(t,n),r=s[e];void 0===r&&(r=l),o[r]._count++,o[r].color||(o[r].color=i[t.arrayIdx])}));var u=0;return o.forEach((function(e){e.startAngle=u,u+=2*Math.PI*e._count/t.length,e.endAngle=u,e.startAngle===e.endAngle&&(e.color="")})),o},Mi=function(t,e,n){return function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,o=_i(t,e,n),r=[t,o,e],a=hi()(r.length),s=di()(0,1,i),l=[];return hi()(i).forEach((function(t){l[t]={x:0,y:0}})),a.forEach((function(t){var e=yi(a.length-1,t),n=s.map(e),o=[r[t].x,r[t].y],u=mi()([hi()(n.length),hi()(o.length)]);hi()(l.length).forEach((function(t){l[t].x+=n[u[t][0]]*o[u[t][1]],l[t].y+=n[u[t+i][0]]*o[u[t+i][1]]}))})),l}(t,e,n)},Ei=function(t,e,n,i,o,r,a,s,l,u,c){var h,p,d,f,m,g=Object(Z.d)(t,i),v=Object(Z.d)(e,i),y=n.filter((function(t){return t.key===i}))[0].demes;try{h=y[g].latitude,p=y[g].longitude}catch(t){u.add(g)}try{d=y[v].latitude,f=y[v].longitude}catch(t){u.add(v)}var _=function(t,e,n,i,o){var r=null;return(e>-360||i>-360)&&(e<360||i<360)&&Math.abs(e-i)<180&&(r=[bi(t,e,o),bi(n,i,o)]),r}(h,p+s,d,f+l,a);if(_){var b=Mi(_[0],_[1],c),w=Object(ui.a)(Object(Z.d)(t,"num_date"),Object(Z.d)(e,"num_date")),x=[];b.forEach((function(t,e){x.push(w(e/(b.length-1)))})),m={id:t.arrayIdx.toString()+"-"+e.arrayIdx.toString(),originNode:t,destinationNode:e,bezierCurve:b,bezierDates:x,originName:Object(Z.d)(t,i),destinationName:Object(Z.d)(e,i),originCoords:_[0],destinationCoords:_[1],originLatitude:h,destinationLatitude:d,originLongitude:p+s,destinationLongitude:f+l,originNumDate:Object(Z.d)(t,"num_date"),destinationNumDate:Object(Z.d)(e,"num_date"),color:o[t.arrayIdx],visible:r[e.arrayIdx]!==O.a?"visible":"hidden",extend:c}}return m},Li=function(t,e,n,i,o,r,a){var s=o?[-360,0,360]:[0],l=[],u={},c=new Set,h={};return t.forEach((function(t){var o=Object(Z.d)(t,n);t.children&&t.children.forEach((function(u){var p=Object(Z.d)(u,n);if(o&&p&&o!==p){[o,p]in h?h[[o,p]]+=1:h[[o,p]]=1;var d=h[[o,p]];s.forEach((function(o){var s=function(t,e,n,i,o,r,a,s,l,u){var c=[];return[-360,0,360].forEach((function(h){var p=Ei(t,e,n,i,o,r,a,s,h,l,u);p&&c.push(p)})),c.length>0?li()(c,(function(t){return Math.abs(t.destinationCoords.x-t.originCoords.x)})):null}(t,u,r.geoResolutions,n,i,e,a,o,c,d);s&&l.push(s)}))}}))})),l.forEach((function(t,e){u[t.id]?u[t.id].push(e):u[t.id]=[e]})),{transmissionData:l,transmissionIndices:u,demesMissingLatLongs:c}},Ti=function(t,e,n,i,o,r,a,s,l,u,c){var h=function(t,e,n,i,o,r,a,s,l,u){var c=[],h={},p=wi(t,e,n),d=o?[-360,0,360]:[0],f=r.geoResolutions.filter((function(t){return t.key===n}))[0].demes,m=0;return d.forEach((function(t){for(var e=0,n=Object.entries(p);e<n.length;e++){var o=rt()(n[e],2),r=o[0],d=o[1],g=0,v=0,y=!0;f[r]?(g=f[r].latitude,v=f[r].longitude+t):(y=!1,console.warn("Warning: Lat/long missing from metadata for",r));var _=bi(g,v,a);if(v>-360&&v<360&&!0===y){var b={name:r,count:d.length,latitude:g,longitude:v,coords:_};s?function(){b.arcs=xi(d,l,u,i);var t=c.length;b.arcs.forEach((function(e){e.demeDataIdx=t}))}():b.color=Object(yt.d)(d,i),c.push(b),h[r]?h[r].push(m):h[r]=[m],m+=1}}})),{demeData:c,demeIndices:h}}(t,e,n,i,o,r,a,s,l,u),p=h.demeData,d=h.demeIndices,f=Li(t,e,n,i,o,r,a),m=f.transmissionData,g=f.transmissionIndices,v=f.demesMissingLatLongs,y=D()(v).filter((function(t){return"unknown"!==t.toLowerCase()}));return y.size&&c(Object(it.a)({message:"The following demes are missing lat/long information",details:D()(y).join(", ")})),{demeData:p,transmissionData:m,demeIndices:d,transmissionIndices:g,demesMissingLatLongs:v}},ki=function(t,e,n,i,o,r,a,s,l,u,c){return{newDemes:t?function(t,e,n,i,o,r,a,s,l){for(var u=t.slice(),c=wi(n,i,o),h=function(){var t=rt()(d[p],2),n=t[0],i=t[1];e[n]&&e[n].forEach((function(t){u[t].count=i.length,a?u[t].arcs=xi(i,l,s,r,u[t].arcs):u[t].color=Object(yt.d)(i,r)}))},p=0,d=Object.entries(c);p<d.length;p++)h();return u}(t,n,o,r,a,s,l,u,c):t,newTransmissions:e&&e.length?function(t,e,n,i,o,r){var a=t.slice();return n.forEach((function(t){t.children&&t.children.forEach((function(n){var s=Object(Z.d)(t,o),l=Object(Z.d)(n,o);if(s&&l&&s!==l){var u=t.arrayIdx.toString()+"-"+n.arrayIdx.toString(),c=r[t.arrayIdx],h=i[n.arrayIdx]!==O.a?"visible":"hidden";try{e[u].forEach((function(t){a[t].color=c,a[t].visible=h}))}catch(t){console.warn("Error trying to access ".concat(u," in transmissionIndices. Map transmissions may be wrong."))}}}))})),a}(e,i,o,r,a,s):e}};n(709);function Si(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ci(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Si(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ji(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Oi,Ai=Object(w.b)((function(t){return{branchLengthsToDisplay:t.controls.branchLengthsToDisplay,absoluteDateMin:t.controls.absoluteDateMin,absoluteDateMax:t.controls.absoluteDateMax,treeVersion:t.tree.version,treeLoaded:t.tree.loaded,nodes:t.tree.nodes,nodeColors:t.tree.nodeColors,visibility:t.tree.visibility,visibilityVersion:t.tree.visibilityVersion,metadata:t.metadata,colorScaleVersion:t.controls.colorScale.version,map:t.map,geoResolution:t.controls.geoResolution,animationPlayPauseButton:t.controls.animationPlayPauseButton,mapTriplicate:t.controls.mapTriplicate,dateMinNumeric:t.controls.dateMinNumeric,dateMaxNumeric:t.controls.dateMaxNumeric,panelLayout:t.controls.panelLayout,colorBy:t.controls.colorScale.colorBy,narrativeMode:t.narrative.display,pieChart:!t.controls.colorScale.continuous&&t.controls.geoResolution!==t.controls.colorScale.colorBy,legendValues:t.controls.colorScale.legendValues}}))((Jn=$n=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(ji()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),e=n.call(this,t),g()(l()(e),"getStyles",(function(){return{resetZoomButton:{zIndex:100,position:"absolute",right:5,top:0,cursor:"pointer",color:M.a}}})),e.state={map:null,d3DOMNode:null,d3elems:null,responsive:null,demeData:null,transmissionData:null,demeIndices:null,transmissionIndices:null,userHasInteractedWithMap:!1},e.playPauseButtonClicked=e.playPauseButtonClicked.bind(l()(e)),e.resetButtonClicked=e.resetButtonClicked.bind(l()(e)),e.fitMapBoundsToData=e.fitMapBoundsToData.bind(l()(e)),e}return a()(i,[{key:"componentWillMount",value:function(){var t=this;window.L||mn()(),window.L.getMapSvg||(window.L.getMapSvg=function(e){var n=t.state.map.getSize(),i=t.state.map._getMapPanePos();xn.a.toSvg(t.state.map.getContainer(),{width:n.x,height:n.y,filter:function(t){return"leaflet-control-container"!==t.className}}).then((function(t){e({mapSvg:t.replace("data:image/svg+xml;charset=utf-8,",""),mapDimensions:n,panOffsets:i})}))})}},{key:"componentDidMount",value:function(){this.maybeChangeSize(this.props),this.maybeRemoveAllDemesAndTransmissions(this.props)||this.maybeUpdateDemesAndTransmissions(this.props),this.maybeInvalidateMapSize(this.props)}},{key:"componentWillReceiveProps",value:function(t){this.modulateInterfaceForNarrativeMode(t),this.maybeChangeSize(t),this.maybeRemoveAllDemesAndTransmissions(t)||this.maybeUpdateDemesAndTransmissions(t),this.maybeInvalidateMapSize(t)}},{key:"componentDidUpdate",value:function(t){null!==this.props.nodes&&(this.maybeCreateLeafletMap(),this.maybeSetupD3DOMNode(),this.maybeDrawDemesAndTransmissionsAndMoveMap(t))}},{key:"maybeInvalidateMapSize",value:function(t){!this.state.map||this.props.width===t.width&&this.props.height===t.height||(this.map_timeout&&window.clearTimeout(this.map_timeout),this.map_timeout=window.setTimeout(this.invalidateMapSize.bind(this),this.props.narrativeMode?100:750))}},{key:"invalidateMapSize",value:function(){this.state.map.invalidateSize()}},{key:"maybeCreateLeafletMap",value:function(){this.props.metadata.loaded&&!this.state.map&&document.getElementById("map")&&this.createMap()}},{key:"maybeChangeSize",value:function(t){this.props.width===t.width&&this.props.height===t.height&&this.state.responsive&&this.props.treeVersion===t.treeVersion||this.setState({responsive:{width:t.width,height:t.height}})}},{key:"maybeSetupD3DOMNode",value:function(){if(this.state.map&&this.state.responsive&&!this.state.d3DOMNode){var t=Object(oe.a)("#map svg").attr("id","d3DemesTransmissions");this.setState({d3DOMNode:t})}}},{key:"modulateInterfaceForNarrativeMode",value:function(t){this.props.narrativeMode!==t.narrativeMode&&this.state.map&&(t.narrativeMode?(L.zoomControlButtons.remove(),this.state.map.dragging.disable(),this.state.map.doubleClickZoom.disable()):(L.zoomControlButtons=L.control.zoom({position:"bottomright"}).addTo(this.state.map),this.state.map.dragging.enable(),this.state.map.doubleClickZoom.enable()))}},{key:"maybeDrawDemesAndTransmissionsAndMoveMap",value:function(t){var e=!!this.state.map,n=!!(this.props.metadata.loaded&&this.props.treeLoaded&&this.state.responsive&&this.state.d3DOMNode),i=!this.state.demeData&&!this.state.transmissionData;if(e&&n&&i){var o=Ti(this.props.nodes,this.props.visibility,this.props.geoResolution,this.props.nodeColors,this.props.mapTriplicate,this.props.metadata,this.state.map,this.props.pieChart,this.props.legendValues,this.props.colorBy,this.props.dispatch),r=o.demeData,a=o.transmissionData,s=o.demeIndices,l=o.transmissionIndices;this.moveMapAccordingToData({geoResolutionChanged:t.geoResolution!==this.props.geoResolution,visibilityChanged:t.visibility!==this.props.visibility,demeData:r,demeIndices:s});var u=oi(r,a,this.state.d3DOMNode,this.state.map,this.props.nodes,this.props.dateMinNumeric,this.props.dateMaxNumeric,this.props.pieChart,this.props.geoResolution,this.props.dispatch);this.setState({boundsSet:!0,d3elems:u,demeData:r,transmissionData:a,demeIndices:s,transmissionIndices:l})}}},{key:"maybeRemoveAllDemesAndTransmissions",value:function(t){var e=!!this.state.map,n=this.props.geoResolution!==t.geoResolution,i=!t.treeLoaded||this.props.treeVersion!==t.treeVersion,o=t.colorScaleVersion!==this.props.colorScaleVersion;return!(!e||!(n||i||o))&&(this.state.d3DOMNode.selectAll("*").remove(),this.setState({d3elems:null,demeData:null,transmissionData:null,demeIndices:null,transmissionIndices:null}),!0)}},{key:"respondToLeafletEvent",value:function(t){var e,n,i=this;if("moveend"===t.type){if(!this.state.demeData||!this.state.transmissionData)return void window.setTimeout((function(){return i.respondToLeafletEvent(t)}),50);var o=(e=this.state.demeData,n=this.state.map,ai()(e,(function(t){return t.coords=bi(t.latitude,t.longitude,n),t}))),r=function(t,e){var n=t.slice();return n.forEach((function(t){t.originCoords=bi(t.originLatitude,t.originLongitude,e),t.destinationCoords=bi(t.destinationLatitude,t.destinationLongitude,e),t.bezierCurve=Mi(t.originCoords,t.destinationCoords,t.extend)})),n}(this.state.transmissionData,this.state.map);!function(t,e,n,i,o,r){if(n){if(r){var a=ii(t);n.demes.data(a).attr("transform",(function(e){return"translate("+t[e.demeDataIdx].coords.x+","+t[e.demeDataIdx].coords.y+")"}))}else n.demes.data(t).attr("transform",(function(t){return"translate("+t.coords.x+","+t.coords.y+")"}));n.transmissions.data(e).attr("d",(function(t){return ei(ni(i,o,t.originCoords,t.destinationCoords,t.originNumDate,t.destinationNumDate,t.visible,t.bezierCurve,t.bezierDates))}))}}(o,r,this.state.d3elems,this.props.dateMinNumeric,this.props.dateMaxNumeric,this.props.pieChart),this.setState({demeData:o,transmissionData:r})}}},{key:"getGeoRange",value:function(t,e){var n=this,i=[],o=[];this.props.metadata.geoResolutions.forEach((function(r){if(r.key===n.props.geoResolution){var a=r.demes;Object.keys(a).forEach((function(n){e&&t&&e[n]?e[n].forEach((function(e){t[e]&&t[e].count>0&&(i.push(a[n].latitude),o.push(a[n].longitude))})):(i.push(a[n].latitude),o.push(a[n].longitude))}))}}));var r=bn()(i),a=yn()(i),s=bn()(o),l=yn()(o),u=(s-l)%360,c=r-a,h=bn()([-55,a-.1*c]),p=yn()([70,r+.1*c]),d=bn()([-180,l-.1*u]),f=yn()([180,s+.1*u]);return[L.latLng(h,f),L.latLng(p,d)]}},{key:"maybeUpdateDemesAndTransmissions",value:function(t){if(this.state.map&&this.props.treeLoaded&&this.state.d3elems){var e=t.visibilityVersion!==this.props.visibilityVersion,n=t.nodes&&t.visibility&&t.geoResolution&&t.nodeColors;if(e&&n)if(this.props.geoResolution!==t.geoResolution){var i=Ti(t.nodes,t.visibility,t.geoResolution,t.nodeColors,t.mapTriplicate,t.metadata,this.state.map,t.pieChart,t.legendValues,t.colorBy,t.dispatch),o=i.demeData,r=i.transmissionData,a=i.demeIndices,s=i.transmissionIndices,l=oi(o,r,this.state.d3DOMNode,this.state.map,t.nodes,t.dateMinNumeric,t.dateMaxNumeric,t.pieChart,t.geoResolution,t.dispatch);this.setState({d3elems:l,demeData:o,transmissionData:r,demeIndices:a,transmissionIndices:s})}else{var u=ki(this.state.demeData,this.state.transmissionData,this.state.demeIndices,this.state.transmissionIndices,t.nodes,t.visibility,t.geoResolution,t.nodeColors,t.pieChart,t.colorBy,t.legendValues),c=u.newDemes,h=u.newTransmissions;!function(t,e,n,i,o,r,a,s){if(n){var l=O.t/Math.sqrt(bn()([o.length,O.s]));if(s){var u=ii(t);u.forEach((function(e){e.outerRadius=Math.sqrt(t[e.demeDataIdx].count)*l})),n.demes.data(u).attr("d",(function(t){return ti()(t)})).style("fill",(function(t){return t.color})).style("stroke",(function(t){return t.color}))}else n.demes.data(t).transition().duration(200).ease(St).style("stroke",(function(t){return t.count>0?t.color:"white"})).style("fill",(function(t){return t.count>0?t.color:"white"})).attr("r",(function(t){return l*Math.sqrt(t.count)}));n.transmissions.data(e).attr("d",(function(t){return ei(ni(r,a,t.originCoords,t.destinationCoords,t.originNumDate,t.destinationNumDate,t.visible,t.bezierCurve,t.bezierDates))})).attr("stroke",(function(t){return t.color}))}else console.error("d3elems is not defined!")}(c,h,this.state.d3elems,this.state.map,t.nodes,t.dateMinNumeric,t.dateMaxNumeric,t.pieChart),this.moveMapAccordingToData({geoResolutionChanged:t.geoResolution!==this.props.geoResolution,visibilityChanged:t.visibility!==this.props.visibility,demeData:c,demeIndices:this.state.demeIndices}),this.setState({demeData:c,transmissionData:h})}}}},{key:"getInitialBounds",value:function(){var t,e;return this.props.mapTriplicate?(t=L.latLng(-70,-360),e=L.latLng(80,360)):(t=L.latLng(-70,-180),e=L.latLng(80,180)),L.latLngBounds(t,e)}},{key:"createMap",value:function(){var t=this;L.Map.addInitHook("addHandler","gestureHandling",gn.GestureHandling);var e=L.map("map",{center:[0,0],zoom:2,gestureHandling:!0,maxBounds:this.getInitialBounds(),minZoom:1,maxZoom:14,zoomSnap:.5,zoomControl:!1,doubleClickZoom:!this.props.narrativeMode});e.getRenderer(e).options.padding=2,L.tileLayer("https://api.mapbox.com/styles/v1/trvrb/ciu03v244002o2in5hlm3q6w2/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoidHJ2cmIiLCJhIjoiY2l1MDRoMzg5MDEwbjJvcXBpNnUxMXdwbCJ9.PMqX7vgORuXLXxtI3wISjw",{attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a style="font-weight: 700" href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>'}).addTo(e),this.props.narrativeMode||(L.zoomControlButtons=L.control.zoom({position:"bottomright"}).addTo(e)),new(L.Control.extend({onAdd:function(){var t=L.DomUtil.create("a","mapbox-wordmark");return t.href="http://mapbox.com/about/maps",t.target="_blank",t}}))({position:"bottomleft"}).addTo(e),e.on("moveend",this.respondToLeafletEvent.bind(this)),e.on("resize",(function(){t.props.narrativeMode&&t.fitMapBoundsToData(t.state.demeData,t.state.demeIndices)})),this.setState({map:e})}},{key:"animationButtons",value:function(){if(this.props.narrativeMode)return null;var t={color:"#FFFFFF",fontWeight:400,fontSize:12,borderRadius:3,padding:12,border:"none",zIndex:900,position:"relative",textTransform:"uppercase"};return"divOnly"!==this.props.branchLengthsToDisplay?y.a.createElement("div",{style:{position:"absolute"}},y.a.createElement("button",{style:Ci({},t,{top:20,left:20,backgroundColor:"Pause"===this.props.animationPlayPauseButton?M.i:M.c}),onClick:this.playPauseButtonClicked},this.props.t(this.props.animationPlayPauseButton)),y.a.createElement("button",{style:Ci({},t,{top:20,left:30,backgroundColor:M.f}),onClick:this.resetButtonClicked},this.props.t("Reset"))):y.a.createElement("div",null)}},{key:"maybeCreateMapDiv",value:function(){var t=this,e=null;return this.state.responsive&&(e=y.a.createElement("div",{style:{position:"relative"}},this.animationButtons(),y.a.createElement("div",{onClick:function(){t.setState({userHasInteractedWithMap:!0})},id:"map",style:{height:this.state.responsive.height,width:this.state.responsive.width}}))),e}},{key:"playPauseButtonClicked",value:function(){"Play"===this.props.animationPlayPauseButton?this.props.dispatch({type:R.C,data:"Pause"}):this.props.dispatch({type:R.C,data:"Play"})}},{key:"resetButtonClicked",value:function(){this.props.dispatch({type:R.C,data:"Play"}),this.props.dispatch(Object(S.c)({newMin:this.props.absoluteDateMin,newMax:this.props.absoluteDateMax,quickdraw:!1}))}},{key:"moveMapAccordingToData",value:function(t){var e=t.geoResolutionChanged,n=t.visibilityChanged,i=t.demeData,o=t.demeIndices;this.state.boundsSet?"Pause"!==this.props.animationPlayPauseButton&&(e||n)&&(this.props.narrativeMode?this.state.map.fire("resize"):this.state.userHasInteractedWithMap||this.fitMapBoundsToData(i,o)):this.fitMapBoundsToData(i,o)}},{key:"getMaxZoomForFittingMapToData",value:function(){switch(this.props.geoResolution.toLowerCase()){case"region":return 4;case"country":return 5;case"state":return 7;case"city":return 12;case"block":return 14;default:return 8}}},{key:"fitMapBoundsToData",value:function(t,e){var n=this.getGeoRange(t,e);this.state.currentBounds=window.L.latLngBounds(n[0],n[1]);var i=this.getMaxZoomForFittingMapToData();this.state.map.fitBounds(window.L.latLngBounds(n[0],n[1]),{maxZoom:i})}},{key:"render",value:function(){var t=this,e=this.props.t,n=this.getStyles(),i=this.state.transmissionData&&this.state.transmissionData.length;return y.a.createElement(k.a,{center:!0,title:e(i?"Transmissions":"Geography")},this.props.legend&&y.a.createElement(ce.a,null,y.a.createElement(dt,{right:!0,width:this.props.width})),this.maybeCreateMapDiv(),this.props.narrativeMode?null:y.a.createElement("button",{style:Ci({},M.o,{},n.resetZoomButton),onClick:function(){t.fitMapBoundsToData(t.state.demeData,t.state.demeIndices),t.setState({userHasInteractedWithMap:!1})}},e("reset zoom")))}}]),i}(y.a.Component),g()($n,"propTypes",{treeVersion:b.a.number.isRequired,treeLoaded:b.a.bool.isRequired,colorScaleVersion:b.a.number.isRequired}),Xn=Jn))||Xn,Di=Object(T.c)()(Ai),Pi=n(162),Ni=n(102),Ii=n.n(Ni),zi=n(156),Ri=n.n(zi),Bi=n(711),Fi=n.n(Bi),Vi=["text/csv","application/vnd.ms-excel"],Wi=Vi.concat("text/tab-separated-values"),Zi=function(t){return Wi.includes(t.type)||function(t){return""===t.type&&t.name.endsWith(".tsv")}(t)},Hi=function(t){return new Promise((function(e,n){Zi(t)||n(new Error("Cannot parse this filetype")),Fi.a.parse(t,{header:!0,complete:function(t){e(t)},error:function(t){n(t)},encoding:"UTF-8",comments:"#",delimiter:Vi.includes(t.type)?",":"\t",skipEmptyLines:!0,dynamicTyping:!1})}))},Ui=function(){var t=Ri()(Ii.a.mark((function t(e,n,i){var o,r,a,s,l,u,c,h,p,d,f,m,g,v,y,_,b;return Ii.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Hi(i);case 3:if(s=t.sent,o=s.data,r=s.errors,a=s.meta,!r.length){t.next=10;break}throw console.error(r),new Error(r.map((function(t){return t.message})).join(", "));case 10:t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",e(Object(it.a)({message:"Parsing of ".concat(i.name," failed"),details:t.t0.message})));case 15:if(l=a.fields[0],u=n(),c=u.controls,h=u.tree,p=[],d=[],f=new Set(["name","div","num_date","vaccine","labels","hidden","mutations","url","authors","accession","traits","children"]),a.fields.slice(1).forEach((function(t){c.coloringsPresentOnTree.has(t)||f.has(t)?d.push(t):p.push(t)})),m=new Set,g={},v=[],y=new Set(h.nodes.map((function(t){return t.name}))),o.forEach((function(t){var e=t[l];y.has(e)?(m.add(e),g[e]={},p.forEach((function(n){t[n]&&(g[e][n]={value:t[n]})}))):v.push(e)})),0!==m.size&&0!==p.length){t.next=28;break}return t.abrupt("return",e(Object(it.a)({message:"".concat(i.name," had no (relevent) information"),details:0===p.length?"No columns to add as colorings":"No taxa which match those in the tree"})));case 28:return v.length&&(_=v.length,e(Object(it.d)({message:"Ignoring ".concat(_," taxa which ").concat(_>1?"don't":"doesn't"," appear in the tree!"),details:v.join(", ")})),console.warn("Ignoring these taxa from the CSV as they don't appear in the tree:",v)),d.length&&e(Object(it.d)({message:"Ignoring ".concat(d.length,' CSV fields as they are already set as colorings or are "special" cases to be ignored'),details:d.join(", ")})),b={},p.forEach((function(t){b[t]={title:t,type:"categorical"}})),e({type:R.a,newColorings:b,strains:m,traits:g}),t.abrupt("return",e(Object(it.c)({message:"Adding metadata from "+i.name,details:"".concat(p.length," new field").concat(p.length>1?"s":""," for ").concat(m.size," node").concat(m.size>1?"s":"")})));case 34:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n,i){return t.apply(this,arguments)}}(),Yi=function(t){return function(e,n){if(1!==t.length)return e(Object(it.d)({message:"More than one file dropped",details:"Currently we only allow a single CSV to be used"}));var i=t[0];return Zi(i)?Ui(e,n,i):e(Object(it.d)({message:"Cannot parse ".concat(i.name),details:"Currently only CSV & TSV files are allowed, not ".concat(i.type)}))}};function Gi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var qi=Object(w.b)((function(t){return{animationPlayPauseButton:t.controls.animationPlayPauseButton,absoluteDateMaxNumeric:t.controls.absoluteDateMaxNumeric,absoluteDateMinNumeric:t.controls.absoluteDateMinNumeric,dateMinNumeric:t.controls.dateMinNumeric,dateMaxNumeric:t.controls.dateMaxNumeric,mapAnimationCumulative:t.controls.mapAnimationCumulative,mapAnimationShouldLoop:t.controls.mapAnimationShouldLoop,mapAnimationDurationInMilliseconds:t.controls.mapAnimationDurationInMilliseconds}}))(Oi=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Gi()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){return o()(this,i),n.call(this,t)}return a()(i,[{key:"componentDidMount",value:function(){this.maybeAnimate()}},{key:"componentDidUpdate",value:function(){this.maybeAnimate()}},{key:"render",value:function(){return null}},{key:"maybeAnimate",value:function(){var t=this;if("Pause"===this.props.animationPlayPauseButton&&!window.NEXTSTRAIN.animationTickReference){var e=this.props.absoluteDateMaxNumeric-this.props.absoluteDateMinNumeric,n=O.e*e/this.props.mapAnimationDurationInMilliseconds,i=O.f*e;this.props.dateMaxNumeric-this.props.dateMinNumeric<1.3*i?window.NEXTSTRAIN.animationStartPoint&&window.NEXTSTRAIN.animationEndPoint||(window.NEXTSTRAIN.animationStartPoint=this.props.dateMinNumeric,window.NEXTSTRAIN.animationEndPoint=this.props.absoluteDateMaxNumeric):(window.NEXTSTRAIN.animationStartPoint=this.props.dateMinNumeric,window.NEXTSTRAIN.animationEndPoint=this.props.dateMaxNumeric);var o=this.props.dateMinNumeric,r=o+i;this.props.dispatch({type:R.D});window.NEXTSTRAIN.animationTickReference=setInterval((function(){if("Play"===t.props.animationPlayPauseButton)return clearInterval(window.NEXTSTRAIN.animationTickReference),void(window.NEXTSTRAIN.animationTickReference=null);t.props.dispatch(Object(S.c)({newMin:Object(j.d)(o),newMax:Object(j.d)(r),quickdraw:!0})),t.props.mapAnimationCumulative||(o+=n),(r+=n)>=window.NEXTSTRAIN.animationEndPoint&&(t.props.mapAnimationShouldLoop?(o=window.NEXTSTRAIN.animationStartPoint,r=o+i):(clearInterval(window.NEXTSTRAIN.animationTickReference),window.NEXTSTRAIN.animationTickReference=null,t.props.dispatch({type:R.C,data:"Play"}),t.props.dispatch(Object(S.c)({newMin:Object(j.d)(window.NEXTSTRAIN.animationStartPoint),newMax:Object(j.d)(window.NEXTSTRAIN.animationEndPoint),quickdraw:!1})),window.NEXTSTRAIN.animationStartPoint=void 0,window.NEXTSTRAIN.animationEndPoint=void 0))}),O.e)}}}]),i}(y.a.Component))||Oi,Ki=function(t,e){return e*(t-(1===e?40:100))},Qi=function(t){var e=t.horizontal,n=t.vertical,i=t.availableWidth,o=t.availableHeight,r=t.minHeight,a=void 0===r?void 0:r,s=t.maxAspectRatio,l=void 0===s?void 0:s,u=e*(i-(1===e?40:100)),c=n*o-52;return l&&c>l*u&&(c=l*u),a&&c<a&&(c=a),{width:u,height:c}};function Xi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xi(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ji=n(29),to=n.n(Ji),eo=x.c.div.withConfig({displayName:"styles__NarrativeStyles",componentId:"sc-19vjmtz-0"})(["top:",";font-weight:300;font-size:14px;line-height:1.3;@media (max-width:1080px){font-size:13px;line-height:1.1;}p,h1,h2,h3,h4,li,table{color:",";}table,th,td{border:1px solid;}td,th{padding:3px;}h1{font-weight:700;font-size:2em;margin-bottom:30px;@media (max-width:1080px){font-size:1.8em;margin-bottom:10px;}}h2{font-weight:500;font-size:1.8em;@media (max-width:1080px){font-size:1.6em;}}h3{font-weight:500;font-size:1.6em;@media (max-width:1080px){font-size:1.4em;}}h4{font-weight:500;font-size:1.4em;@media (max-width:1080px){font-size:1.2em;}}div p{text-align:justify;margin:0;font-weight:inherit;line-height:inherit;}li{margin:10px 0px 10px 0px;font-weight:inherit;line-height:inherit;}table{width:100%;}strong{font-weight:500;background-color:inherit;font-size:inherit;line-height:inherit;}img{display:block;margin-left:auto;margin-right:auto;width:90%;padding:15px 0px 15px 0px;}figcaption{font-style:italic;font-size:0.9em;text-align:center;margin-bottom:15px;}#NarrativeBlock_0{margin-top:15px;}#NarrativeBlock_0 h3{font-weight:inherit;font-size:1.2em;}#NarrativeBlock_0 h4{text-align:justify;font-size:inherit;margin:0;margin-bottom:30px;font-weight:inherit;font-style:italic;line-height:inherit;}#NarrativeBlock_0 .explanation{text-align:justify;font-size:inherit;color:",";margin:0;margin-bottom:30px;font-weight:inherit;font-style:italic;line-height:inherit;}#NarrativeBlock_0 sup{font-size:65%;vertical-align:super;}"],(function(t){return t.narrativeNavBarHeight+"px"}),(function(t){return t.theme.unselectedColor}),(function(t){return t.theme.selectedColor})),no=x.c.div.withConfig({displayName:"styles__OpacityFade",componentId:"sc-19vjmtz-1"})(["z-index:200;position:absolute;background-image:",";width:100%;height:30px;",";",";"],(function(t){return"linear-gradient(to ".concat(t.position,", rgba(255, 255, 255, 0), ").concat(t.theme.background,")")}),(function(t){return"top"===t.position&&"top: ".concat(t.topHeight,"px")}),(function(t){return"bottom"===t.position&&"bottom: 0px;"})),io={color:"#5097BA",textDecoration:"none",cursor:"pointer",fontFamily:'"Lato", "Helvetica Neue", "Helvetica", "sans-serif"',fontWeight:"400",fontSize:"1.8em"},oo=x.c.div.withConfig({displayName:"styles__ProgressBar",componentId:"sc-19vjmtz-2"})(["width:100%;background-color:inherit;box-shadow:0px -3px 3px -3px rgba(0,0,0,0.2) inset;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;"]),ro=x.c.div.withConfig({displayName:"styles__ProgressButton",componentId:"sc-19vjmtz-3"})(["background:#74a9cf;border-radius:50%;cursor:pointer;transition:transform .1s;align-self:center;margin:auto;&:hover{transform:scale(3);}"]),ao=Object(x.b)(["width:100%;color:white;font-size:24px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;"]),so=x.c.div.withConfig({displayName:"styles__EndOfNarrative",componentId:"sc-19vjmtz-4"})(["text-align:center;display:grid;grid-template-rows:1fr;grid-row-gap:10px;"]),lo=x.c.nav.withConfig({displayName:"styles__MobileBannerTop",componentId:"sc-19vjmtz-5"})([""," top:0;height:","px;background-color:#E67F2C;"],ao,(function(t){return t.height})),uo=x.c.nav.withConfig({displayName:"styles__MobileBannerBottom",componentId:"sc-19vjmtz-6"})([""," bottom:0;height:","px;background-color:#65B0A4;"],ao,(function(t){return t.height})),co=x.c.div.withConfig({displayName:"styles__MobileContentContainer",componentId:"sc-19vjmtz-7"})(["min-height:","px;max-height:","px;overflow-y:scroll;color:",";background-color:",";font-weight:300;font-size:14px;line-height:1.3;"],(function(t){return t.height}),(function(t){return t.height}),(function(t){return t.theme.unselectedColor}),(function(t){return t.theme.background})),ho=(n(166),n(119)),po=n.n(ho);function fo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var mo=Symbol(),go=Symbol(),vo=Symbol(),yo=Symbol(),_o=Symbol(),bo=Symbol(),wo=Symbol(),xo=Symbol(),Mo=Symbol(),Eo=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(fo()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),e=n.call(this,t),g()(l()(e),"componentDidMount",(function(){window.addEventListener("resize",e[bo]),document.ontouchmove=function(t){t.preventDefault()},e._pageContainer.addEventListener("wheel",e[vo]),e._pageContainer.addEventListener("touchmove",e[yo]),e._pageContainer.addEventListener("keydown",e[_o]);var t=[];po.a.isNil(e.props.children[e.state.componentIndex])?t.push(y.a.createElement("div",{ref:function(t){return e["container_"+e.state.componentIndex]=t},style:{height:"calc(100% - 20px)",width:"100%","padding-bottom":"20px"}},e.props.children)):t.push(y.a.createElement("div",{key:e.state.componentIndex,ref:function(t){return e["container_"+e.state.componentIndex]=t},style:{height:"calc(100% - 20px)",width:"100%","padding-bottom":"20px"}},e.props.children[e.state.componentIndex])),e[wo](t)})),g()(l()(e),"componentWillUnmount",(function(){window.removeEventListener("resize",e[bo]),e._pageContainer.removeEventListener("wheel",e[vo]),e._pageContainer.removeEventListener("touchmove",e[yo]),e._pageContainer.removeEventListener("keydown",e[_o])})),g()(l()(e),"goToPage",(function(t){var n=e.props,i=n.pageOnChange,o=n.children,r=e.state.componentIndex,a=D()(e.state.componentsToRender);if(!po.a.isEqual(r,t))if(po.a.isNil(e["container_"+t])||e[go]){if(!e[go]&&!po.a.isNil(o[t])){for(var s=function(t){a.push(y.a.createElement("div",{key:t,ref:function(n){return e["container_"+t]=n},style:{height:"calc(100% - 20px)",width:"100%","padding-bottom":"20px"}},o[t]))},l=a.length;l<=t;l++)s(l);po.a.isNil(o[t+1])||a.push(y.a.createElement("div",{key:t+1,ref:function(n){return e["container_"+(t+1)]=n},style:{height:"calc(100% - 20px)",width:"100%","padding-bottom":"20px"}},o[t+1])),e[go]=!0,e.setState({componentsToRender:a},(function(){e._pageContainer.style.transform="translate3d(0, ".concat(-100*t,"%, 0)"),i&&i(t+1),setTimeout((function(){e.setState({componentIndex:t},(function(){e[go]=!1,e[mo]=null}))}),e.props.animationTimer+200)}))}}else e[go]=!0,e._pageContainer.style.transform="translate3d(0, ".concat(-100*t,"%, 0)"),i&&i(t+1),po.a.isNil(e["container_"+(t+1)])&&!po.a.isNil(o[t+1])&&a.push(y.a.createElement("div",{key:t+1,ref:function(n){return e["container_"+(t+1)]=n},style:{height:"calc(100% - 20px)",width:"100%","padding-bottom":"20px"}},o[t+1])),setTimeout((function(){e.setState({componentIndex:t,componentsToRender:a},(function(){e[go]=!1,e[mo]=null}))}),e.props.animationTimer+200)})),e.state={componentIndex:0,componentsToRender:[]},e[mo]=null,e[go]=!1,e[vo]=function(t){t.deltaY<0?e[xo](-t.deltaY):e[Mo](t.deltaY)},e[yo]=function(t){po.a.isNull(e[mo])?e[mo]=t.touches[0].clientY:t.touches[0].clientY>e[mo]?e[xo](25):e[Mo](25)},e[_o]=function(t){po.a.isEqual(t.keyCode,38)&&e[xo](25),po.a.isEqual(t.keyCode,40)&&e[Mo](25)},e[bo]=function(){e.forceUpdate()},e[wo]=function(t){var n=[];po.a.isNil(t)||(n=D()(t)),(n=[].concat(D()(n),D()(e.state.componentsToRender)))[e.state.componentIndex+1]||po.a.isNil(e.props.children[e.state.componentIndex+1])||n.push(y.a.createElement("div",{key:e.state.componentIndex+1,ref:function(t){return e["container_"+(e.state.componentIndex+1)]=t},style:{height:"100%",width:"100%",overflow:"hidden"}},e.props.children[e.state.componentIndex+1])),e.setState({componentsToRender:D()(n)})},e[xo]=function(t){po.a.isNil(e["container_"+(e.state.componentIndex-1)])||e[go]?e.props.scrollUnavailable&&e.props.scrollUnavailable():0===e["container_"+e.state.componentIndex].getElementsByTagName("div")[0].scrollTop&&t>=25&&(e[go]=!0,e._pageContainer.style.transform="translate3d(0, ".concat(-100*(e.state.componentIndex-1),"%, 0)"),e.props.pageOnChange&&e.props.pageOnChange(e.state.componentIndex),setTimeout((function(){e.setState((function(t){return{componentIndex:t.componentIndex-1}}),(function(){e[go]=!1,e[mo]=null}))}),e.props.animationTimer+200))},e[Mo]=function(t){if(po.a.isNil(e["container_"+(e.state.componentIndex+1)])||e[go])e.props.scrollUnavailable&&e.props.scrollUnavailable();else{var n=e["container_"+e.state.componentIndex].getElementsByTagName("div")[0];n.scrollTop===n.scrollHeight-n.clientHeight&&t>=25&&(e[go]=!0,e._pageContainer.style.transform="translate3d(0, ".concat(-100*(e.state.componentIndex+1),"%, 0)"),e.props.pageOnChange&&e.props.pageOnChange(e.state.componentIndex+2),setTimeout((function(){e.setState((function(t){return{componentIndex:t.componentIndex+1}}),(function(){e[go]=!1,e[mo]=null,e[wo]()}))}),e.props.animationTimer+200))}},e}return a()(i,[{key:"render",value:function(){var t=this,e=this.props,n=e.animationTimer,i=e.transitionTimingFunction,o=e.containerHeight;e.containerWidth;return y.a.createElement("div",{id:"PageScroller",style:{height:o,width:"inherit",overflow:"hidden",padding:"0px 0px 0px 0px"}},y.a.createElement("div",{ref:function(e){return t._pageContainer=e},tabIndex:0,style:{height:"100%",width:"100%",transition:"transform ".concat(n,"ms ").concat(i)}},this.state.componentsToRender))}}]),i}(y.a.Component);g()(Eo,"propTypes",{animationTimer:b.a.number,transitionTimingFunction:b.a.string,pageOnChange:b.a.func,scrollUnavailable:b.a.func,containerHeight:b.a.number,containerWidth:b.a.number}),g()(Eo,"defaultProps",{animationTimer:1e3,transitionTimingFunction:"ease-in-out",containerHeight:window.innerHeight,containerWidth:window.innerWidth});var Lo,To=n(68);function ko(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function So(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ko(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Co(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var jo=Object(w.b)((function(t){return{loaded:t.narrative.loaded,blocks:t.narrative.blocks,currentInFocusBlockIdx:t.narrative.blockIdx}}))(Lo=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Co()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),(e=n.call(this,t)).state={showingEndOfNarrativePage:!1},e.exitNarrativeMode=function(){e.props.dispatch(Object(To.b)({path:e.props.blocks[0].dataset,query:!0}))},e.changeAppStateViaBlock=function(t){var n=t-1;n!==e.props.blocks.length?(e.state.showingEndOfNarrativePage&&e.setState({showingEndOfNarrativePage:!1}),e.props.blocks[n].mainDisplayMarkdown?e.props.dispatch(Object(To.a)({query:to.a.parse(e.props.blocks[n].query),queryToDisplay:{n:n}})):e.props.dispatch(Object(To.b)({changeDataset:!1,query:to.a.parse(e.props.blocks[n].query),queryToDisplay:{n:n},push:!0}))):e.setState({showingEndOfNarrativePage:!0})},e.goToNextSlide=function(){e.state.showingEndOfNarrativePage||e.reactPageScroller.goToPage(e.props.currentInFocusBlockIdx+1)},e.goToPreviousSlide=function(){0!==e.props.currentInFocusBlockIdx&&e.reactPageScroller.goToPage(e.props.currentInFocusBlockIdx-1)},e}return a()(i,[{key:"componentDidMount",value:function(){window.twttr&&window.twttr.ready&&window.twttr.widgets.load(),0!==this.props.currentInFocusBlockIdx&&this.reactPageScroller.goToPage(this.props.currentInFocusBlockIdx),W.a.bind(["left","up"],this.goToPreviousSlide),W.a.bind(["right","down"],this.goToNextSlide)}},{key:"renderChevron",value:function(t){var e=30,n=30,i={zIndex:200,position:"absolute",cursor:"pointer",left:"".concat(this.props.width/2-e/2,"px")};t?i.top=O.F+25:i.bottom=0;var o=t?"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z":"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z";return y.a.createElement("div",{id:"hand".concat(t?"Up":"Down"),style:i,onClick:t?this.goToPreviousSlide:this.goToNextSlide},y.a.createElement("svg",{width:"".concat(e,"px"),height:"".concat(n,"px"),viewBox:"0 0 448 512"},y.a.createElement("path",{d:o,fill:"black"})))}},{key:"renderProgress",value:function(){var t=this;return y.a.createElement(oo,{style:{height:"".concat(25,"px")},role:"navigation"},this.props.blocks.map((function(e,n){var i=t.state.showingEndOfNarrativePage||t.props.currentInFocusBlockIdx!==n?"6px":"14px";return y.a.createElement(ro,{key:n,style:{width:i,height:i},onClick:function(){return t.reactPageScroller.goToPage(n)}})})))}},{key:"renderBlocks",value:function(){var t=this,e=this.props.blocks.map((function(t,e){var n=0===e?'\n  <p class="explanation">\n  Explore the content by scrolling the left hand side (or click on the arrows), and the data visualizations will change accordingly.\n  Clicking "explore the data yourself" (top right of page) will replace this narrative with a set of controls so that you may interact with the data.\n  </p>\n'+t.__html:t.__html;return y.a.createElement("div",{dir:"auto",id:"NarrativeBlock_".concat(e),key:e,style:{padding:"10px 20px",height:"inherit",overflowX:"hidden",overflowY:"auto"},dangerouslySetInnerHTML:{__html:n}})}));return e.push(y.a.createElement(so,{key:"EON",id:"EndOfNarrative"},y.a.createElement("h1",null,"END OF NARRATIVE"),y.a.createElement("a",{style:So({},io),onClick:function(){return t.reactPageScroller.goToPage(0)}},"Scroll back to the beginning"),y.a.createElement("br",null),y.a.createElement("a",{style:So({},io),onClick:this.exitNarrativeMode},"Leave the narrative & explore the data yourself"))),e}},{key:"render",value:function(){var t=this;return this.props.loaded?y.a.createElement(eo,{id:"NarrativeContainer",narrativeNavBarHeight:O.F},this.renderProgress(),y.a.createElement(no,{position:"top",topHeight:O.F+25}),y.a.createElement(no,{position:"bottom"}),0!==this.props.currentInFocusBlockIdx?this.renderChevron(!0):null,this.state.showingEndOfNarrativePage?null:this.renderChevron(!1),y.a.createElement(Eo,{ref:function(e){t.reactPageScroller=e},containerHeight:this.props.height-25,pageOnChange:this.changeAppStateViaBlock},this.renderBlocks())):null}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:R.t,pathname:this.props.blocks[this.props.currentInFocusBlockIdx].dataset,query:to.a.parse(this.props.blocks[this.props.currentInFocusBlockIdx].url)}),W.a.unbind(["left","right","up","down"])}}]),i}(y.a.Component))||Lo,Oo=n(598),Ao=n(712),Do=n.n(Ao),Po=n(713),No=n.n(Po),Io=n(167),zo=function(t){var e=t.onMouseDown;return y.a.createElement("span",{className:"Select-arrow",onMouseDown:e})};zo.propTypes={onMouseDown:b.a.func};var Ro=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],Bo=function(t){for(var e=0;e<Ro.length;e++)t=t.replace(Ro[e].letters,Ro[e].base);return t},Fo=function(t){return null!=t&&""!==t},Vo=function(t,e,n,i){return i.ignoreAccents&&(e=Bo(e)),i.ignoreCase&&(e=e.toLowerCase()),i.trimFilter&&(e=e.replace(/^\s+|\s+$/g,"")),n&&(n=n.map((function(t){return t[i.valueKey]}))),t.filter((function(t){if(n&&n.indexOf(t[i.valueKey])>-1)return!1;if(i.filterOption)return i.filterOption.call(void 0,t,e);if(!e)return!0;var o=t[i.valueKey],r=t[i.labelKey],a=Fo(o),s=Fo(r);if(!a&&!s)return!1;var l=a?String(o):null,u=s?String(r):null;return i.ignoreAccents&&(l&&"label"!==i.matchProp&&(l=Bo(l)),u&&"value"!==i.matchProp&&(u=Bo(u))),i.ignoreCase&&(l&&"label"!==i.matchProp&&(l=l.toLowerCase()),u&&"value"!==i.matchProp&&(u=u.toLowerCase())),"start"===i.matchPos?l&&"label"!==i.matchProp&&l.substr(0,e.length)===e||u&&"value"!==i.matchProp&&u.substr(0,e.length)===e:l&&"label"!==i.matchProp&&l.indexOf(e)>=0||u&&"value"!==i.matchProp&&u.indexOf(e)>=0}))},Wo=function(t){var e=t.focusedOption,n=t.focusOption,i=t.inputValue,o=t.instancePrefix,r=t.onFocus,a=t.onOptionRef,s=t.onSelect,l=t.optionClassName,u=t.optionComponent,c=t.optionRenderer,h=t.options,p=t.removeValue,d=t.selectValue,f=t.valueArray,m=t.valueKey,g=u;return h.map((function(t,u){var h=f&&f.some((function(e){return e[m]===t[m]})),v=t===e,_=No()(l,{"Select-option":!0,"is-selected":h,"is-focused":v,"is-disabled":t.disabled});return y.a.createElement(g,{className:_,focusOption:n,inputValue:i,instancePrefix:o,isDisabled:t.disabled,isFocused:v,isSelected:h,key:"option-"+u+"-"+t[m],onFocus:r,onSelect:s,option:t,optionIndex:u,ref:function(t){a(t,v)},removeValue:p,selectValue:d},c(t,u,i))}))};Wo.propTypes={focusOption:b.a.func,focusedOption:b.a.object,inputValue:b.a.string,instancePrefix:b.a.string,onFocus:b.a.func,onOptionRef:b.a.func,onSelect:b.a.func,optionClassName:b.a.string,optionComponent:b.a.func,optionRenderer:b.a.func,options:b.a.array,removeValue:b.a.func,selectValue:b.a.func,valueArray:b.a.array,valueKey:b.a.string};var Zo=function(t){t.preventDefault(),t.stopPropagation(),"A"===t.target.tagName&&"href"in t.target&&(t.target.target?window.open(t.target.href,t.target.target):window.location.href=t.target.href)},Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uo=(function(){function t(t){this.value=t}function e(e){var n,i;function o(n,i){try{var a=e[n](i),s=a.value;s instanceof t?Promise.resolve(s.value).then((function(t){o("next",t)}),(function(t){o("throw",t)})):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?o(n.key,n.arg):i=null}this._invoke=function(t,e){return new Promise((function(r,a){var s={key:t,arg:e,resolve:r,reject:a,next:null};i?i=i.next=s:(n=i=s,o(t,e))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),Yo=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Go=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},qo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ko=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Qo=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},Xo=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},$o=function(t){function e(t){Uo(this,e);var n=Xo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleMouseDown=n.handleMouseDown.bind(n),n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleMouseMove=n.handleMouseMove.bind(n),n.handleTouchStart=n.handleTouchStart.bind(n),n.handleTouchEnd=n.handleTouchEnd.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.onFocus=n.onFocus.bind(n),n}return Ko(e,t),Yo(e,[{key:"handleMouseDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.props.onSelect(this.props.option,t)}},{key:"handleMouseEnter",value:function(t){this.onFocus(t)}},{key:"handleMouseMove",value:function(t){this.onFocus(t)}},{key:"handleTouchEnd",value:function(t){this.dragging||this.handleMouseDown(t)}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"onFocus",value:function(t){this.props.isFocused||this.props.onFocus(this.props.option,t)}},{key:"render",value:function(){var t=this.props,e=t.option,n=t.instancePrefix,i=t.optionIndex,o=No()(this.props.className,e.className);return e.disabled?y.a.createElement("div",{className:o,onMouseDown:Zo,onClick:Zo},this.props.children):y.a.createElement("div",{className:o,style:e.style,role:"option","aria-label":e.label,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,id:n+"-option-"+i,title:e.title},this.props.children)}}]),e}(y.a.Component);$o.propTypes={children:b.a.node,className:b.a.string,instancePrefix:b.a.string.isRequired,isDisabled:b.a.bool,isFocused:b.a.bool,isSelected:b.a.bool,onFocus:b.a.func,onSelect:b.a.func,onUnfocus:b.a.func,option:b.a.object.isRequired,optionIndex:b.a.number};var Jo=function(t){function e(t){Uo(this,e);var n=Xo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleMouseDown=n.handleMouseDown.bind(n),n.onRemove=n.onRemove.bind(n),n.handleTouchEndRemove=n.handleTouchEndRemove.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.handleTouchStart=n.handleTouchStart.bind(n),n}return Ko(e,t),Yo(e,[{key:"handleMouseDown",value:function(t){if("mousedown"!==t.type||0===t.button)return this.props.onClick?(t.stopPropagation(),void this.props.onClick(this.props.value,t)):void(this.props.value.href&&t.stopPropagation())}},{key:"onRemove",value:function(t){t.preventDefault(),t.stopPropagation(),this.props.onRemove(this.props.value)}},{key:"handleTouchEndRemove",value:function(t){this.dragging||this.onRemove(t)}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"renderRemoveIcon",value:function(){if(!this.props.disabled&&this.props.onRemove)return y.a.createElement("span",{className:"Select-value-icon","aria-hidden":"true",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},"×")}},{key:"renderLabel",value:function(){return this.props.onClick||this.props.value.href?y.a.createElement("a",{className:"Select-value-label",href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):y.a.createElement("span",{className:"Select-value-label",role:"option","aria-selected":"true",id:this.props.id},this.props.children)}},{key:"render",value:function(){return y.a.createElement("div",{className:No()("Select-value",this.props.value.disabled?"Select-value-disabled":"",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}}]),e}(y.a.Component);Jo.propTypes={children:b.a.node,disabled:b.a.bool,id:b.a.string,onClick:b.a.func,onRemove:b.a.func,value:b.a.object.isRequired};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/react-select
*/
var tr=function(t){return"string"==typeof t?t:null!==t&&JSON.stringify(t)||""},er=b.a.oneOfType([b.a.string,b.a.node]),nr=b.a.oneOfType([b.a.string,b.a.number]),ir=1,or=function(t,e){var n=void 0===t?"undefined":Ho(t);if("string"!==n&&"number"!==n&&"boolean"!==n)return t;var i=e.options,o=e.valueKey;if(i)for(var r=0;r<i.length;r++)if(String(i[r][o])===String(t))return i[r]},rr=function(t,e){return!t||(e?0===t.length:0===Object.keys(t).length)},ar=function(t){function e(t){Uo(this,e);var n=Xo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["clearValue","focusOption","getOptionLabel","handleInputBlur","handleInputChange","handleInputFocus","handleInputValueChange","handleKeyDown","handleMenuScroll","handleMouseDown","handleMouseDownOnArrow","handleMouseDownOnMenu","handleTouchEnd","handleTouchEndClearValue","handleTouchMove","handleTouchOutside","handleTouchStart","handleValueClick","onOptionRef","removeValue","selectValue"].forEach((function(t){return n[t]=n[t].bind(n)})),n.state={inputValue:"",isFocused:!1,isOpen:!1,isPseudoFocused:!1,required:!1},n}return Ko(e,t),Yo(e,[{key:"componentWillMount",value:function(){this._instancePrefix="react-select-"+(this.props.instanceId||++ir)+"-";var t=this.getValueArray(this.props.value);this.props.required&&this.setState({required:rr(t[0],this.props.multi)})}},{key:"componentDidMount",value:function(){void 0!==this.props.autofocus&&"undefined"!=typeof console&&console.warn("Warning: The autofocus prop has changed to autoFocus, support will be removed after react-select@1.0"),(this.props.autoFocus||this.props.autofocus)&&this.focus()}},{key:"componentWillReceiveProps",value:function(t){var e=this.getValueArray(t.value,t);t.required?this.setState({required:rr(e[0],t.multi)}):this.props.required&&this.setState({required:!1}),this.state.inputValue&&this.props.value!==t.value&&t.onSelectResetsInput&&this.setState({inputValue:this.handleInputValueChange("")})}},{key:"componentDidUpdate",value:function(t,e){if(this.menu&&this.focused&&this.state.isOpen&&!this.hasScrolledToOption){var n=Object(Io.findDOMNode)(this.focused),i=Object(Io.findDOMNode)(this.menu),o=i.scrollTop,r=o+i.offsetHeight,a=n.offsetTop,s=a+n.offsetHeight;(o>a||r<s)&&(i.scrollTop=n.offsetTop),this.hasScrolledToOption=!0}else this.state.isOpen||(this.hasScrolledToOption=!1);if(this._scrollToFocusedOptionOnUpdate&&this.focused&&this.menu){this._scrollToFocusedOptionOnUpdate=!1;var l=Object(Io.findDOMNode)(this.focused),u=Object(Io.findDOMNode)(this.menu),c=l.getBoundingClientRect(),h=u.getBoundingClientRect();c.bottom>h.bottom?u.scrollTop=l.offsetTop+l.clientHeight-u.offsetHeight:c.top<h.top&&(u.scrollTop=l.offsetTop)}if(this.props.scrollMenuIntoView&&this.menuContainer){var p=this.menuContainer.getBoundingClientRect();window.innerHeight<p.bottom+this.props.menuBuffer&&window.scrollBy(0,p.bottom+this.props.menuBuffer-window.innerHeight)}if(t.disabled!==this.props.disabled&&(this.setState({isFocused:!1}),this.closeMenu()),e.isOpen!==this.state.isOpen){this.toggleTouchOutsideEvent(this.state.isOpen);var d=this.state.isOpen?this.props.onOpen:this.props.onClose;d&&d()}}},{key:"componentWillUnmount",value:function(){this.toggleTouchOutsideEvent(!1)}},{key:"toggleTouchOutsideEvent",value:function(t){var e=t?document.addEventListener?"addEventListener":"attachEvent":document.removeEventListener?"removeEventListener":"detachEvent",n=document.addEventListener?"":"on";document[e](n+"touchstart",this.handleTouchOutside),document[e](n+"mousedown",this.handleTouchOutside)}},{key:"handleTouchOutside",value:function(t){this.wrapper&&!this.wrapper.contains(t.target)&&this.closeMenu()}},{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"blurInput",value:function(){this.input&&this.input.blur()}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"handleTouchEnd",value:function(t){this.dragging||this.handleMouseDown(t)}},{key:"handleTouchEndClearValue",value:function(t){this.dragging||this.clearValue(t)}},{key:"handleMouseDown",value:function(t){if(!(this.props.disabled||"mousedown"===t.type&&0!==t.button))if("INPUT"!==t.target.tagName){if(t.preventDefault(),!this.props.searchable)return this.focus(),this.setState({isOpen:!this.state.isOpen,focusedOption:null});if(this.state.isFocused){this.focus();var e=this.input,n=!0;"function"==typeof e.getInput&&(e=e.getInput()),e.value="",this._focusAfterClear&&(n=!1,this._focusAfterClear=!1),this.setState({isOpen:n,isPseudoFocused:!1,focusedOption:null})}else this._openAfterFocus=this.props.openOnClick,this.focus(),this.setState({focusedOption:null})}else this.state.isFocused?this.state.isOpen||this.setState({isOpen:!0,isPseudoFocused:!1,focusedOption:null}):(this._openAfterFocus=this.props.openOnClick,this.focus())}},{key:"handleMouseDownOnArrow",value:function(t){this.props.disabled||"mousedown"===t.type&&0!==t.button||(this.state.isOpen?(t.stopPropagation(),t.preventDefault(),this.closeMenu()):this.setState({isOpen:!0}))}},{key:"handleMouseDownOnMenu",value:function(t){this.props.disabled||"mousedown"===t.type&&0!==t.button||(t.stopPropagation(),t.preventDefault(),this._openAfterFocus=!0,this.focus())}},{key:"closeMenu",value:function(){this.props.onCloseResetsInput?this.setState({inputValue:this.handleInputValueChange(""),isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}):this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}),this.hasScrolledToOption=!1}},{key:"handleInputFocus",value:function(t){if(!this.props.disabled){var e=this.state.isOpen||this._openAfterFocus||this.props.openOnFocus;e=!this._focusAfterClear&&e,this.props.onFocus&&this.props.onFocus(t),this.setState({isFocused:!0,isOpen:!!e}),this._focusAfterClear=!1,this._openAfterFocus=!1}}},{key:"handleInputBlur",value:function(t){if(!this.menu||this.menu!==document.activeElement&&!this.menu.contains(document.activeElement)){this.props.onBlur&&this.props.onBlur(t);var e={isFocused:!1,isOpen:!1,isPseudoFocused:!1};this.props.onBlurResetsInput&&(e.inputValue=this.handleInputValueChange("")),this.setState(e)}else this.focus()}},{key:"handleInputChange",value:function(t){var e=t.target.value;this.state.inputValue!==t.target.value&&(e=this.handleInputValueChange(e)),this.setState({inputValue:e,isOpen:!0,isPseudoFocused:!1})}},{key:"setInputValue",value:function(t){if(this.props.onInputChange){var e=this.props.onInputChange(t);null!=e&&"object"!==(void 0===e?"undefined":Ho(e))&&(t=""+e)}this.setState({inputValue:t})}},{key:"handleInputValueChange",value:function(t){if(this.props.onInputChange){var e=this.props.onInputChange(t);null!=e&&"object"!==(void 0===e?"undefined":Ho(e))&&(t=""+e)}return t}},{key:"handleKeyDown",value:function(t){if(!(this.props.disabled||"function"==typeof this.props.onInputKeyDown&&(this.props.onInputKeyDown(t),t.defaultPrevented)))switch(t.keyCode){case 8:!this.state.inputValue&&this.props.backspaceRemoves&&(t.preventDefault(),this.popValue());break;case 9:if(t.shiftKey||!this.state.isOpen||!this.props.tabSelectsValue)break;t.preventDefault(),this.selectFocusedOption();break;case 13:t.preventDefault(),t.stopPropagation(),this.state.isOpen?this.selectFocusedOption():this.focusNextOption();break;case 27:t.preventDefault(),this.state.isOpen?(this.closeMenu(),t.stopPropagation()):this.props.clearable&&this.props.escapeClearsValue&&(this.clearValue(t),t.stopPropagation());break;case 32:if(this.props.searchable)break;if(t.preventDefault(),!this.state.isOpen){this.focusNextOption();break}t.stopPropagation(),this.selectFocusedOption();break;case 38:t.preventDefault(),this.focusPreviousOption();break;case 40:t.preventDefault(),this.focusNextOption();break;case 33:t.preventDefault(),this.focusPageUpOption();break;case 34:t.preventDefault(),this.focusPageDownOption();break;case 35:if(t.shiftKey)break;t.preventDefault(),this.focusEndOption();break;case 36:if(t.shiftKey)break;t.preventDefault(),this.focusStartOption();break;case 46:!this.state.inputValue&&this.props.deleteRemoves&&(t.preventDefault(),this.popValue())}}},{key:"handleValueClick",value:function(t,e){this.props.onValueClick&&this.props.onValueClick(t,e)}},{key:"handleMenuScroll",value:function(t){if(this.props.onMenuScrollToBottom){var e=t.target;e.scrollHeight>e.offsetHeight&&e.scrollHeight-e.offsetHeight-e.scrollTop<=0&&this.props.onMenuScrollToBottom()}}},{key:"getOptionLabel",value:function(t){return t[this.props.labelKey]}},{key:"getValueArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="object"===(void 0===e?"undefined":Ho(e))?e:this.props;if(n.multi){if("string"==typeof t&&(t=t.split(n.delimiter)),!Array.isArray(t)){if(null==t)return[];t=[t]}return t.map((function(t){return or(t,n)})).filter((function(t){return t}))}var i=or(t,n);return i?[i]:[]}},{key:"setValue",value:function(t){var e=this;if(this.props.autoBlur&&this.blurInput(),this.props.required){var n=rr(t,this.props.multi);this.setState({required:n})}this.props.simpleValue&&t&&(t=this.props.multi?t.map((function(t){return t[e.props.valueKey]})).join(this.props.delimiter):t[this.props.valueKey]),this.props.onChange&&this.props.onChange(t)}},{key:"selectValue",value:function(t){var e=this;this.props.closeOnSelect&&(this.hasScrolledToOption=!1);var n=this.props.onSelectResetsInput?"":this.state.inputValue;this.props.multi?this.setState({focusedIndex:null,inputValue:this.handleInputValueChange(n),isOpen:!this.props.closeOnSelect},(function(){e.getValueArray(e.props.value).some((function(n){return n[e.props.valueKey]===t[e.props.valueKey]}))?e.removeValue(t):e.addValue(t)})):this.setState({inputValue:this.handleInputValueChange(n),isOpen:!this.props.closeOnSelect,isPseudoFocused:this.state.isFocused},(function(){e.setValue(t)}))}},{key:"addValue",value:function(t){var e=this.getValueArray(this.props.value),n=this._visibleOptions.filter((function(t){return!t.disabled})),i=n.indexOf(t);this.setValue(e.concat(t)),this.props.closeOnSelect&&(n.length-1===i?this.focusOption(n[i-1]):n.length>i&&this.focusOption(n[i+1]))}},{key:"popValue",value:function(){var t=this.getValueArray(this.props.value);t.length&&!1!==t[t.length-1].clearableValue&&this.setValue(this.props.multi?t.slice(0,t.length-1):null)}},{key:"removeValue",value:function(t){var e=this,n=this.getValueArray(this.props.value);this.setValue(n.filter((function(n){return n[e.props.valueKey]!==t[e.props.valueKey]}))),this.focus()}},{key:"clearValue",value:function(t){t&&"mousedown"===t.type&&0!==t.button||(t.preventDefault(),this.setValue(this.getResetValue()),this.setState({inputValue:this.handleInputValueChange(""),isOpen:!1},this.focus),this._focusAfterClear=!0)}},{key:"getResetValue",value:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null}},{key:"focusOption",value:function(t){this.setState({focusedOption:t})}},{key:"focusNextOption",value:function(){this.focusAdjacentOption("next")}},{key:"focusPreviousOption",value:function(){this.focusAdjacentOption("previous")}},{key:"focusPageUpOption",value:function(){this.focusAdjacentOption("page_up")}},{key:"focusPageDownOption",value:function(){this.focusAdjacentOption("page_down")}},{key:"focusStartOption",value:function(){this.focusAdjacentOption("start")}},{key:"focusEndOption",value:function(){this.focusAdjacentOption("end")}},{key:"focusAdjacentOption",value:function(t){var e=this._visibleOptions.map((function(t,e){return{option:t,index:e}})).filter((function(t){return!t.option.disabled}));if(this._scrollToFocusedOptionOnUpdate=!0,!this.state.isOpen){var n={focusedOption:this._focusedOption||(e.length?e["next"===t?0:e.length-1].option:null),isOpen:!0};return this.props.onSelectResetsInput&&(n.inputValue=""),void this.setState(n)}if(e.length){for(var i=-1,o=0;o<e.length;o++)if(this._focusedOption===e[o].option){i=o;break}if("next"===t&&-1!==i)i=(i+1)%e.length;else if("previous"===t)i>0?i-=1:i=e.length-1;else if("start"===t)i=0;else if("end"===t)i=e.length-1;else if("page_up"===t){var r=i-this.props.pageSize;i=r<0?0:r}else if("page_down"===t){var a=i+this.props.pageSize;i=a>e.length-1?e.length-1:a}-1===i&&(i=0),this.setState({focusedIndex:e[i].index,focusedOption:e[i].option})}}},{key:"getFocusedOption",value:function(){return this._focusedOption}},{key:"selectFocusedOption",value:function(){if(this._focusedOption)return this.selectValue(this._focusedOption)}},{key:"renderLoading",value:function(){if(this.props.isLoading)return y.a.createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},y.a.createElement("span",{className:"Select-loading"}))}},{key:"renderValue",value:function(t,e){var n=this,i=this.props.valueRenderer||this.getOptionLabel,o=this.props.valueComponent;if(!t.length)return function(t,e,n){var i=t.inputValue,o=t.isPseudoFocused,r=t.isFocused,a=e.onSelectResetsInput;return!i||!a&&!n&&!o&&!r}(this.state,this.props,e)?y.a.createElement("div",{className:"Select-placeholder"},this.props.placeholder):null;var r,a,s,l,u,c,h=this.props.onValueClick?this.handleValueClick:null;return this.props.multi?t.map((function(e,r){return y.a.createElement(o,{disabled:n.props.disabled||!1===e.clearableValue,id:n._instancePrefix+"-value-"+r,instancePrefix:n._instancePrefix,key:"value-"+r+"-"+e[n.props.valueKey],onClick:h,onRemove:n.removeValue,placeholder:n.props.placeholder,value:e,values:t},i(e,r),y.a.createElement("span",{className:"Select-aria-only"}," "))})):(r=this.state,a=this.props,s=r.inputValue,l=r.isPseudoFocused,u=r.isFocused,c=a.onSelectResetsInput,s&&(c||!u&&l||u&&!l)?void 0:(e&&(h=null),y.a.createElement(o,{disabled:this.props.disabled,id:this._instancePrefix+"-value-item",instancePrefix:this._instancePrefix,onClick:h,placeholder:this.props.placeholder,value:t[0]},i(t[0]))))}},{key:"renderInput",value:function(t,e){var n,i=this,o=No()("Select-input",this.props.inputProps.className),r=this.state.isOpen,a=No()((Go(n={},this._instancePrefix+"-list",r),Go(n,this._instancePrefix+"-backspace-remove-message",this.props.multi&&!this.props.disabled&&this.state.isFocused&&!this.state.inputValue),n)),s=this.state.inputValue;!s||this.props.onSelectResetsInput||this.state.isFocused||(s="");var l=qo({},this.props.inputProps,{"aria-activedescendant":r?this._instancePrefix+"-option-"+e:this._instancePrefix+"-value","aria-describedby":this.props["aria-describedby"],"aria-expanded":""+r,"aria-haspopup":""+r,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-owns":a,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:function(t){return i.input=t},role:"combobox",required:this.state.required,tabIndex:this.props.tabIndex,value:s});if(this.props.inputRenderer)return this.props.inputRenderer(l);if(this.props.disabled||!this.props.searchable){var u=Qo(this.props.inputProps,[]),c=No()(Go({},this._instancePrefix+"-list",r));return y.a.createElement("div",qo({},u,{"aria-expanded":r,"aria-owns":c,"aria-activedescendant":r?this._instancePrefix+"-option-"+e:this._instancePrefix+"-value","aria-disabled":""+this.props.disabled,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],className:o,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:function(t){return i.input=t},role:"combobox",style:{border:0,width:1,display:"inline-block"},tabIndex:this.props.tabIndex||0}))}return this.props.autosize?y.a.createElement(Do.a,qo({id:this.props.id},l,{className:o,minWidth:"5"})):y.a.createElement("div",{className:o,key:"input-wrap",style:{display:"inline-block"}},y.a.createElement("input",qo({id:this.props.id},l)))}},{key:"renderClear",value:function(){var t=this.getValueArray(this.props.value);if(this.props.clearable&&t.length&&!this.props.disabled&&!this.props.isLoading){var e=this.props.multi?this.props.clearAllText:this.props.clearValueText,n=this.props.clearRenderer();return y.a.createElement("span",{"aria-label":e,className:"Select-clear-zone",onMouseDown:this.clearValue,onTouchEnd:this.handleTouchEndClearValue,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,title:e},n)}}},{key:"renderArrow",value:function(){if(this.props.arrowRenderer){var t=this.handleMouseDownOnArrow,e=this.state.isOpen,n=this.props.arrowRenderer({onMouseDown:t,isOpen:e});return n?y.a.createElement("span",{className:"Select-arrow-zone",onMouseDown:t},n):null}}},{key:"filterOptions",value:function(t){var e=this.state.inputValue,n=this.props.options||[];if(this.props.filterOptions){var i="function"==typeof this.props.filterOptions?this.props.filterOptions:Vo;return i(n,e,t,{filterOption:this.props.filterOption,ignoreAccents:this.props.ignoreAccents,ignoreCase:this.props.ignoreCase,labelKey:this.props.labelKey,matchPos:this.props.matchPos,matchProp:this.props.matchProp,trimFilter:this.props.trimFilter,valueKey:this.props.valueKey})}return n}},{key:"onOptionRef",value:function(t,e){e&&(this.focused=t)}},{key:"renderMenu",value:function(t,e,n){return t&&t.length?this.props.menuRenderer({focusedOption:n,focusOption:this.focusOption,inputValue:this.state.inputValue,instancePrefix:this._instancePrefix,labelKey:this.props.labelKey,onFocus:this.focusOption,onOptionRef:this.onOptionRef,onSelect:this.selectValue,optionClassName:this.props.optionClassName,optionComponent:this.props.optionComponent,optionRenderer:this.props.optionRenderer||this.getOptionLabel,options:t,removeValue:this.removeValue,selectValue:this.selectValue,valueArray:e,valueKey:this.props.valueKey}):this.props.noResultsText?y.a.createElement("div",{className:"Select-noresults"},this.props.noResultsText):null}},{key:"renderHiddenField",value:function(t){var e=this;if(this.props.name){if(this.props.joinValues){var n=t.map((function(t){return tr(t[e.props.valueKey])})).join(this.props.delimiter);return y.a.createElement("input",{disabled:this.props.disabled,name:this.props.name,ref:function(t){return e.value=t},type:"hidden",value:n})}return t.map((function(t,n){return y.a.createElement("input",{disabled:e.props.disabled,key:"hidden."+n,name:e.props.name,ref:"value"+n,type:"hidden",value:tr(t[e.props.valueKey])})}))}}},{key:"getFocusableOptionIndex",value:function(t){var e=this._visibleOptions;if(!e.length)return null;var n=this.props.valueKey,i=this.state.focusedOption||t;if(i&&!i.disabled){var o=-1;if(e.some((function(t,e){var r=t[n]===i[n];return r&&(o=e),r})),-1!==o)return o}for(var r=0;r<e.length;r++)if(!e[r].disabled)return r;return null}},{key:"renderOuter",value:function(t,e,n){var i=this,o=this.renderMenu(t,e,n);return o?y.a.createElement("div",{ref:function(t){return i.menuContainer=t},className:"Select-menu-outer",style:this.props.menuContainerStyle},y.a.createElement("div",{className:"Select-menu",id:this._instancePrefix+"-list",onMouseDown:this.handleMouseDownOnMenu,onScroll:this.handleMenuScroll,ref:function(t){return i.menu=t},role:"listbox",style:this.props.menuStyle,tabIndex:-1},o)):null}},{key:"render",value:function(){var t=this,e=this.getValueArray(this.props.value),n=this._visibleOptions=this.filterOptions(this.props.multi&&this.props.removeSelected?e:null),i=this.state.isOpen;this.props.multi&&!n.length&&e.length&&!this.state.inputValue&&(i=!1);var o=this.getFocusableOptionIndex(e[0]),r=null;r=this._focusedOption=null!==o?n[o]:null;var a=No()("Select",this.props.className,{"has-value":e.length,"is-clearable":this.props.clearable,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":i,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"Select--multi":this.props.multi,"Select--rtl":this.props.rtl,"Select--single":!this.props.multi}),s=null;return this.props.multi&&!this.props.disabled&&e.length&&!this.state.inputValue&&this.state.isFocused&&this.props.backspaceRemoves&&(s=y.a.createElement("span",{id:this._instancePrefix+"-backspace-remove-message",className:"Select-aria-only","aria-live":"assertive"},this.props.backspaceToRemoveMessage.replace("{label}",e[e.length-1][this.props.labelKey]))),y.a.createElement("div",{ref:function(e){return t.wrapper=e},className:a,style:this.props.wrapperStyle},this.renderHiddenField(e),y.a.createElement("div",{ref:function(e){return t.control=e},className:"Select-control",onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,style:this.props.style},y.a.createElement("div",{className:"Select-multi-value-wrapper",id:this._instancePrefix+"-value"},this.renderValue(e,i),this.renderInput(e,o)),s,this.renderLoading(),this.renderClear(),this.renderArrow()),i?this.renderOuter(n,e,r):null)}}]),e}(y.a.Component);ar.propTypes={"aria-describedby":b.a.string,"aria-label":b.a.string,"aria-labelledby":b.a.string,arrowRenderer:b.a.func,autoBlur:b.a.bool,autoFocus:b.a.bool,autofocus:b.a.bool,autosize:b.a.bool,backspaceRemoves:b.a.bool,backspaceToRemoveMessage:b.a.string,className:b.a.string,clearAllText:er,clearRenderer:b.a.func,clearValueText:er,clearable:b.a.bool,closeOnSelect:b.a.bool,deleteRemoves:b.a.bool,delimiter:b.a.string,disabled:b.a.bool,escapeClearsValue:b.a.bool,filterOption:b.a.func,filterOptions:b.a.any,id:b.a.string,ignoreAccents:b.a.bool,ignoreCase:b.a.bool,inputProps:b.a.object,inputRenderer:b.a.func,instanceId:b.a.string,isLoading:b.a.bool,joinValues:b.a.bool,labelKey:b.a.string,matchPos:b.a.string,matchProp:b.a.string,menuBuffer:b.a.number,menuContainerStyle:b.a.object,menuRenderer:b.a.func,menuStyle:b.a.object,multi:b.a.bool,name:b.a.string,noResultsText:er,onBlur:b.a.func,onBlurResetsInput:b.a.bool,onChange:b.a.func,onClose:b.a.func,onCloseResetsInput:b.a.bool,onFocus:b.a.func,onInputChange:b.a.func,onInputKeyDown:b.a.func,onMenuScrollToBottom:b.a.func,onOpen:b.a.func,onSelectResetsInput:b.a.bool,onValueClick:b.a.func,openOnClick:b.a.bool,openOnFocus:b.a.bool,optionClassName:b.a.string,optionComponent:b.a.func,optionRenderer:b.a.func,options:b.a.array,pageSize:b.a.number,placeholder:er,removeSelected:b.a.bool,required:b.a.bool,resetValue:b.a.any,rtl:b.a.bool,scrollMenuIntoView:b.a.bool,searchable:b.a.bool,simpleValue:b.a.bool,style:b.a.object,tabIndex:nr,tabSelectsValue:b.a.bool,trimFilter:b.a.bool,value:b.a.any,valueComponent:b.a.func,valueKey:b.a.string,valueRenderer:b.a.func,wrapperStyle:b.a.object},ar.defaultProps={arrowRenderer:zo,autosize:!0,backspaceRemoves:!0,backspaceToRemoveMessage:"Press backspace to remove {label}",clearable:!0,clearAllText:"Clear all",clearRenderer:function(){return y.a.createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}})},clearValueText:"Clear value",closeOnSelect:!0,deleteRemoves:!0,delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:Vo,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,joinValues:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,menuRenderer:Wo,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,onCloseResetsInput:!0,onSelectResetsInput:!0,openOnClick:!0,optionComponent:$o,pageSize:5,placeholder:"Select...",removeSelected:!0,required:!1,rtl:!1,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,tabSelectsValue:!0,trimFilter:!0,valueComponent:Jo,valueKey:"value"};var sr={autoload:b.a.bool.isRequired,cache:b.a.any,children:b.a.func.isRequired,ignoreAccents:b.a.bool,ignoreCase:b.a.bool,loadOptions:b.a.func.isRequired,loadingPlaceholder:b.a.oneOfType([b.a.string,b.a.node]),multi:b.a.bool,noResultsText:b.a.oneOfType([b.a.string,b.a.node]),onChange:b.a.func,onInputChange:b.a.func,options:b.a.array.isRequired,placeholder:b.a.oneOfType([b.a.string,b.a.node]),searchPromptText:b.a.oneOfType([b.a.string,b.a.node]),value:b.a.any},lr={},ur={autoload:!0,cache:lr,children:function(t){return y.a.createElement(ar,t)},ignoreAccents:!0,ignoreCase:!0,loadingPlaceholder:"Loading...",options:[],searchPromptText:"Type to search"},cr=function(t){function e(t,n){Uo(this,e);var i=Xo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i._cache=t.cache===lr?{}:t.cache,i.state={inputValue:"",isLoading:!1,options:t.options},i.onInputChange=i.onInputChange.bind(i),i}return Ko(e,t),Yo(e,[{key:"componentDidMount",value:function(){this.props.autoload&&this.loadOptions("")}},{key:"componentWillReceiveProps",value:function(t){t.options!==this.props.options&&this.setState({options:t.options})}},{key:"componentWillUnmount",value:function(){this._callback=null}},{key:"loadOptions",value:function(t){var e=this,n=this.props.loadOptions,i=this._cache;if(i&&Object.prototype.hasOwnProperty.call(i,t))return this._callback=null,void this.setState({isLoading:!1,options:i[t]});var o=function n(o,r){var a=r&&r.options||[];i&&(i[t]=a),n===e._callback&&(e._callback=null,e.setState({isLoading:!1,options:a}))};this._callback=o;var r=n(t,o);r&&r.then((function(t){return o(0,t)}),(function(t){return o()})),this._callback&&!this.state.isLoading&&this.setState({isLoading:!0})}},{key:"onInputChange",value:function(t){var e=this.props,n=e.ignoreAccents,i=e.ignoreCase,o=e.onInputChange,r=t;if(o){var a=o(r);null!=a&&"object"!==(void 0===a?"undefined":Ho(a))&&(r=""+a)}var s=r;return n&&(s=Bo(s)),i&&(s=s.toLowerCase()),this.setState({inputValue:r}),this.loadOptions(s),r}},{key:"noResultsText",value:function(){var t=this.props,e=t.loadingPlaceholder,n=t.noResultsText,i=t.searchPromptText,o=this.state,r=o.inputValue;return o.isLoading?e:r&&n?n:i}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,i=e.loadingPlaceholder,o=e.placeholder,r=this.state,a=r.isLoading,s=r.options,l={noResultsText:this.noResultsText(),placeholder:a?i:o,options:a&&i?[]:s,ref:function(e){return t.select=e}};return n(qo({},this.props,l,{isLoading:a,onInputChange:this.onInputChange}))}}]),e}(v.Component);cr.propTypes=sr,cr.defaultProps=ur;var hr=function(t){function e(t,n){Uo(this,e);var i=Xo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.filterOptions=i.filterOptions.bind(i),i.menuRenderer=i.menuRenderer.bind(i),i.onInputKeyDown=i.onInputKeyDown.bind(i),i.onInputChange=i.onInputChange.bind(i),i.onOptionSelect=i.onOptionSelect.bind(i),i}return Ko(e,t),Yo(e,[{key:"createNewOption",value:function(){var t=this.props,e=t.isValidNewOption,n=t.newOptionCreator,i=t.onNewOptionClick,o=t.options,r=void 0===o?[]:o;if(e({label:this.inputValue})){var a=n({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey});this.isOptionUnique({option:a,options:r})&&(i?i(a):(r.unshift(a),this.select.selectValue(a)))}}},{key:"filterOptions",value:function(){var t=this.props,e=t.filterOptions,n=t.isValidNewOption,i=t.promptTextCreator,o=t.showNewOptionAtTop,r=(arguments.length<=2?void 0:arguments[2])||[],a=e.apply(void 0,arguments)||[];if(n({label:this.inputValue})){var s=this.props.newOptionCreator,l=s({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey}),u=this.isOptionUnique({option:l,options:r.concat(a)});if(u){var c=i(this.inputValue);this._createPlaceholderOption=s({label:c,labelKey:this.labelKey,valueKey:this.valueKey}),o?a.unshift(this._createPlaceholderOption):a.push(this._createPlaceholderOption)}}return a}},{key:"isOptionUnique",value:function(t){var e=t.option,n=t.options,i=this.props.isOptionUnique;return n=n||this.props.options,i({labelKey:this.labelKey,option:e,options:n,valueKey:this.valueKey})}},{key:"menuRenderer",value:function(t){var e=this.props.menuRenderer;return e(qo({},t,{onSelect:this.onOptionSelect,selectValue:this.onOptionSelect}))}},{key:"onInputChange",value:function(t){var e=this.props.onInputChange;return this.inputValue=t,e&&(this.inputValue=e(t)),this.inputValue}},{key:"onInputKeyDown",value:function(t){var e=this.props,n=e.shouldKeyDownEventCreateNewOption,i=e.onInputKeyDown,o=this.select.getFocusedOption();o&&o===this._createPlaceholderOption&&n(t)?(this.createNewOption(),t.preventDefault()):i&&i(t)}},{key:"onOptionSelect",value:function(t){t===this._createPlaceholderOption?this.createNewOption():this.select.selectValue(t)}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var t=this,e=this.props,n=e.ref,i=Qo(e,["ref"]),o=this.props.children;return o||(o=pr),o(qo({},i,{allowCreate:!0,filterOptions:this.filterOptions,menuRenderer:this.menuRenderer,onInputChange:this.onInputChange,onInputKeyDown:this.onInputKeyDown,ref:function(e){t.select=e,e&&(t.labelKey=e.props.labelKey,t.valueKey=e.props.valueKey),n&&n(e)}}))}}]),e}(y.a.Component),pr=function(t){return y.a.createElement(ar,t)},dr=function(t){var e=t.option,n=t.options,i=t.labelKey,o=t.valueKey;return!n||!n.length||0===n.filter((function(t){return t[i]===e[i]||t[o]===e[o]})).length},fr=function(t){return!!t.label},mr=function(t){var e=t.label,n=t.labelKey,i={};return i[t.valueKey]=e,i[n]=e,i.className="Select-create-option-placeholder",i},gr=function(t){return'Create option "'+t+'"'},vr=function(t){switch(t.keyCode){case 9:case 13:case 188:return!0;default:return!1}};hr.isOptionUnique=dr,hr.isValidNewOption=fr,hr.newOptionCreator=mr,hr.promptTextCreator=gr,hr.shouldKeyDownEventCreateNewOption=vr,hr.defaultProps={filterOptions:Vo,isOptionUnique:dr,isValidNewOption:fr,menuRenderer:Wo,newOptionCreator:mr,promptTextCreator:gr,shouldKeyDownEventCreateNewOption:vr,showNewOptionAtTop:!0},hr.propTypes={children:b.a.func,filterOptions:b.a.any,isOptionUnique:b.a.func,isValidNewOption:b.a.func,menuRenderer:b.a.any,newOptionCreator:b.a.func,onInputChange:b.a.func,onInputKeyDown:b.a.func,onNewOptionClick:b.a.func,options:b.a.array,promptTextCreator:b.a.func,ref:b.a.func,shouldKeyDownEventCreateNewOption:b.a.func,showNewOptionAtTop:b.a.bool};var yr=function(t){function e(){return Uo(this,e),Xo(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Ko(e,t),Yo(e,[{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var t=this;return y.a.createElement(cr,this.props,(function(e){var n=e.ref,i=Qo(e,["ref"]),o=n;return y.a.createElement(hr,i,(function(e){var n=e.ref,i=Qo(e,["ref"]),r=n;return t.props.children(qo({},i,{ref:function(e){r(e),o(e),t.select=e}}))}))}))}}]),e}(y.a.Component);yr.propTypes={children:b.a.func.isRequired},yr.defaultProps={children:function(t){return y.a.createElement(ar,t)}},ar.Async=cr,ar.AsyncCreatable=yr,ar.Creatable=hr,ar.Value=Jo,ar.Option=$o;var _r,br,wr,xr=ar;function Mr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Er(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Lr=Object(w.b)((function(t){return{colorBy:t.controls.colorBy,geneLength:t.controls.geneLength,colorings:t.metadata.colorings,geneMap:t.entropy.geneMap}}))((wr=br=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Er()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),e=n.call(this,t),g()(l()(e),"dispatchColorByGenotype",Object(ho.debounce)((function(t){e.dispatchColorBy(t,"genotype")}),400)),e.BLANK_STATE={colorBySelected:"",geneSelected:"",positionSelected:""},e.state=e.newState({colorBySelected:t.colorBy}),e}return a()(i,[{key:"replaceState",value:function(t){var e=this;this.setState((function(n,i){return e.newState(t)}))}},{key:"newState",value:function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mr(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.BLANK_STATE,{},t)}},{key:"componentWillReceiveProps",value:function(t){if(this.props.colorBy!==t.colorBy)if(Object(lt.d)(t.colorBy)){var e=Object(lt.a)(t.colorBy);e&&this.replaceState({colorBySelected:"gt",geneSelected:e.gene,positionSelected:e.positions.join(",")})}else this.replaceState({colorBySelected:t.colorBy})}},{key:"componentDidUpdate",value:function(){var t=this.state.colorBySelected;if("gt"===t){var e=this.state,n=e.geneSelected,i=e.positionSelected;if(n&&i){var o=Object(lt.c)({gene:n,positions:Object(lt.b)(i,this.props.geneLength[n])});o&&this.dispatchColorByGenotype(o)}}else this.dispatchColorBy(t)}},{key:"dispatchColorBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;Object(Pi.a)("color-by-".concat(e)),this.props.dispatch(Object(We.a)(t))}},{key:"getGtGeneOptions",value:function(){var t=[];return this.props.geneMap&&((t=Object.keys(this.props.geneMap).map((function(t){return{value:t,label:t}})))[t.length]={value:O.I,label:"nucleotide"}),t}},{key:"gtGeneSelect",value:function(){var t=this,e=this.getGtGeneOptions();return y.a.createElement(xr,{name:"selectGenotype",id:"selectGenotype",placeholder:"gene…",value:this.state.geneSelected,options:e,clearable:!1,searchable:!0,multi:!1,onChange:function(e){t.setState({geneSelected:e.value})}})}},{key:"gtPositionInput",value:function(){var t=this,e=this.state.geneSelected,n=Math.floor(this.props.geneLength[e]),i=e?"".concat(e," position (1–").concat(n,")…"):"position…";return y.a.createElement("input",{type:"text",style:M.k,placeholder:i,value:this.state.positionSelected,onChange:function(e){t.setState({positionSelected:e.target.value})}})}},{key:"isNormalInteger",value:function(t){var e=Math.floor(Number(t));return String(e)===t&&e>=0}},{key:"getStyles",value:function(){return{base:{width:O.l,marginBottom:0,fontSize:14}}}},{key:"render",value:function(){var t=this,e=this.getStyles(),n=Object.keys(this.props.colorings).map((function(e){return{value:e,label:t.props.colorings[e].title}}));return y.a.createElement("div",{style:e.base},y.a.createElement(xr,{name:"selectColorBy",id:"selectColorBy",value:this.state.colorBySelected,options:n,clearable:!1,searchable:!1,multi:!1,onChange:function(e){t.replaceState({colorBySelected:e.value})}}),"gt"===this.state.colorBySelected?y.a.createElement("div",null,this.gtGeneSelect(),this.gtPositionInput()):null)}}]),i}(y.a.Component),g()(br,"propTypes",{colorBy:b.a.string.isRequired,geneLength:b.a.object.isRequired,colorings:b.a.object.isRequired,dispatch:b.a.func.isRequired}),_r=wr))||_r,Tr=n(714),kr=n.n(Tr),Sr=n(718),Cr=n.n(Sr),jr=n(528),Or=n.n(jr);function Ar(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pr={base:{position:"relative",borderRadius:6},horizontalSlider:{width:"100%",height:12},verticalSlider:{maxHeight:500,width:12,border:"1px solid grey"},handle:{fontSize:"0.9em",textAlign:"center",backgroundColor:"#FAFAFA",color:"white",border:"1px solid #555",cursor:"pointer",height:12,width:12,borderRadius:12,top:-4},bar:{position:"relative",backgroundColor:"rgb(200,200,200)",borderRadius:2},unselectedBar:{backgroundColor:"#777",height:1,top:2},selectedBar:{backgroundColor:"#CCC",height:6}};function Nr(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1}function Ir(t){return null==t?[]:Array.isArray(t)?t:[t]}function zr(t){return null!=t&&1===t.length?t[0]:t}var Rr,Br=kr()({displayName:"Slider",propTypes:{min:b.a.number,max:b.a.number,step:b.a.number,minDistance:b.a.number,defaultValue:b.a.oneOfType([b.a.number,b.a.arrayOf(b.a.number)]),value:b.a.oneOfType([b.a.number,b.a.arrayOf(b.a.number)]),orientation:b.a.oneOf(["horizontal","vertical"]),className:b.a.string,handleClassName:b.a.string,handleActiveClassName:b.a.string,withBars:b.a.bool,barClassName:b.a.string,pearling:b.a.bool,disabled:b.a.bool,snapDragDisabled:b.a.bool,invert:b.a.bool,onBeforeChange:b.a.func,onChange:b.a.func,onAfterChange:b.a.func,onSliderClick:b.a.func},getDefaultProps:function(){return{min:0,max:100,step:1e-5,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",handleClassName:"handle",handleActiveClassName:"active",barClassName:"bar",withBars:!1,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1}},getInitialState:function(){var t=this._or(Ir(this.props.value),Ir(this.props.defaultValue));this.tempArray=t.slice();for(var e=[],n=0;n<t.length;n++)t[n]=this._trimAlignValue(t[n],this.props),e.push(n);return{index:-1,upperBound:208,sliderLength:220,handleSize:12,sliderStart:20,value:t,zIndices:e}},componentWillReceiveProps:function(t){var e=this._or(Ir(t.value),this.state.value);this.tempArray=e.slice();for(var n=[],i=0;i<e.length;i++)n[i]=this._trimAlignValue(e[i],t);this.setState({value:n})},_or:function(t,e){var n=y.a.Children.count(this.props.children);switch(n){case 0:return t.length>0?t:e;case t.length:return t;case e.length:return e;default:return t.length===n&&e.length===n||console.warn(this.constructor.displayName+": Number of values does not match number of children."),function(t,e,n){for(var i=(e-t)/(n-1),o=[],r=0;r<n;r++)o.push(t+i*r);return o}(this.props.min,this.props.max,n)}},getValue:function(){return zr(this.state.value)},_calcOffset:function(t){return(t-this.props.min)/(this.props.max-this.props.min)*this.state.upperBound},_calcValue:function(t){return t/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},_buildHandleStyle:function(t,e){var n={position:"absolute",willChange:this.state.index>=0?this._posMinKey():""};return n[this._posMinKey()]=t+"px",n},_getClosestIndex:function(t){for(var e=Number.MAX_VALUE,n=-1,i=this.state.value,o=i.length,r=0;r<o;r++){var a=this._calcOffset(i[r]),s=Math.abs(t-a);s<e&&(e=s,n=r)}return n},_calcOffsetFromPosition:function(t){var e=t-this.state.sliderStart;return this.props.invert&&(e=this.state.sliderLength-e),e-=this.state.handleSize/2},_forceValueFromPosition:function(t,e){var n=this._calcOffsetFromPosition(t),i=this._getClosestIndex(n),o=this._trimAlignValue(this._calcValue(n)),r=this.state.value.slice();r[i]=o;for(var a=0;a<r.length-1;a+=1)if(r[a+1]-r[a]<this.props.minDistance)return;this.setState({value:r},e.bind(this,i))},_getMousePosition:function(t){return[t["page"+this._axisKey()],t["page"+this._orthogonalAxisKey()]]},_getTouchPosition:function(t){var e=t.touches[0];return[e["page"+this._axisKey()],e["page"+this._orthogonalAxisKey()]]},_getMouseEventMap:function(){return{mousemove:this._onMouseMove,mouseup:this._onMouseUp}},_getTouchEventMap:function(){return{touchmove:this._onTouchMove,touchend:this._onTouchEnd}},_createOnMouseDown:function(t){return function(e){if(!this.props.disabled){var n=this._getMousePosition(e);this._start(t,n[0]),this._addHandlers(this._getMouseEventMap()),Nr(e)}}.bind(this)},_createOnTouchStart:function(t){return function(e){if(!(this.props.disabled||e.touches.length>1)){var n=this._getTouchPosition(e);this.startPosition=n,this.isScrolling=void 0,this._start(t,n[0]),this._addHandlers(this._getTouchEventMap()),function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}(e)}}.bind(this)},_addHandlers:function(t){for(var e in t)document.addEventListener(e,t[e],!1)},_removeHandlers:function(t){for(var e in t)document.removeEventListener(e,t[e],!1)},_start:function(t,e){document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),this.hasMoved=!1,this._fireChangeEvent("onBeforeChange");var n=this.state.zIndices;n.splice(n.indexOf(t),1),n.push(t),this.setState({startValue:this.state.value[t],startPosition:e,index:t,zIndices:n})},_onMouseUp:function(){this._onEnd(this._getMouseEventMap())},_onTouchEnd:function(){this._onEnd(this._getTouchEventMap())},_onEnd:function(t){this._removeHandlers(t),this.setState({index:-1},this._fireChangeEvent.bind(this,"onAfterChange"))},_onMouseMove:function(t){var e=this._getMousePosition(t);this._move(e[0])},_onTouchMove:function(t){if(!(t.touches.length>1)){var e=this._getTouchPosition(t);if(void 0===this.isScrolling){var n=e[0]-this.startPosition[0],i=e[1]-this.startPosition[1];this.isScrolling=Math.abs(i)>Math.abs(n)}this.isScrolling?this.setState({index:-1}):(Nr(t),this._move(e[0]))}},_move:function(t){this.hasMoved=!0;var e=this.props,n=this.state,i=n.index,o=n.value,r=o.length,a=o[i],s=t-n.startPosition;e.invert&&(s*=-1);var l=s/(n.sliderLength-n.handleSize)*(e.max-e.min),u=this._trimAlignValue(n.startValue+l),c=e.minDistance;if(!e.pearling){if(i>0){var h=o[i-1];u<h+c&&(u=h+c)}if(i<r-1){var p=o[i+1];u>p-c&&(u=p-c)}}o[i]=u,e.pearling&&r>1&&(u>a?(this._pushSucceeding(o,c,i),this._trimSucceeding(r,o,c,e.max)):u<a&&(this._pushPreceding(o,c,i),this._trimPreceding(r,o,c,e.min))),u!==a&&this.setState({value:o},this._fireChangeEvent.bind(this,"onChange"))},_pushSucceeding:function(t,e,n){var i,o;for(o=t[i=n]+e;null!=t[i+1]&&o>t[i+1];o=t[++i]+e)t[i+1]=this._alignValue(o)},_trimSucceeding:function(t,e,n,i){for(var o=0;o<t;o++){var r=i-o*n;e[t-1-o]>r&&(e[t-1-o]=r)}},_pushPreceding:function(t,e,n){var i,o;for(o=t[i=n]-e;null!=t[i-1]&&o<t[i-1];o=t[--i]-e)t[i-1]=this._alignValue(o)},_trimPreceding:function(t,e,n,i){for(var o=0;o<t;o++){var r=i+o*n;e[o]<r&&(e[o]=r)}},_axisKey:function(){var t=this.props.orientation;return"horizontal"===t?"X":"vertical"===t?"Y":"X"},_orthogonalAxisKey:function(){var t=this.props.orientation;return"horizontal"===t?"Y":"vertical"===t?"X":"Y"},_posMinKey:function(){var t=this.props.orientation;return"horizontal"===t?this.props.invert?"right":"left":"vertical"===t?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},_posMaxKey:function(){var t=this.props.orientation;return"horizontal"===t?this.props.invert?"left":"right":"vertical"===t?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},_sizeKey:function(){var t=this.props.orientation;return"horizontal"===t?"clientWidth":"vertical"===t?"clientHeight":"clientWidth"},_trimAlignValue:function(t,e){return this._alignValue(this._trimValue(t,e),e)},_trimValue:function(t,e){return t<=(e=e||this.props).min&&(t=e.min),t>=e.max&&(t=e.max),t},_alignValue:function(t,e){var n=(t-(e=e||this.props).min)%e.step,i=t-n;return 2*Math.abs(n)>=e.step&&(i+=n>0?e.step:-e.step),parseFloat(i.toFixed(5))},_renderHandle:function(t,e){var n=this.props.handleClassName+" "+this.props.handleClassName+"-"+e+" "+(this.state.index===e?this.props.handleActiveClassName:"");return y.a.createElement("div",{ref:"handle"+e,key:"handle"+e,className:n,style:Dr({},Pr.handle,{},t),onMouseDown:this._createOnMouseDown(e),onTouchStart:this._createOnTouchStart(e)})},_renderHandles:function(t){for(var e=t.length,n=this.tempArray,i=0;i<e;i++)n[i]=this._buildHandleStyle(t[i],i);for(var o=this.tempArray,r=0;r<e;r++)o[r]=this._renderHandle(n[r],r);return o},_buildBarStyle:function(t,e){var n={position:"absolute",willChange:this.state.index>=0?this._posMinKey()+","+this._posMaxKey():""};return n[this._posMinKey()]=t,n[this._posMaxKey()]=e,n},_renderBar:function(t,e,n){var i=this.props.barClassName+" "+this.props.barClassName+"-"+t,o=this._buildBarStyle(e,this.state.upperBound-n);return o=0===t&&!Or()(this.props.defaultValue)||1===t&&Or()(this.props.defaultValue)?Cr()({},o,Pr.selectedBar):Cr()({},o,Pr.unselectedBar),y.a.createElement("div",{key:"bar"+t,ref:"bar"+t,className:i,style:Dr({},Pr.bar,{},o)})},_renderBars:function(t){var e=[],n=t.length-1;e.push(this._renderBar(0,0,t[0]));for(var i=0;i<n;i++)e.push(this._renderBar(i+1,t[i],t[i+1]));return e.push(this._renderBar(n+1,t[n],this.state.upperBound)),e},_onSliderMouseDown:function(t){var e=this;if(!this.props.disabled){if(this.hasMoved=!1,!this.props.snapDragDisabled){var n=this._getMousePosition(t);this._forceValueFromPosition(n[0],(function(t){e._fireChangeEvent("onChange"),e._start(t,n[0]),e._addHandlers(e._getMouseEventMap())}))}Nr(t)}},_onSliderClick:function(t){if(!this.props.disabled&&this.props.onSliderClick&&!this.hasMoved){var e=this._getMousePosition(t),n=this._trimAlignValue(this._calcValue(this._calcOffsetFromPosition(e[0])));this.props.onSliderClick(n)}},_fireChangeEvent:function(t){this.props[t]&&this.props[t](zr(this.state.value))},render:function(){for(var t=this.tempArray,e=this.state.value,n=this.state.value.length,i=0;i<n;i++)t[i]=this._calcOffset(e[i],i);var o="vertical"===this.props.orientation?Pr.verticalSlider:Pr.horizontalSlider;return y.a.createElement("div",{ref:"slider",style:Dr({},Pr.base,{},o),onMouseDown:this._onSliderMouseDown,onClick:this._onSliderClick},this.props.withBars?this._renderBars(t):null,this._renderHandles(t))}});function Fr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Vr,Wr=x.c.div.withConfig({displayName:"date-range-inputs__DateLabel",componentId:"sc-1amycy9-0"})(["font-family:",";margin-bottom:5px;font-size:12px;font-weight:400;color:",";float:",";"],(function(t){return t.theme["font-family"]}),(function(t){return t.theme.color}),(function(t){return t.right?"right":"left"})),Zr=Object(w.b)((function(t){return{branchLengthsToDisplay:t.controls.branchLengthsToDisplay,dateMin:t.controls.dateMin,dateMax:t.controls.dateMax,dateMinNumeric:t.controls.dateMinNumeric,dateMaxNumeric:t.controls.dateMaxNumeric,absoluteDateMin:t.controls.absoluteDateMin,absoluteDateMax:t.controls.absoluteDateMax,absoluteDateMinNumeric:t.controls.absoluteDateMinNumeric,absoluteDateMaxNumeric:t.controls.absoluteDateMaxNumeric}}))(Rr=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Fr()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),(e=n.call(this,t)).state={lastSliderUpdateTime:Date.now()},e.updateFromSliderNotDebounced=e.updateFromSlider.bind(l()(e),!1),e.updateFromSliderDebounced=e.updateFromSlider.bind(l()(e),!0),e}return a()(i,[{key:"maybeClearMapAnimationInterval",value:function(){window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference&&(clearInterval(window.NEXTSTRAIN.animationTickReference),window.NEXTSTRAIN.animationTickReference=null,this.props.dispatch({type:R.C,data:"Play"}))}},{key:"updateFromSlider",value:function(t,e){if(this.maybeClearMapAnimationInterval(),t){var n=Date.now();if(n<this.state.lastSliderUpdateTime+100)return null;this.setState({lastSliderUpdateTime:n})}var i={min:Object(j.d)(e[0]),max:Object(j.d)(e[1])};return this.props.dateMin!==i.min&&this.props.dateMax===i.max?this.props.dispatch(Object(S.c)({newMin:i.min,quickdraw:t})):this.props.dateMin===i.min&&this.props.dateMax!==i.max?this.props.dispatch(Object(S.c)({newMax:i.max,quickdraw:t})):this.props.dateMin!==i.min&&this.props.dateMax!==i.max?this.props.dispatch(Object(S.c)({newMin:i.min,newMax:i.max,quickdraw:t})):!1===t&&this.props.dispatch(Object(S.c)({quickdraw:t})),null}},{key:"render",value:function(){return"divOnly"===this.props.branchLengthsToDisplay?null:y.a.createElement("div",null,y.a.createElement("div",{style:{width:O.l}},y.a.createElement(Br,{min:this.props.absoluteDateMinNumeric,max:this.props.absoluteDateMaxNumeric,defaultValue:[this.props.absoluteDateMinNumeric,this.props.absoluteDateMaxNumeric],value:[this.props.dateMinNumeric,this.props.dateMaxNumeric],onChange:this.updateFromSliderDebounced,onAfterChange:this.updateFromSliderNotDebounced,minDistance:O.D*(this.props.absoluteDateMaxNumeric-this.props.absoluteDateMinNumeric),pearling:!0,withBars:!0})),y.a.createElement("div",{style:{height:5}}),y.a.createElement("div",{style:{width:O.l}},y.a.createElement(Wr,null,this.props.dateMin),y.a.createElement(Wr,{right:!0},this.props.dateMax)))}}]),i}(y.a.Component))||Rr,Hr=x.c.div.withConfig({displayName:"styles__ControlsContainer",componentId:"sc-3vqs3j-0"})(["display:flex;flex-direction:column;align-content:stretch;flex-wrap:nowrap;height:100%;order:0;flex-grow:0;flex-shrink:1;flex-basis:auto;align-self:auto;padding:0px 20px 20px 20px;"]),Ur=x.c.span.withConfig({displayName:"styles__SidebarHeader",componentId:"sc-3vqs3j-1"})(["font-family:",";font-size:16px;line-height:28px;margin-top:15px;margin-bottom:5px;font-weight:500;color:",";"],(function(t){return t.theme["font-family"]}),(function(t){return t.theme.color})),Yr=x.c.button.withConfig({displayName:"styles__SidebarButton",componentId:"sc-3vqs3j-2"})(["border:0px;background-color:inherit;margin:5px 0px 10px 5px;border-radius:2px;cursor:pointer;padding:2px;font-family:",";color:",";font-weight:400;text-transform:uppercase;font-size:14px;vertical-align:top;outline:0;"],(function(t){return t.theme["font-family"]}),(function(t){return t.selected?t.theme.selectedColor:t.theme.unselectedColor})),Gr=x.c.div.withConfig({displayName:"styles__SidebarSubtitle",componentId:"sc-3vqs3j-3"})(["font-family:",";margin:","px 0px 5px 0px;font-size:12px;font-weight:400;color:",";"],(function(t){return t.theme["font-family"]}),(function(t){return t.spaceAbove?"5":"0"}),(function(t){return t.theme.color}));function qr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Kr,Qr,Xr,$r=Object(w.b)((function(t){return{selected:t.controls.selectedBranchLabel,available:t.tree.availableBranchLabels}}))(Vr=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(qr()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),(e=n.call(this,t)).change=function(t){e.props.dispatch({type:R.m,value:t.value})},e}return a()(i,[{key:"render",value:function(){var t=this.props.t;return y.a.createElement("div",{style:{paddingTop:5}},y.a.createElement(Gr,null,t("sidebar:Branch Labels")),y.a.createElement("div",{style:{width:O.l,fontSize:14}},y.a.createElement(xr,{value:this.props.selected,options:this.props.available.map((function(t){return{value:t,label:t}})),clearable:!1,searchable:!1,multi:!1,onChange:this.change})))}}]),i}(y.a.Component))||Vr,Jr=Object(T.c)()($r);function ta(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ea=Object(x.d)(Oe),na=Object(x.d)((function(t){var e=t.theme,n=t.selected,i=t.width,o=n?e.selectedColor:e.unselectedColor;return y.a.createElement("svg",{width:i,height:i+5},y.a.createElement("g",{transform:"translate(0,0)"},y.a.createElement("svg",{width:i,height:i,viewBox:"14 14 25 26"},y.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(15.000000, 15.000000)"},y.a.createElement("path",{d:"M15,15 L17.6450195,15",id:"Path-12",stroke:o}),y.a.createElement("path",{d:"M15.229248,22.5795898 L15.229248,18.2854004 C15.229248,18.2854004 17.8465223,17.6291504 17.8508301,15.0574951 C17.8551378,12.4858398 15.2944336,11.9138184 15.2944336,11.9138184 L15.229248,7.53540039",id:"Path-13",stroke:o}),y.a.createElement("path",{d:"M7.63037109,6.10498047 L10.230957,9.08325195 C10.230957,9.08325195 12.25,7.08233714 15.126709,7.04162598 C18.003418,7.00091481 20.5390625,8.91748047 20.5390625,8.91748047 L22.9765625,5.60839844",id:"Path-14",stroke:o}),y.a.createElement("path",{d:"M0.15942005,4.99135298 L2.76065146,7.96962446 C2.76065146,7.96962446 4.78019556,5.96870965 7.65761856,5.92799848 C10.5350415,5.88728732 13.0713154,7.80385298 13.0713154,7.80385298 L15.5094204,4.49477094",id:"Path-14",stroke:o,transform:"translate(7.834420, 6.232198) rotate(-34.000000) translate(-7.834420, -6.232198) "}),y.a.createElement("path",{d:"M7.5,21.496582 L10.1005859,24.4748535 C10.1005859,24.4748535 12.1196289,22.4739387 14.9963379,22.4332275 C17.8730469,22.3925164 20.4086914,24.309082 20.4086914,24.309082 L22.8461914,21",id:"Path-14",stroke:o,transform:"translate(15.173096, 22.737427) scale(1, -1) translate(-15.173096, -22.737427) "})))))})),ia=Object(x.d)((function(t){var e=t.theme,n=t.selected,i=t.width,o=n?e.selectedColor:e.unselectedColor;return y.a.createElement("svg",{width:i,height:i+5},y.a.createElement("g",{transform:"translate(0,2)"},y.a.createElement("svg",{width:i,height:i,viewBox:"106 49 150 118"},y.a.createElement("polyline",{id:"Path-2",stroke:o,strokeWidth:"4",fill:"none",points:"108 77 125.182237 87.8599894 133.381156 119.402591 111.867082 144.368016"}),y.a.createElement("path",{d:"M125.2,87.5 L137.624777,70",id:"Path-3",stroke:o,strokeWidth:"4",fill:"none"}),y.a.createElement("polyline",{id:"Path-4",stroke:o,strokeWidth:"4",fill:"none",points:"133 119.331781 192.127357 119.400002 215.445998 80.3916603 203.946476 51.4000015"}),y.a.createElement("path",{d:"M215.5,80.5 L253.378522,73",id:"Path-5",stroke:o,strokeWidth:"4",fill:"none"}),y.a.createElement("path",{d:"M192,119.2 L229.854937,164.55391",id:"Path-6",stroke:o,strokeWidth:"4",fill:"none"}))))})),oa=Object(x.d)((function(t){var e=t.theme,n=t.selected,i=t.width,o=n?e.selectedColor:e.unselectedColor;return y.a.createElement("svg",{width:i,height:i+5},y.a.createElement("g",{transform:"translate(0,4)"},y.a.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},y.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)"},y.a.createElement("polyline",{id:"Path-3",stroke:o,points:"-15 5 -15 -25 "}),y.a.createElement("polyline",{id:"Path-4",stroke:o,points:"-15 5 25 5"}),y.a.createElement("polyline",{id:"Path-5",stroke:o,points:"-12 3 20 -25 "}),y.a.createElement("circle",{id:"c-1",stroke:o,cx:"-8",cy:"0",r:"2"}),y.a.createElement("circle",{id:"c-2",stroke:o,cx:"4",cy:"-10",r:"2"}),y.a.createElement("circle",{id:"c-3",stroke:o,cx:"4",cy:"-15",r:"2"}),y.a.createElement("circle",{id:"c-4",stroke:o,cx:"-4",cy:"-5",r:"2"}),y.a.createElement("circle",{id:"c-5",stroke:o,cx:"-2",cy:"-11",r:"2"})))))})),ra=x.c.div.withConfig({displayName:"choose-layout__RowContainer",componentId:"sc-16x4jtt-0"})(["padding:0px 5px 1px 5px;"]),aa=Object(w.b)((function(t){return{layout:t.controls.layout,showTreeToo:t.controls.showTreeToo,branchLengthsToDisplay:t.controls.branchLengthsToDisplay}}))((Xr=Qr=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(ta()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"render",value:function(){var t=this,e=this.props.t;if(this.props.showTreeToo)return null;var n=this.props.layout,i=window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference;return y.a.createElement("div",{style:{marginBottom:15}},y.a.createElement(Gr,null,e("sidebar:Layout")),y.a.createElement(ra,null,y.a.createElement(ea,{width:25,selected:"rect"===n}),y.a.createElement(Yr,{selected:"rect"===n,onClick:function(){i||(Object(Pi.a)("change-layout-rectangular"),t.props.dispatch({type:R.r,data:"rect"}))}},e("sidebar:rectangular"))),y.a.createElement(ra,null,y.a.createElement(na,{width:25,selected:"radial"===n}),y.a.createElement(Yr,{selected:"radial"===n,onClick:function(){i||(Object(Pi.a)("change-layout-radial"),t.props.dispatch({type:R.r,data:"radial"}))}},e("sidebar:radial"))),y.a.createElement(ra,null,y.a.createElement(ia,{width:25,selected:"unrooted"===n}),y.a.createElement(Yr,{selected:"unrooted"===n,onClick:function(){i||(Object(Pi.a)("change-layout-unrooted"),t.props.dispatch({type:R.r,data:"unrooted"}))}},e("sidebar:unrooted"))),"divAndDate"===this.props.branchLengthsToDisplay?y.a.createElement(ra,null,y.a.createElement(oa,{width:25,selected:"clock"===n}),y.a.createElement(Yr,{selected:"clock"===n,onClick:function(){i||(Object(Pi.a)("change-layout-clock"),t.props.dispatch({type:R.r,data:"clock"}))}},e("sidebar:clock"))):null)}}]),i}(y.a.Component),g()(Qr,"propTypes",{layout:b.a.string.isRequired,dispatch:b.a.func.isRequired}),Kr=Xr))||Kr,sa=Object(T.c)()(aa);function la(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ua,ca=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(la()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"createDataPath",value:function(t){var e=this.props.choice_tree.length>0?"/":"";return e=(e+=this.props.choice_tree.join("/")+"/"+t).replace(/\/+/,"/")}},{key:"changeDataset",value:function(t){Object(Pi.a)("change-virus-to-".concat(t.replace(/\//g,""))),window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference&&(clearInterval(window.NEXTSTRAIN.animationTickReference),window.NEXTSTRAIN.animationTickReference=null,this.props.dispatch({type:R.C,data:"Play"})),this.props.dispatch(Object(To.b)({path:t}))}},{key:"getDatasetOptions",value:function(){return this.props.options?this.props.options.map((function(t){return{value:t,label:t}})):{}}},{key:"render",value:function(){var t=this,e=this.getDatasetOptions();return y.a.createElement("div",{style:{width:O.l,fontSize:14}},y.a.createElement(xr,{value:this.props.selected,options:e,clearable:!1,searchable:!1,multi:!1,onChange:function(e){t.changeDataset(t.createDataPath(e.value))}}))}}]),i}(y.a.Component);function ha(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var pa,da=Object(w.b)((function(t){return{available:t.controls.available}}))(ua=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(ha()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"render",value:function(){var t=this,e=this.props.t;if(!this.props.available||!this.props.available.datasets||!this.props.available.datasets.length)return null;var n=window.location.pathname.replace(/^\//,"").replace(/\/$/,"").split(":")[0].split("/"),i=[[]];this.props.available.datasets.forEach((function(t){var e=t.request.split("/")[0];i[0].includes(e)||i[0].push(e)}));for(var o=function(e){i[e]=[],t.props.available.datasets.forEach((function(t){var o,r,a=t.request.split("/");o=n,r=e,a.slice(0,r).every((function(t,e){return t===o[e]}))&&-1===i[e].indexOf(a[e])&&i[e].push(a[e])}))},r=1;r<n.length;r++)o(r);return y.a.createElement(y.a.Fragment,null,y.a.createElement(Ur,null,e("sidebar:Dataset")),i.map((function(e,i){return y.a.createElement(ca,{key:e,dispatch:t.props.dispatch,choice_tree:n.slice(0,i),selected:n[i],options:e})})))}}]),i}(y.a.Component))||ua,fa=Object(T.c)()(da),ma=n(210);function ga(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var va,ya=Object(w.b)((function(t){return{available:t.controls.available,treeName:t.tree.name,showTreeToo:t.controls.showTreeToo}}))(pa=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(ga()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"render",value:function(){var t=this,e=this.props.t;if(!this.props.available||!this.props.available.datasets)return null;var n=window.location.pathname.replace(/^\//,"").replace(/\/$/,"").split(":")[0],i=[];return this.props.available.datasets.filter((function(t){return t.request===n&&(i=D()(t.secondTreeOptions)),null})),this.props.showTreeToo&&i.unshift("REMOVE"),y.a.createElement("div",null,y.a.createElement(Gr,{spaceAbove:!0},e("sidebar:Second Tree")),y.a.createElement("div",{key:"treetooselect",style:{width:O.l,fontSize:14}},y.a.createElement(xr,{name:"selectTreeToo",id:"selectTreeToo",value:this.props.showTreeToo,options:i.map((function(t){return{value:t,label:t}})),clearable:!1,searchable:!1,multi:!1,onChange:function(e){"REMOVE"===e.value?t.props.dispatch({type:R.J}):t.props.dispatch(Object(ma.b)(e.value,n))}})))}}]),i}(y.a.Component))||pa,_a=Object(T.c)()(ya),ba=x.c.label.withConfig({displayName:"toggle__ToggleBackground",componentId:"sc-1r21f6e-0"})(["position:relative;display:inline-block;width:35px;height:21px;input{display:none;}input:checked{background-color:",";}"],(function(t){return t.theme.unselectedColor})),wa=Object(x.c)(Gr).withConfig({displayName:"toggle__ToggleSubtitle",componentId:"sc-1r21f6e-1"})(["margin-left:40px;margin-top:4px;width:200px;"]),xa=x.c.div.withConfig({displayName:"toggle__Slider",componentId:"sc-1r21f6e-2"})(["&{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:",';-webkit-transition:.4s;transition:.4s;border-radius:12px;}&:before{position:absolute;content:"";height:15px;width:15px;left:4px;bottom:3px;background-color:#FFF;-webkit-transition:.4s;transition:.4s;border-radius:50%;}input:checked + &:before{-webkit-transform:translateX(13px);-ms-transform:translateX(13px);transform:translateX(13px);}'],(function(t){return t.theme.unselectedBackground})),Ma=x.c.input.withConfig({displayName:"toggle__Input",componentId:"sc-1r21f6e-3"})(['&{margin-left:"40px"}&:checked + ',"{background-color:",";}&:focus{box-shadow:0 0 1px #2196F3;}"],xa,(function(t){return t.theme.selectedColor})),Ea=function(t){var e=t.display,n=t.on,i=t.callback,o=t.label,r=t.style,a=void 0===r?{}:r;return e?y.a.createElement("div",{style:a},y.a.createElement(ba,null,y.a.createElement(Ma,{type:"checkbox",checked:n,onChange:i}),y.a.createElement(xa,null),""===o?null:y.a.createElement(wa,null,o))):null};function La(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ta,ka=Object(w.b)((function(t){return{distanceMeasure:t.controls.distanceMeasure,showTreeToo:t.controls.showTreeToo,branchLengthsToDisplay:t.controls.branchLengthsToDisplay,temporalConfidence:t.controls.temporalConfidence}}))(va=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(La()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"render",value:function(){var t=this,e=this.props.t;return"divAndDate"!==this.props.branchLengthsToDisplay?null:y.a.createElement("div",{style:{marginBottom:0}},y.a.createElement(Gr,null,e("sidebar:Branch Length")),y.a.createElement(Yr,{selected:"num_date"===this.props.distanceMeasure,onClick:function(){Object(Pi.a)("tree-metric-temporal"),t.props.dispatch({type:R.o,data:"num_date"})}},e("sidebar:time")),y.a.createElement("span",{style:{paddingRight:"12px"}}),y.a.createElement(Yr,{selected:"div"===this.props.distanceMeasure,onClick:function(){Object(Pi.a)("tree-metric-temporal"),t.props.dispatch({type:R.o,data:"div"})}},e("sidebar:divergence")),this.props.showTreeToo?null:y.a.createElement("div",{style:{margin:5}},y.a.createElement(Ea,{display:this.props.temporalConfidence.display,on:this.props.temporalConfidence.on,callback:function(){return t.props.dispatch(Object(S.d)())},label:e("sidebar:Show confidence intervals")})))}}]),i}(y.a.Component))||va,Sa=Object(T.c)()(ka);function Ca(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ja,Oa=x.c.span.withConfig({displayName:"panel-layout__ButtonText",componentId:"sc-12zrah-0"})(["margin:5px;position:relative;top:-1px;"]),Aa=Object(x.d)((function(t){var e=t.theme,n=t.selected,i=t.width,o=n?e.selectedColor:e.unselectedColor;return y.a.createElement("svg",{width:i,height:i+5},y.a.createElement("g",{transform:"translate(0,6)"},y.a.createElement("svg",{width:i,height:i,viewBox:"0 0 30 30 "},y.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},y.a.createElement("rect",{fill:"none",stroke:o,x:"1",y:"1",width:"7",height:"25"}),y.a.createElement("rect",{fill:"none",stroke:o,x:"8",y:"1",width:"20",height:"25"})))))})),Da=Object(x.d)(Ae),Pa=Object(w.b)((function(t){return{panelLayout:t.controls.panelLayout,canTogglePanelLayout:t.controls.canTogglePanelLayout}}))(Ta=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Ca()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"render",value:function(){var t=this,e=this.props.t;return this.props.canTogglePanelLayout?y.a.createElement("div",{style:{marginTop:0,marginBottom:10}},y.a.createElement(Aa,{width:22,selected:"full"===this.props.panelLayout}),y.a.createElement(Yr,{selected:"full"===this.props.panelLayout,onClick:function(){Object(Pi.a)("change-layout-full"),t.props.dispatch({type:R.s,data:"full"})}},y.a.createElement(Oa,null,e("sidebar:full"))),y.a.createElement(Da,{width:22,selected:"grid"===this.props.panelLayout}),y.a.createElement(Yr,{selected:"grid"===this.props.panelLayout,onClick:function(){Object(Pi.a)("change-layout-grid"),t.props.dispatch({type:R.s,data:"grid"})}},y.a.createElement(Oa,null,e("sidebar:grid")))):null}}]),i}(y.a.Component))||Ta,Na=Object(T.c)()(Pa);function Ia(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var za,Ra=Object(w.b)((function(t){return{metadata:t.metadata,geoResolution:t.controls.geoResolution}}))(ja=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Ia()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"getGeoResolutionOptions",value:function(){return this.props.metadata.loaded?this.props.metadata.geoResolutions.map((function(t){return{value:t.key,label:t.title||t.key}})):[]}},{key:"changeGeoResolution",value:function(t){Object(Pi.a)("change-geo-resolution"),this.props.dispatch({type:R.p,data:t})}},{key:"render",value:function(){var t=this,e=this.props.t,n=this.getGeoResolutionOptions();return y.a.createElement(y.a.Fragment,null,y.a.createElement(Gr,{spaceAbove:!0},e("sidebar:Geographic resolution")),y.a.createElement("div",{style:{marginBottom:10,width:O.l,fontSize:14}},y.a.createElement(xr,{name:"selectGeoResolution",id:"selectGeoResolution",value:this.props.geoResolution,options:n,clearable:!1,searchable:!1,multi:!1,onChange:function(e){t.changeGeoResolution(e.value)}})))}}]),i}(y.a.Component))||ja,Ba=Object(T.c)()(Ra);function Fa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Va,Wa=Object(w.b)((function(t){return{branchLengthsToDisplay:t.controls.branchLengthsToDisplay,mapAnimationStartDate:t.controls.mapAnimationStartDate,mapAnimationDurationInMilliseconds:t.controls.mapAnimationDurationInMilliseconds,mapAnimationCumulative:t.controls.mapAnimationCumulative,mapAnimationShouldLoop:t.controls.mapAnimationShouldLoop}}))(za=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Fa()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"handleChangeAnimationTimeClicked",value:function(t){var e=this;return function(){var n;window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference||(Object(Pi.a)("change-animation-time"),"slow"===t?n=6e4:"medium"===t?n=3e4:"fast"===t?n=15e3:console.warn("Odd... controls/map-animation.js tried to set an animation speed we don't offer..."),e.props.dispatch({type:R.l,data:n}))}}},{key:"render",value:function(){var t=this,e=this.props.t;return"divOnly"===this.props.branchLengthsToDisplay?null:y.a.createElement("div",{id:"mapAnimationControls"},y.a.createElement(Gr,{spaceAbove:!0},e("sidebar:Animation Speed")),y.a.createElement(Yr,{selected:6e4===this.props.mapAnimationDurationInMilliseconds,onClick:this.handleChangeAnimationTimeClicked("slow")},e("sidebar:Slow")),y.a.createElement(Yr,{selected:3e4===this.props.mapAnimationDurationInMilliseconds,onClick:this.handleChangeAnimationTimeClicked("medium")},e("sidebar:Medium")),y.a.createElement(Yr,{selected:15e3===this.props.mapAnimationDurationInMilliseconds,onClick:this.handleChangeAnimationTimeClicked("fast")},e("sidebar:Fast")),y.a.createElement("div",{style:{marginBottom:5}}),y.a.createElement(Ea,{display:!0,on:this.props.mapAnimationShouldLoop,callback:function(){t.props.dispatch({type:R.j,data:!t.props.mapAnimationShouldLoop})},label:e("sidebar:Loop animation")}),y.a.createElement("br",null),y.a.createElement(Ea,{display:!0,on:this.props.mapAnimationCumulative,callback:function(){Object(Pi.a)("change-animation-cumulative"),t.props.dispatch({type:R.i,data:!t.props.mapAnimationCumulative})},label:e("sidebar:Animate cumulative history")}))}}]),i}(y.a.Component))||za,Za=Object(T.c)()(Wa);function Ha(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ua,Ya=Object(w.b)((function(t){return{panelsAvailable:t.controls.panelsAvailable,panelsToDisplay:t.controls.panelsToDisplay,showTreeToo:t.controls.showTreeToo}}))(Va=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Ha()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"render",value:function(){var t=this,e=this.props.t,n=this.props.panelsAvailable.slice();return this.props.showTreeToo&&-1!==n.indexOf("map")&&n.splice(n.indexOf("map"),1),n.map((function(n){return y.a.createElement(Ea,{key:n,display:!0,on:-1!==t.props.panelsToDisplay.indexOf(n),callback:function(){return t.props.dispatch((e=n,function(t,n){var i,o=n().controls,r=o.panelsToDisplay.indexOf(e);-1===r?i=o.panelsAvailable.filter((function(t){return-1!==o.panelsToDisplay.indexOf(t)||t===e})):(i=o.panelsToDisplay.slice()).splice(r,1);var a=o.panelLayout;-1!==i.indexOf("tree")&&-1!==i.indexOf("map")||(a="full"),t({type:R.O,panelsToDisplay:i,panelLayout:a})}));var e},label:e("sidebar:Show "+n),style:{paddingBottom:"10px"}})}))}}]),i}(y.a.Component))||Va,Ga=Object(T.c)()(Ya),qa=n(728),Ka=n.n(qa);n(729);function Qa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Xa,$a=function(t){var e=t.onClick;return t.show?y.a.createElement("div",{className:"boxed-item-icon",style:{float:"right",height:"23px",width:"23px",borderTopRightRadius:"2px",borderBottomRightRadius:"2px",borderRightWidth:"1px",fontSize:18},onClick:e},"×"):null},Ja=x.c.div.withConfig({displayName:"search__Container",componentId:"sc-1t5klrg-0"})(["font-family:",";font-size:14px;display:inline-block;color:",";"],(function(t){return t.theme["font-family"]}),(function(t){return t.theme.color})),ts=x.c.div.withConfig({displayName:"search__InputContainer",componentId:"sc-1t5klrg-1"})(["width:","px;display:inline-block;"],O.l-10),es=x.c.input.withConfig({displayName:"search__Input",componentId:"sc-1t5klrg-2"})(["fontFamily:inherit;color:inherit;fontSize:inherit;width:100%;height:23px;padding-left:7px;border-radius:4px;border:1px solid #ccc;"]),ns=Object(w.b)((function(t){return{nodes:t.tree.nodes,version:t.tree.version,visibility:t.tree.visibility,selectedStrain:t.tree.selectedStrain}}))(Ua=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Qa()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){var t;return o()(this,i),(t=n.call(this)).state={awesomplete:void 0,show:!1},t.removeSelection=function(){t.ref.value=null,t.props.dispatch(Object(S.f)({tipSelected:{clear:!0}})),t.props.dispatch(Object(S.e)()),t.setState({show:!1})},t}return a()(i,[{key:"componentDidMount",value:function(){var t=this,e=new Ka.a(this.ref,{maxItems:1e3});this.ref.addEventListener("input",(function(e){var n=e.target.value.toLowerCase().trim();t.props.dispatch(Object(S.e)({searchNodes:n.length>1?n:""}))})),this.ref.addEventListener("awesomplete-selectcomplete",(function(e){for(var n=e.text.value,i=0;i<t.props.nodes.length;i++)if(t.props.nodes[i].name===n){t.props.dispatch(Object(S.f)({tipSelected:{treeIdx:t.props.nodes[i].arrayIdx}})),t.props.dispatch(Object(S.e)({tipSelectedIdx:t.props.nodes[i].arrayIdx}));break}t.setState({show:!0})})),this.setState({awesomplete:e})}},{key:"componentWillReceiveProps",value:function(t){this.props.selectedStrain&&!t.selectedStrain&&(this.ref.value=null,this.setState({show:!1}))}},{key:"updateVisibleStrains",value:function(){var t=this;this.state.awesomplete.list=this.props.nodes.filter((function(e){return!e.hasChildren&&t.props.visibility[e.arrayIdx]===O.b})).map((function(t){return t.name})),this.state.awesomplete.evaluate()}},{key:"render",value:function(){var t=this,e=this.props.t;return y.a.createElement(Ja,null,y.a.createElement(Gr,{spaceAbove:!0},e("sidebar:Search Strains")),y.a.createElement(ts,null,y.a.createElement(es,{ref:function(e){t.ref=e},onFocus:function(){return t.updateVisibleStrains()}})),y.a.createElement($a,{show:this.state.show,onClick:this.removeSelection}))}}]),i}(y.a.Component))||Ua,is=Object(T.c)()(ns);function os(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var rs,as=Object(w.b)((function(t){return{showTreeToo:t.controls.showTreeToo,showTangle:t.controls.showTangle}}))(Xa=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(os()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"render",value:function(){var t=this;return this.props.showTreeToo?y.a.createElement(Ea,{display:!0,on:this.props.showTangle,callback:function(){return t.props.dispatch({type:R.Q})},label:"Show Tanglegram",style:{paddingTop:"10px"}}):null}}]),i}(y.a.Component))||Xa,ss=n(212);function ls(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var us=Object(w.b)((function(t){return{metadata:t.metadata,language:t.general.language}}))(rs=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(ls()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(){return o()(this,i),n.apply(this,arguments)}return a()(i,[{key:"componentWillMount",value:function(){ss.a.changeLanguage(this.props.language)}},{key:"getlanguageOptions",value:function(){return[{value:"de",label:"Deutsch"},{value:"en",label:"English"},{value:"es",label:"Español"},{value:"ru",label:"Русский"},{value:"lt",label:"Lietuvių"},{value:"pt",label:"Português"},{value:"fr",label:"Français"},{value:"ja",label:"日本語"}]}},{key:"changeLanguage",value:function(t){Object(Pi.a)("change-language"),ss.a.changeLanguage(t),this.props.dispatch({type:R.q,data:t})}},{key:"render",value:function(){var t=this,e=this.props.t;return y.a.createElement(y.a.Fragment,null,y.a.createElement(Gr,{spaceAbove:!0},e("sidebar:Language")),y.a.createElement("div",{style:{paddingBottom:100,width:O.l,fontSize:14}},y.a.createElement(xr,{name:"selectLanguage",id:"selectLanguage",value:this.props.language,options:this.getlanguageOptions(),clearable:!1,searchable:!1,multi:!1,onChange:function(e){t.changeLanguage(e.value)}})))}}]),i}(y.a.Component))||rs,cs=Object(T.c)()(us);var hs=function(t){var e=t.mapOn,n=Object(T.b)().t;return y.a.createElement(Hr,null,y.a.createElement(fa,null),y.a.createElement(Ur,null,n("sidebar:Date Range")),y.a.createElement(Zr,null),y.a.createElement(Ur,null,n("sidebar:Color By")),y.a.createElement(Lr,null),y.a.createElement(Ur,null,n("sidebar:Tree Options")),y.a.createElement(sa,null),y.a.createElement(Sa,null),y.a.createElement(Jr,null),y.a.createElement(is,null),y.a.createElement(_a,null),y.a.createElement(as,null),e?y.a.createElement("span",{style:{marginTop:"15px"}},y.a.createElement(Ur,null,n("sidebar:Map Options")),y.a.createElement(Ba,null),y.a.createElement(Za,null)):null,y.a.createElement("span",{style:{paddingTop:"10px"}}),y.a.createElement(Ur,null,n("sidebar:Panel Options")),y.a.createElement(Na,null),y.a.createElement(Ga,null),y.a.createElement(cs,null))},ps=n(21);function ds(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var fs=x.c.div.withConfig({displayName:"styles__PanelsContainer",componentId:"sc-18umnzu-0"})(["position:absolute;top:0;bottom:0;right:0;transition:left 0.3s ease-out;background-color:#fff;height:",";width:",";overflow-x:hidden;overflow-y:scroll;left:",";"],(function(t){return t.height+"px"}),(function(t){return t.width+"px"}),(function(t){return t.left+"px"})),ms=x.c.div.withConfig({displayName:"styles__SidebarContainer",componentId:"sc-18umnzu-1"})(["position:absolute;top:0;bottom:0;right:0;transition:left 0.3s ease-out;left:",";background-color:",";height:",";width:",";max-width:",";overflow-y:auto;overflow-x:hidden;box-shadow:-3px 0px 3px -3px "," inset;font-family:",";"],(function(t){return t.left+"px"}),(function(t){return t.theme.background}),(function(t){return t.height+"px"}),(function(t){return t.width+"px"}),(function(t){return t.width+"px"}),(function(t){return t.theme.sidebarBoxShadow}),(function(t){return t.theme["font-family"]})),gs={};Object(ps.b)("sidebarTheme")&&(gs=Object(ps.a)("sidebarTheme"));var vs,ys=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ds(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{background:"#30353F",color:"#D3D3D3","font-family":"Lato, Helvetica Neue, Helvetica, sans-serif",sidebarBoxShadow:"rgba(255, 255, 255, 1)",selectedColor:"#5DA8A3",unselectedColor:"#BBB",unselectedBackground:"#888"},{},gs),_s=function(t){var e=t.sidebarOpen,n=t.width,i=t.height,o=t.displayNarrative,r=t.panelsToDisplay,a=t.narrativeTitle,s=t.mobileDisplay,l=t.navBarHandler;return y.a.createElement(x.a,{theme:ys},y.a.createElement(ms,{left:e?0:-1*n,width:n,height:i},y.a.createElement(Oo.a,{sidebar:!0,mobileDisplay:s,toggleHandler:l,narrativeTitle:!!o&&a,width:n}),o?y.a.createElement(jo,{height:i-O.F,width:n}):y.a.createElement(hs,{mapOn:r.includes("map")})))},bs=function(t,e,n,i){var o,r=t.width,a=t.height,s=(o=r,e?o>1500?500:o>1e3?400:310:O.l+O.k),l=n?s:0;return i||(r-=l),{overlayStyles:{position:"absolute",top:0,bottom:0,right:0,display:"block",width:r,height:a,left:n?l:0,opacity:n?1:0,visibility:n?"visible":"hidden",zIndex:8e3,backgroundColor:"rgba(0,0,0,0.5)",cursor:"pointer",overflow:"scroll",transition:n?"visibility 0s ease-out, left 0.3s ease-out, opacity 0.3s ease-out":"left 0.3s ease-out, opacity 0.3s ease-out, visibility 0s ease-out 0.3s"},availableWidth:r,availableHeight:a,sidebarWidth:s}},ws=n(157),xs=x.c.div.withConfig({displayName:"MainDisplayMarkdown__Container",componentId:"sc-5tw4mo-0"})(["margin:",";font-family:",";font-weight:300;color:",";line-height:1.4;width:","px;font-size:14px;line-height:1.4;@media (max-width:1080px){line-height:1.2;}h1{font-weight:700;font-size:2em;margin:0.3em 0;}h2{font-weight:600;font-size:1.8em;margin:0.3em 0;}h3{font-weight:500;font-size:1.6em;margin:0.3em 0;}h4{font-weight:500;font-size:1.4em;margin:0.2em 0;}h5{font-weight:500;font-size:1.2em;margin:0.2em 0;}h6{font-weight:500;font-size:1.2em;margin:0.2em 0;}pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px;}.line{margin-top:20px;margin-bottom:20px;border-bottom:1px solid #CCC;}.imageContainer{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;}img{margin-left:30px;margin-right:30px;margin-top:2px;margin-bottom:2px;}table,th,td{border:1px solid;}td,th{padding:3px;}"],(function(t){return t.mobile?"10px 5% 5% 5%":"50px 30px 30px 30px"}),M.b,(function(t){return t.theme.unselectedColor}),(function(t){return t.width-30})),Ms=Object(w.b)((function(t){return{narrativeBlock:t.narrative.blocks[t.narrative.blockIdx]}}))((function(t){var e=t.narrativeBlock,n=t.width,i=t.mobile,o=function(t){z.a.addHook("afterSanitizeAttributes",(function(t){"href"in t&&location.hostname!==t.hostname&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noreferrer nofollow")),D()(t.childNodes).filter((function(t){return"img"===t.localName})).length>0&&("a"===t.localName?t.parentNode.className+=" imageContainer":t.className+=" imageContainer")}));var e=z.a.sanitize,n=N()(t);return e(n,{ALLOWED_TAGS:["div","h1","h2","h3","h4","h5","h6","p","em","strong","del","ol","ul","li","a","img","#text","pre","hr","table","thead","tbody","th","tr","td"],ALLOWED_ATTR:["href","src","width","height","alt"],KEEP_CONTENT:!1,ALLOW_DATA_ATTR:!1})}(e.mainDisplayMarkdown);return y.a.createElement(xs,{width:n,mobile:i},y.a.createElement("div",{dir:"auto",dangerouslySetInnerHTML:{__html:o}}))}));function Es(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Es(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ts(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ks,Ss,Cs,js=Object(w.b)((function(t){return{loaded:t.narrative.loaded,blocks:t.narrative.blocks,currentInFocusBlockIdx:t.narrative.blockIdx,panelsToDisplay:t.controls.panelsToDisplay}}))(vs=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Ts()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;return o()(this,i),e=n.call(this,t),g()(l()(e),"NextButton",(function(t){return y.a.createElement(uo,{height:e.state.bannerHeight,onClick:e.goToNextPage},t.children)})),g()(l()(e),"PreviousButton",(function(t){return y.a.createElement(lo,{height:e.state.bannerHeight,onClick:e.goToPreviousPage},t.children)})),e.state={showingEndOfNarrativePage:!1,bannerHeight:50,contentHeight:window.innerHeight-100},e.exitNarrativeMode=function(){e.props.dispatch(Object(To.b)({path:e.props.blocks[0].dataset,query:!0}))},e.goToNextPage=function(){e.state.showingEndOfNarrativePage||(e.props.currentInFocusBlockIdx+1!==e.props.blocks.length?e._goToPage(e.props.currentInFocusBlockIdx+1):e.setState({showingEndOfNarrativePage:!0}))},e.goToPreviousPage=function(){0!==e.props.currentInFocusBlockIdx&&e._goToPage(e.props.currentInFocusBlockIdx-1)},e._goToPage=function(t){e.setState({showingEndOfNarrativePage:!1}),e.props.blocks[t]&&e.props.blocks[t].mainDisplayMarkdown?e.props.dispatch(Object(To.a)({query:to.a.parse(e.props.blocks[t].query),queryToDisplay:{n:t}})):e.props.dispatch(Object(To.b)({changeDataset:!1,query:to.a.parse(e.props.blocks[t].query),queryToDisplay:{n:t},push:!0})),document.getElementById("progress-bar").scrollIntoView()},e}return a()(i,[{key:"pageNarrativeContent",value:function(){if(this.props.blocks[this.props.currentInFocusBlockIdx].mainDisplayMarkdown)return null;var t=this.props.blocks[this.props.currentInFocusBlockIdx].__html;return 0===this.props.currentInFocusBlockIdx&&(t='\n  <p class="explanation">\n  Narratives are interleaved sections of text and associated nextstrain visualisations of the genomic data.\n  Click the coloured arrows at the top & bottom of each page to move through this narrative.\n  Within each page, you can scroll through the text to see visualisations of the genomic data.\n  </p>\n'+t),y.a.createElement("div",{id:"NarrativeBlock_".concat(this.props.currentInFocusBlockIdx),style:{padding:"10px 20px",height:"inherit",overflow:"hidden"},dangerouslySetInnerHTML:{__html:t}})}},{key:"renderMainMarkdown",value:function(){return this.props.panelsToDisplay.includes("EXPERIMENTAL_MainDisplayMarkdown")?y.a.createElement(Ms,{width:window.innerWidth,mobile:!0}):null}},{key:"renderVizCards",value:function(t){if(this.props.blocks[this.props.currentInFocusBlockIdx].mainDisplayMarkdown)return null;if(0===this.props.currentInFocusBlockIdx)return null;var e=window.innerWidth-50;return y.a.createElement(y.a.Fragment,null,this.props.panelsToDisplay.includes("tree")?y.a.createElement(dn,{width:e,height:t}):null,this.props.panelsToDisplay.includes("map")?y.a.createElement(Di,{width:e,height:t,justGotNewDatasetRenderNewMap:!1}):null)}},{key:"renderEndOfNarrative",value:function(){var t=this;return y.a.createElement(y.a.Fragment,null,y.a.createElement(this.PreviousButton,null,"Previous"),y.a.createElement(co,{height:this.state.contentHeight+this.state.bannerHeight},this.renderProgress(),y.a.createElement(so,null,y.a.createElement("h1",null,"End of Narrative"),y.a.createElement("a",{style:Ls({},io),onClick:function(){return t._goToPage(0)}},"Jump to the beginning"),y.a.createElement("br",null),y.a.createElement("a",{style:Ls({},io),onClick:this.exitNarrativeMode},"Leave the narrative & explore the data yourself"))))}},{key:"renderStartOfNarrative",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(co,{height:this.state.contentHeight+this.state.bannerHeight},this.renderProgress(),this.pageNarrativeContent(),this.renderVizCards(this.state.contentHeight),this.renderMainMarkdown()),y.a.createElement(this.NextButton,null,"Next"))}},{key:"renderMiddleOfNarrative",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(this.PreviousButton,{"aria-labelledby":"nav1"},"Previous"),y.a.createElement(co,{height:this.state.contentHeight},this.renderProgress(),this.pageNarrativeContent(),this.renderVizCards(this.state.contentHeight),this.renderMainMarkdown()),y.a.createElement(this.NextButton,{"aria-labelledby":"nav2"},"Next"))}},{key:"renderProgress",value:function(){var t=this;return y.a.createElement(oo,{id:"progress-bar",style:{height:"".concat(25,"px")}},this.props.blocks.map((function(e,n){var i=t.state.showingEndOfNarrativePage||t.props.currentInFocusBlockIdx!==n?"6px":"14px";return y.a.createElement(ro,{key:n,style:{width:i,height:i},onClick:function(){return t._goToPage(n)}})})))}},{key:"render",value:function(){return this.state.showingEndOfNarrativePage?this.renderEndOfNarrative():0===this.props.currentInFocusBlockIdx?this.renderStartOfNarrative():this.renderMiddleOfNarrative()}}]),i}(y.a.Component))||vs;function Os(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var As=Object(v.lazy)((function(){return n.e(4).then(n.bind(null,758))})),Ds=Object(v.lazy)((function(){return n.e(5).then(n.bind(null,760))})),Ps=Object(w.b)((function(t){return{panelsToDisplay:t.controls.panelsToDisplay,panelLayout:t.controls.panelLayout,displayNarrative:t.narrative.display,narrativeIsLoaded:t.narrative.loaded,narrativeTitle:t.narrative.title,browserDimensions:t.browserDimensions.browserDimensions,frequenciesLoaded:t.frequencies.loaded,metadataLoaded:t.metadata.loaded,treeLoaded:t.tree.loaded,sidebarOpen:t.controls.sidebarOpen,showOnlyPanels:t.controls.showOnlyPanels}}))((Cs=Ss=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=f()(e);if(Os()){var i=f()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return p()(this,t)});function i(t){var e;o()(this,i),e=n.call(this,t);var r=window.matchMedia("(min-width: ".concat(O.j,"px)"));return r.addListener((function(){return e.setState({mobileDisplay:!e.state.mql.matches})})),e.state={mql:r,mobileDisplay:!r.matches,showSpinner:!(e.props.metadataLoaded&&e.props.treeLoaded)},Object(Pi.b)(),e.toggleSidebar=e.toggleSidebar.bind(l()(e)),e}return a()(i,[{key:"componentWillReceiveProps",value:function(t){this.state.showSpinner&&t.metadataLoaded&&t.treeLoaded&&this.setState({showSpinner:!1})}},{key:"componentDidMount",value:function(){var t=this;document.addEventListener("dragover",(function(t){t.preventDefault()}),!1),document.addEventListener("drop",(function(e){return e.preventDefault(),t.props.dispatch(Yi(e.dataTransfer.files))}),!1)}},{key:"toggleSidebar",value:function(){this.props.dispatch({type:R.P,value:!this.props.sidebarOpen})}},{key:"shouldShowMapLegend",value:function(){var t=this.props.panelsToDisplay.includes("tree"),e="grid"!==this.props.panelLayout;return!t||e}},{key:"render",value:function(){var t=this;if(this.state.showSpinner)return y.a.createElement(ws.a,null);if(this.state.mobileDisplay&&this.props.displayNarrative)return y.a.createElement(y.a.Fragment,null,y.a.createElement(qi,null),y.a.createElement(x.a,{theme:ys},y.a.createElement(js,null)));var e,n,i=bs(this.props.browserDimensions,this.props.displayNarrative,this.props.sidebarOpen,this.state.mobileDisplay),o=i.availableWidth,r=i.availableHeight,a=i.sidebarWidth,s=i.overlayStyles,l=function(){t.props.dispatch({type:R.P,value:!1})},u=function(t,e,n,i,o){var r=t?.5:1,a=.36,s=t?.64:.88;if(n){var l=!0+e.includes("entropy")+e.includes("frequencies")-1;0===l?s=1:1===l?(s=.7,a=.3):(s=.5,a=.25),e.includes("map")&&e.includes("tree")&&!t&&(r=.5),!t||e.includes("map")&&e.includes("tree")||(r=1)}return{big:Qi({horizontal:r,vertical:s,availableWidth:i,availableHeight:o}),chart:Qi({horizontal:1,vertical:a,availableWidth:i,availableHeight:o,minHeight:150})}}("grid"===this.props.panelLayout,this.props.panelsToDisplay,this.props.displayNarrative,o,r),c=u.big,h=u.chart;return y.a.createElement("span",null,y.a.createElement(qi,null),y.a.createElement(ce.a,{showNothing:!0},y.a.createElement(x.a,{theme:ys},y.a.createElement(Ve,null))),y.a.createElement(E,{sidebarOpen:this.props.sidebarOpen,mobileDisplay:this.state.mobileDisplay,handler:this.toggleSidebar}),y.a.createElement(_s,{sidebarOpen:this.props.sidebarOpen,width:a,height:r,displayNarrative:this.props.displayNarrative,panelsToDisplay:this.props.panelsToDisplay,narrativeTitle:this.props.narrativeTitle,mobileDisplay:this.state.mobileDisplay,navBarHandler:this.toggleSidebar}),y.a.createElement(fs,{width:o,height:r,left:this.props.sidebarOpen?a:0},this.props.narrativeIsLoaded&&!this.props.panelsToDisplay.includes("EXPERIMENTAL_MainDisplayMarkdown")?(e=this.props.dispatch,n=this.props.displayNarrative,y.a.createElement("button",{style:$i({},M.o,{fontSize:14,backgroundColor:"inherit",zIndex:100,position:"fixed",right:5,top:-1,cursor:"pointer",color:M.a}),onClick:function(){return e({type:R.N,display:!n})}},n?"explore the data yourself":"return to the narrative")):null,this.props.displayNarrative||this.props.showOnlyPanels?null:y.a.createElement(pn,{width:Ki(o,1)}),this.props.panelsToDisplay.includes("tree")?y.a.createElement(dn,{width:c.width,height:c.height}):null,this.props.panelsToDisplay.includes("map")?y.a.createElement(Di,{width:c.width,height:c.height,justGotNewDatasetRenderNewMap:!1,legend:this.shouldShowMapLegend()}):null,this.props.panelsToDisplay.includes("entropy")?y.a.createElement(v.Suspense,{fallback:null},y.a.createElement(As,{width:h.width,height:h.height})):null,this.props.panelsToDisplay.includes("frequencies")&&this.props.frequenciesLoaded?y.a.createElement(v.Suspense,{fallback:null},y.a.createElement(Ds,{width:h.width,height:h.height})):null,this.props.displayNarrative||this.props.showOnlyPanels?null:y.a.createElement(Je,{width:Ki(o,1)}),this.props.displayNarrative&&this.props.panelsToDisplay.includes("EXPERIMENTAL_MainDisplayMarkdown")?y.a.createElement(Ms,{width:Ki(o,1)}):null),this.state.mobileDisplay?y.a.createElement("div",{style:s,onClick:l,onTouchStart:l}):null)}}]),i}(y.a.Component),g()(Ss,"propTypes",{dispatch:b.a.func.isRequired}),ks=Cs))||ks;e.default=Ps}])]);
//# sourceMappingURL=auspice.chunk.2.bundle.js.map